window.__require=function t(e,n,i){function o(r,l){if(!n[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){return o(e[r][1][t]||t)},p,p.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({Level1:[function(t,e,n){"use strict";cc._RF.push(e,"17ac33TpxNPeq9d25vABRlm","Level1");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,l=t("../../../Scripts/EffectManager"),s=t("../../../Scripts/LevelBase"),c=cc._decorator,p=c.ccclass,u=c.property,h=cc.tween;(function(t){t[t.ROCK=0]="ROCK",t[t.PUNCH=1]="PUNCH",t[t.HEAD_BANG=2]="HEAD_BANG",t[t.DIZZY=3]="DIZZY",t[t.WALL=4]="WALL",t[t.ALERT=5]="ALERT"})(r||(r={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgHole=null,e.imgCrack=null,e.text=null,e.skipIntro=!1,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.text.scale=.6,this.text.opacity=0},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.otherSprite[0].node.position=cc.v3(402,-250,0),this.scheduleOnce(function(){l.default.showScene()},.4),this._gameManager._levelCurrent.level=this.levelCurrent,this._gameManager._beginScene=this.node},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this._gameManager.firstPlay=!0},e.prototype.initStage=function(){t.prototype.initStage.call(this),this.showOptionContainer(!1),this.otherSprite[0].spriteFrame=this.imgCrack,this.otherSprite[1].node.position=cc.v3(-165,40),this.otherSprite[1].node.zIndex=cc.macro.MIN_ZINDEX,t.prototype.setLupin.call(this,cc.v2(-250,-460),"emotion/sinister","general/stand_thinking"),t.prototype.setOtherSprite.call(this,this.otherSprite[0],cc.v2(402,-205)),this.otherSprite.forEach(function(t){t.node.active=!1}),this.otherSprite[0].node.active=!0,this.lupin.node.scaleX=1,this.currentId=0,this.background.position=cc.v3(0,40),this.skipIntro?this.noIntro():(this.skipIntro=!0,this.effectText(),this.introduce())},e.prototype.effectText=function(){h(this.text).parallel(h().to(1.5,{scale:1.1},{easing:"cubicIn"}),h().to(1,{opacity:255},{easing:"cubicIn"})).to(.5,{scale:1},{easing:"cubicOut"}).delay(1.5).parallel(h().to(2,{scale:10},{easing:"cubicOut"}),h().to(1,{opacity:0},{easing:"cubicOut"})).start()},e.prototype.introduce=function(){var e=this,n=!0;this.lupin.timeScale=1,h(this.lupin.node).delay(1).call(function(){e.lupin.setAnimation(1,"general/walk",!0),h(e.lupin.node).by(.8,{position:cc.v3(180,110)}).call(function(){e.lupin.timeScale=1.5,e.lupin.setAnimation(1,"level_1/see_windows",!1),e.lupin.setCompleteListener(function(i){"level_1/see_windows"==i.animation.name&&n&&(n=!1,e.lupin.timeScale=1,e.lupin.setAnimation(1,"general/walk",!0),h(e.lupin.node).by(1.2,{position:cc.v3(320,-80)}).call(function(){var n=!0;e.lupin.timeScale=1.5,e.lupin.setAnimation(1,"level_1/knock_wall",!1),e.lupin.setCompleteListener(function(i){"level_1/knock_wall"==i.animation.name&&n&&(n=!1,e.lupin.node.scaleX=-1,e.lupin.timeScale=1,e.lupin.setAnimation(0,"emotion/sinister",!0),e.lupin.setAnimation(1,"general/walk",!0),h(e.lupin.node).to(1.5,{position:cc.v3(-250,-460)}).call(function(){e.lupin.node.scaleX=1,t.prototype.setLupin.call(e,cc.v2(-250,-460),"emotion/sinister","general/stand_thinking"),h(e.node).delay(2).call(function(){e.showOptionContainer(!0),e._gameManager.showGuide(!0)}).start()}).start())})}).start())})}).start()}).start()},e.prototype.noIntro=function(){var e=this;this.lupin.node.scaleX=1,t.prototype.setLupin.call(this,cc.v2(-250,-460),"emotion/sinister","general/stand_thinking"),h(this.node).delay(2).call(function(){e.showOptionContainer(!0),e._gameManager.showGuide(!0)}).start()},e.prototype.runOption1=function(){var t=this;this.lupin.setAnimation(1,"general/walk",!0),h(this.lupin.node).by(2,{position:cc.v3(250,60)}).call(function(){var e=!0,n=0;t.lupin.timeScale=1.5,t.playSound(r.ROCK,!1,.3),t.lupin.setAnimation(1,"level_1/lv2_stg1_tray_hit",!0),t.lupin.setCompleteListener(function(i){"level_1/lv2_stg1_tray_hit"==i.animation.name&&e&&(++n<5&&t.playSound(r.ROCK,!1,.3),5==n?(e=!1,t.lupin.setAnimation(1,"general/back",!1),t.lupin.setAnimation(0,"emotion/fear_1",!0),h(t.node).delay(1).call(function(){t.showFail(t.selected)}).start()):3==n&&(t.playSound(r.ALERT,!1,.5),t.otherSprite[1].node.active=!0,h(t.otherSprite[1].node).by(.5,{position:cc.v3(100,0)}).start()))})}).start()},e.prototype.runOption3=function(){var t=this;this.lupin.setAnimation(1,"general/walk",!0),this.lupin.setMix("general/head_hit_1","level_7/fall_giddy",.2),h(this.lupin.node).by(2,{position:cc.v3(350,0)}).call(function(){var e=!0,n=0;t.playSound(r.HEAD_BANG,!1,.4),t.lupin.setAnimation(1,"general/head_hit_1",!0),t.lupin.setAnimation(0,"emotion/angry",!0),t.lupin.setCompleteListener(function(i){"general/head_hit_1"==i.animation.name&&e&&(3==++n?(e=!1,t.playSound(r.DIZZY,!1,0),t.lupin.setAnimation(0,"level_7/fall_giddy",!1),t.lupin.setAnimation(1,"general/fall",!1),h(t.node).delay(1).call(function(){t.showFail(t.selected)}).start()):t.playSound(r.HEAD_BANG,!1,.4))})}).start()},e.prototype.nextScene=function(){var t=this,e=this.checkNextSceneExits(this.currentId,this.selected);if(e)return e.active=!0,this._gameManager._currentScene=e,void++this.currentId;(e=this.getInstantiate(this.currentId,this.selected))&&(e.zIndex=-1,this._gameManager._currentScene=e,this.arrScene.push(e),this.scheduleOnce(function(){t.node.addChild(e),t._gameManager._currentScene.parent.active=!0},.2)),++this.currentId},e.prototype.runOption2=function(){var t=this;this.lupin.setAnimation(0,"emotion/sinister",!0),h(this.lupin.node).parallel(h().delay(0).to(1,{position:cc.v3(0,-460,0)}).call(function(){t.lupin.addAnimation(1,"general/hand_hit",!0),t.playSound(r.PUNCH,!1,1.5)}),h().call(function(){t.lupin.setAnimation(1,"general/walk",!1)})).start();var e=0;this.lupin.setCompleteListener(function(t){var n=this;if("general/hand_hit"==t.animation.name){if(2!=e)return this.playSound(r.PUNCH,!1,1.5),void++e;this.playSound(r.WALL,!1,0),this.otherSprite[0].node.position=cc.v3(402,-310,0),this.otherSprite[0].spriteFrame=this.imgHole,this.lupin.setAnimation(1,"general/win_2.1",!0),this.lupin.setAnimation(0,"emotion/happy_1",!0),this.scheduleOnce(function(){n.showSuccess(n.selected)},1)}}.bind(this))},a([u(cc.SpriteFrame)],e.prototype,"imgHole",void 0),a([u(cc.SpriteFrame)],e.prototype,"imgCrack",void 0),a([u(cc.Node)],e.prototype,"text",void 0),a([p],e)}(s.default);n.default=d,cc._RF.pop()},{"../../../Scripts/EffectManager":void 0,"../../../Scripts/LevelBase":void 0}]},{},["Level1"]);
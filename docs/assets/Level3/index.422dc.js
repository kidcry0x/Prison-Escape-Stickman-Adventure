window.__require=function t(n,o,e){function i(r,a){if(!o[r]){if(!n[r]){var c=r.split("/");if(c=c[c.length-1],!n[c]){var s="function"==typeof __require&&__require;if(!a&&s)return s(c,!0);if(l)return l(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=o[r]={exports:{}};n[r][0].call(p.exports,function(t){return i(n[r][1][t]||t)},p,p.exports,t,n,o,e)}return o[r].exports}for(var l="function"==typeof __require&&__require,r=0;r<e.length;r++)i(e[r]);return i}({Level3:[function(t,n,o){"use strict";cc._RF.push(n,"09775+a/ZRG8KP3p3DXH3Rt","Level3");var e,i=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])})(t,n)},function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),l=this&&this.__decorate||function(t,n,o,e){var i,l=arguments.length,r=l<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,o,e);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(l<3?i(r):l>3?i(n,o,r):i(n,o))||r);return l>3&&r&&Object.defineProperty(n,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../../../Scripts/LevelBase"),c=cc._decorator,s=c.ccclass,p=(c.property,cc.tween);(function(t){t[t.WOOD_BREAK=0]="WOOD_BREAK",t[t.FREEZE=1]="FREEZE",t[t.FALL=2]="FALL"})(r||(r={}));var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.setBackground(),this._gameManager._levelCurrent.level=this.levelCurrent,this._gameManager._beginScene=this.node},n.prototype.initStage=function(){t.prototype.initStage.call(this),this.setBackground(),this.actionBegin()},n.prototype.setBackground=function(){this.background.position=cc.v3(410,0),this.otherSprite[2].node.position=cc.v3(15,-330),this.otherSprite[3].node.position=cc.v3(-170,-465),this.otherSprite.forEach(function(t){t.node.active=!1})},n.prototype.actionBegin=function(){var t=this,n=0;this.lupin.node.active=!0,this.showOptionContainer(!1),this.background.position=cc.v3(385,0),this.setLupin(cc.v2(-300,-400),"emotion/nervous","general/walk_slow"),p(this.lupin.node).to(2.5,{position:cc.v3(-60,-400)}).call(function(){t.lupin.setAnimation(1,"level_3/look_down",!1),t.lupin.setMix("level_3/look_down_loop","emotion/idle",.3),t.lupin.addAnimation(1,"level_3/look_down_loop",!1),t.lupin.setAnimation(0,"emotion/fear_1",!1),t.lupin.setCompleteListener(function(o){"level_3/look_down_loop"==o.animation.name&&(t.lupin.addAnimation(1,"emotion/idle",!0),t.lupin.setAnimation(0,"emotion/fear_2",!1),t.lupin.setCompleteListener(function(o){"emotion/fear_2"==o.animation.name&&n<1&&(t.showOptionContainer(!0),++n)}))})}).start(),this.lupin.setMix("level_3/lv3_stg1_wood","general/fall_high",.3)},n.prototype.runOption1=function(){var t=this;p(this.shadow).to(.3,{opacity:255}).call(function(){t.otherSprite[0].node.active=!0}).delay(.5).call(function(){t.lupin.setAnimation(1,"general/walk",!0),p(t.lupin.node).to(1,{position:cc.v3(100,-330)}).call(function(){t.lupin.timeScale=1.2,t.lupin.setAnimation(1,"level_3/lv3_stg1_wood",!0),t.lupin.setAnimation(0,"emotion/worry",!0),p(t.background).to(4.2,{position:cc.v3(-100,0)}).start(),p(t.lupin.node).to(4,{position:cc.v3(-100,-330)}).delay(1).call(function(){t.lupin.timeScale=1,t.playSound(r.FREEZE,!1,0),t.playSound(r.FALL,!1,1),t.lupin.setAnimation(1,"general/fall_high",!0),t.lupin.setAnimation(0,"emotion/fear_2",!0)}).delay(1).call(function(){t.crashed()}).delay(1).call(function(){t.showFail(t.selected)}).start()}).start()}).to(.3,{opacity:0}).start()},n.prototype.runOption2=function(){var t=this;p(this.shadow).to(.3,{opacity:255}).call(function(){t.otherSprite[1].node.active=!0}).delay(.5).call(function(){p(t.lupin.node).to(0,{position:cc.v3(-50,-330)}).call(function(){t.creep()}).start()}).to(.3,{opacity:0}).start()},n.prototype.runOption3=function(){var t=this;p(this.shadow).to(.3,{opacity:255}).call(function(){t.otherSprite[2].node.active=!0}).delay(.5).call(function(){t.lupin.setAnimation(1,"general/walk",!0),p(t.lupin.node).to(1,{position:cc.v3(200,-330)}).call(function(){t.lupin.setAnimation(1,"level_3/lv3_stg1_wood",!0),t.lupin.setAnimation(0,"emotion/worry",!0),t.playSound(r.WOOD_BREAK,!1,3.8),p(t.background).to(4,{position:cc.v3(-100,0)}).call(function(){this.broken()}.bind(t)).start(),p(t.lupin.node).to(3,{position:cc.v3(-100,-330)}).delay(1).call(function(){t.playSound(r.FALL,!1,.2),t.lupin.setAnimation(1,"general/fall_high",!0),t.lupin.setAnimation(0,"emotion/fear_2",!0)}).delay(1).call(function(){t.crashed()}).delay(1).call(function(){t.showFail(t.selected)}).start()}).start()}).to(.3,{opacity:0}).start()},n.prototype.broken=function(){this.otherSprite[2].node.active=!1,this.otherSprite[3].node.active=!0},n.prototype.crashed=function(){p(this.lupin.node).by(.5,{position:cc.v3(0,-2e3)}).start(),p(this.otherSprite[3].node).by(.5,{position:cc.v3(0,-2e3)}).start()},n.prototype.creep=function(){var t=this;this.lupin.setMix("general/creep","general/walk",.3),this.lupin.setAnimation(1,"general/creep",!0),this.lupin.setAnimation(0,"emotion/worry",!0),p(this.lupin.node).by(8,{position:cc.v3(40,30)}).start(),p(this.background).to(8,{position:cc.v3(-385,0)}).call(function(){t.walk(),p(t.lupin.node).by(2,{position:cc.v3(200,0)}).call(function(){t.lupin.setAnimation(1,"general/win_1.1",!0)}).delay(1).call(function(){t.showSuccess(t.selected)}).start()}).start()},n.prototype.walk=function(){this.lupin.setAnimation(1,"general/walk",!0),this.lupin.setAnimation(0,"emotion/excited",!0)},l([s],n)}(a.default);o.default=u,cc._RF.pop()},{"../../../Scripts/LevelBase":void 0}]},{},["Level3"]);
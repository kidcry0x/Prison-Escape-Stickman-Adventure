window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ActionController:[function(e,t,n){"use strict";cc._RF.push(t,"5eadbNZIh1KfLC/ZwVlKPTE","ActionController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EASING=n.LISTENER=n.TYPE=void 0;var a,s,c,l=cc._decorator,u=l.ccclass,d=l.property,p=cc.tween;(function(e){e[e.NONE=0]="NONE",e[e.ACTIVE=1]="ACTIVE",e[e.ANIMATION=2]="ANIMATION",e[e.MIX=3]="MIX",e[e.MOVE_TO=4]="MOVE_TO",e[e.MOVE_BY=5]="MOVE_BY",e[e.OPACITY=6]="OPACITY",e[e.ROTATION=7]="ROTATION",e[e.SCALE=8]="SCALE",e[e.STOP_ACTION=9]="STOP_ACTION",e[e.ZOOM_CAMERA=10]="ZOOM_CAMERA"})(a=n.TYPE||(n.TYPE={})),function(e){e[e.NONE=0]="NONE",e[e.START=1]="START",e[e.END=2]="END",e[e.COMPLETE=3]="COMPLETE"}(s=n.LISTENER||(n.LISTENER={})),function(e){e[e.NONE=0]="NONE",e[e.QuadIn=1]="QuadIn",e[e.QuadOut=2]="QuadOut",e[e.QuadInOut=3]="QuadInOut",e[e.CubicIn=4]="CubicIn",e[e.CubicOut=5]="CubicOut",e[e.CubicInOut=6]="CubicInOut",e[e.QuartIn=7]="QuartIn",e[e.QuartOut=8]="QuartOut",e[e.QuartInOut=9]="QuartInOut",e[e.QuintIn=10]="QuintIn",e[e.QuintOut=11]="QuintOut",e[e.QuintInOut=12]="QuintInOut",e[e.SineIn=13]="SineIn",e[e.SineOut=14]="SineOut",e[e.SineInOut=15]="SineInOut",e[e.ExpoIn=16]="ExpoIn",e[e.ExpoOut=17]="ExpoOut",e[e.ExpoInOut=18]="ExpoInOut",e[e.CircIn=19]="CircIn",e[e.CircOut=20]="CircOut",e[e.CircInOut=21]="CircInOut",e[e.ElasticIn=22]="ElasticIn",e[e.ElasticOut=23]="ElasticOut",e[e.ElasticInOut=24]="ElasticInOut",e[e.BackIn=25]="BackIn",e[e.BackOut=26]="BackOut",e[e.BackInOut=27]="BackInOut",e[e.BounceIn=28]="BounceIn",e[e.BounceOut=29]="BounceOut",e[e.BounceInOut=30]="BounceInOut",e[e.Smooth=31]="Smooth",e[e.Fade=32]="Fade"}(c=n.EASING||(n.EASING={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.NONE,t.repeatForever=!1,t._listener=s.NONE,t._repeatTimes=1,t._skeleton=null,t._track=0,t._animationName="",t._animation1="",t._animation2="",t._timeMix=0,t._loop=!1,t._timeScale=0,t.timeDelay=0,t.duration=0,t._isActive=!1,t._position=new cc.Vec2,t._easing=c.NONE,t._value=0,t._stopAllAction=!1,t.target=[],t.callback=[],t}return i(t,e),Object.defineProperty(t.prototype,"repeatTimes",{set:function(e){e>=0&&(this._repeatTimes=e)},enumerable:!1,configurable:!0}),t.prototype.runAction=function(e){var t=e.getEasing(e._easing);switch(e.type){case a.ACTIVE:e.target.forEach(function(t){t.active=e._isActive}),e.runCallback(e);break;case a.ANIMATION:if(cc.Tween.stopAllByTarget(e._skeleton),!e._skeleton)break;e._timeMix>0&&e._skeleton.setMix(e._skeleton.animation,e._animationName,e._timeMix),e._skeleton.timeScale=e._timeScale,p(e._skeleton.node).delay(e.timeDelay).call(function(){e._skeleton.setAnimation(e._track,e._animationName,e._loop)}).start(),e.onListener(e,!0,e._listener);break;case a.MIX:e._skeleton.setMix(e._animation1,e._animation2,e.timeMix),e.runCallback(e);break;case a.MOVE_BY:for(var n=0,o=e.target;n<o.length;n++){var i=o[n];e.repeatForever?p(i).repeatForever(p().delay(e.timeDelay).by(e.duration,{position:cc.v3(e._position)},{easing:t})).call(function(){e.runCallback(e)}).start():p(i).repeat(e._repeatTimes,p().delay(e.timeDelay).by(e.duration,{position:cc.v3(e._position)},{easing:t})).call(function(){e.runCallback(e)}).start()}break;case a.MOVE_TO:for(var r=0,s=e.target;r<s.length;r++)i=s[r],e.repeatForever?p(i).repeatForever(p().delay(e.timeDelay).to(e.duration,{position:cc.v3(e._position)},{easing:t})).call(function(){e.runCallback(e)}).start():p(i).repeat(e._repeatTimes,p().delay(e.timeDelay).to(e.duration,{position:cc.v3(e._position)},{easing:t})).call(function(){e.runCallback(e)}).start();break;case a.OPACITY:for(var c=0,l=e.target;c<l.length;c++)i=l[c],e.repeatForever?p(i).repeatForever(p().delay(e.timeDelay).to(e.duration,{opacity:e._value},{easing:t})).call(function(){e.runCallback(e)}).start():p(i).repeat(e._repeatTimes,p().delay(e.timeDelay).to(e.duration,{opacity:e._value},{easing:t})).call(function(){e.runCallback(e)}).start();break;case a.ROTATION:for(var u=0,d=e.target;u<d.length;u++)i=d[u],e.repeatForever?p(i).repeatForever(p().delay(e.timeDelay).to(e.duration,{rotation:e._value},{easing:t})).call(function(){e.runCallback(e)}).start():p(i).repeat(e._repeatTimes,p().delay(e.timeDelay).to(e.duration,{rotation:e._value},{easing:t})).call(function(){e.runCallback(e)}).start();break;case a.SCALE:for(var f=0,v=e.target;f<v.length;f++)i=v[f],e.repeatForever?p(i).repeatForever(p().delay(e.timeDelay).to(e.duration,{scale:e._value},{easing:t})).call(function(){e.runCallback(e)}).start():p(i).repeat(e._repeatTimes,p().delay(e.timeDelay).to(e.duration,{scale:e._value},{easing:t})).call(function(){e.runCallback(e)}).start();break;case a.STOP_ACTION:e._stopAllAction?(e.target.forEach(function(e){e.getComponent(sp.Skeleton).timeScale=0}),cc.Tween.stopAll()):e.callback.forEach(function(e){cc.Tween.stopAllByTarget(e.target)});break;case a.ZOOM_CAMERA:e.callback.forEach(function(t){t.target.getComponent(cc.Camera).zoomRatio=e._value});break;case a.NONE:e.runCallback(e)}},t.prototype.onListener=function(e,t,n){switch(n){case s.START:e._skeleton&&e._skeleton.setStartListener(function(n){console.log("%c"+n.animation.name,"color:green"),console.log("%c"+n.animation.name,"color:blue"),t&&n.animation.name==e._animationName&&(t=!1,e.runCallback(e))});break;case s.END:e._skeleton&&e._skeleton.setEndListener(function(n){console.log("%c"+n.animation.name,"color:green"),console.log("%c"+n.animation.name,"color:blue"),t&&n.animation.name==e._animationName&&(t=!1,e.runCallback(e))});break;case s.COMPLETE:e._skeleton&&e._skeleton.setCompleteListener(function(n){console.log("%c"+n.animation.name,"color:green"),console.log("%c"+n.animation.name,"color:blue"),t&&n.animation.name==e._animationName&&(t=!1,e.runCallback(e))})}},t.prototype.runCallback=function(e){for(var t="",n="",o=0,i=e.callback;o<i.length;o++){var r=i[o];e.callback.length>0&&(t=r._componentName,n=r.handler,(0,r.target.getComponent(t)[n])(r.target.getComponent(t)))}},t.prototype.getEasing=function(e){if(e==c.NONE)return null;switch(e){case c.QuadIn:return"quadIn";case c.QuadOut:return"quadOut";case c.QuadInOut:return"quadInOut";case c.CubicIn:return"cubicIn";case c.CubicOut:return"cubicOut";case c.CubicInOut:return"cubicInOut";case c.QuartIn:return"quartIn";case c.QuartOut:return"quartOut";case c.QuartInOut:return"quartInOut";case c.QuintIn:return"quintIn";case c.QuintOut:return"quintOut";case c.QuintInOut:return"quintInOut";case c.SineIn:return"sineIn";case c.SineOut:return"sineOut";case c.SineInOut:return"sineInOut";case c.ExpoIn:return"expoIn";case c.ExpoOut:return"expoOut";case c.ExpoInOut:return"expoInOut";case c.CircIn:return"circIn";case c.CircOut:return"circOut";case c.CircInOut:return"circInOut";case c.ElasticIn:return"elasticIn";case c.ElasticOut:return"elasticOut";case c.ElasticInOut:return"elasticInOut";case c.BackIn:return"backIn";case c.BackOut:return"backOut";case c.BackInOut:return"backInOut";case c.BounceIn:return"bounceIn";case c.BounceOut:return"bounceOut";case c.BounceInOut:return"bounceInOut";case c.Smooth:return"smooth";case c.Fade:return"fade"}},t.prototype.onCompleteIntroduce=function(){this.node.dispatchEvent(new cc.Event.EventCustom("complete_introduce",!0))},r([d({type:cc.Enum(a)})],t.prototype,"type",void 0),r([d({visible:function(){return this.type!=a.ACTIVE&&this.type!=a.ANIMATION&&this.type!=a.MIX}})],t.prototype,"repeatForever",void 0),r([d({type:cc.Enum(s),visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_listener",void 0),r([d({visible:function(){return!this.repeatForever&&this.type!=a.ACTIVE&&this.type!=a.ANIMATION&&this.type!=a.MIX}})],t.prototype,"_repeatTimes",void 0),r([d({type:sp.Skeleton,visible:function(){return this.type==a.ANIMATION||this.type==a.MIX}})],t.prototype,"_skeleton",void 0),r([d({visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_track",void 0),r([d({visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_animationName",void 0),r([d({visible:function(){return this.type==a.MIX}})],t.prototype,"_animation1",void 0),r([d({visible:function(){return this.type==a.MIX}})],t.prototype,"_animation2",void 0),r([d({visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_timeMix",void 0),r([d({visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_loop",void 0),r([d({visible:function(){return this.type==a.ANIMATION}})],t.prototype,"_timeScale",void 0),r([d({visible:function(){return!this.repeatForever&&this.type!=a.ACTIVE&&this.type!=a.MIX}})],t.prototype,"repeatTimes",null),r([d({visible:function(){return this.type!=a.MIX}})],t.prototype,"timeDelay",void 0),r([d({visible:function(){return this.type!=a.STOP_ACTION&&this.type!=a.ANIMATION&&this.type!=a.MIX}})],t.prototype,"duration",void 0),r([d({visible:function(){return this.type==a.ACTIVE}})],t.prototype,"_isActive",void 0),r([d({visible:function(){return this.type==a.MOVE_BY||this.type==a.MOVE_TO}})],t.prototype,"_position",void 0),r([d({type:cc.Enum(c),visible:function(){return this.type!=a.ACTIVE&&this.type!=a.STOP_ACTION&&this.type!=a.ANIMATION&&this.type!=a.MIX}})],t.prototype,"_easing",void 0),r([d({visible:function(){return this.type==a.OPACITY||this.type==a.ROTATION||this.type==a.SCALE}})],t.prototype,"_value",void 0),r([d({visible:function(){return this.type==a.STOP_ACTION}})],t.prototype,"_stopAllAction",void 0),r([d({type:cc.Node})],t.prototype,"target",void 0),r([d({type:[cc.Component.EventHandler]})],t.prototype,"callback",void 0),r([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{}],AdsManager:[function(e,t,n){"use strict";cc._RF.push(t,"c1defWhr01FsasENtLcKElH","AdsManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Data"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code="ADS_NOT_LOADED",t}return i(t,e),t}(Error)),u=function(){function e(){this.preloadedInterstitial=null,this.preloadedReward=null,this.isLoadedInsterestialAds=!1,this.isLoadedRewardAds=!1,this.lastShowTime=0,this.adsRetryTime=3e4}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.prototype.preloadInterestialAds=function(){var e=this;this.isLoadedInsterestialAds||FBInstant.getInterstitialAdAsync("180095580641401_180096993974593").then(function(t){return cc.log(e),e.preloadedInterstitial=t,e.preloadedInterstitial.loadAsync()}).then(function(){console.log("Interstitial preloaded"),e.isLoadedInsterestialAds=!0}).catch(function(t){console.error("Interstitial failed to preload: "+t.message),setTimeout(function(){this.handleAdsNoFill(this.preloadedInterstitial,2)}.bind(e),e.adsRetryTime)})},e.prototype.preloadRewardVideoAds=function(){var e=this;this.isLoadedRewardAds||FBInstant.getRewardedVideoAsync("180095580641401_180097063974586").then(function(t){return e.preloadedReward=t,e.preloadedReward.loadAsync()}).then(function(){console.log("reward preloaded"),e.isLoadedRewardAds=!0}).catch(function(e){console.error("reward failed to preload: "+e.message)})},e.prototype.preload=function(){var e=this;a.default.getData(a.default.CONFIG_KEY,function(t,n){t||(e.adsRetryTime=n.adsRetryTime||e.adsRetryTime),e.preloadInterestialAds(),e.preloadRewardVideoAds()})},e.prototype.handleAdsNoFill=function(e,t){var n=this;t>3||e.loadAsync().then(function(){console.log("Interstitial preloaded"),n.isLoadedInsterestialAds=!0}).catch(function(o){console.error("Interstitial failed to preload: "+o.message),setTimeout(function(){n.handleAdsNoFill(e,t+1)},n.adsRetryTime)})},e.prototype.showInterestialAds=function(e){var t=this;void 0===e&&(e=null),Date.now()-this.lastShowTime<this.adsRetryTime?e&&e(Error("CAPPED_TIME")):null!=this.preloadedInterstitial?(cc.audioEngine.pauseMusic(),this.preloadedInterstitial.showAsync().then(function(){cc.audioEngine.resumeMusic(),t.isLoadedInsterestialAds=!1,console.log("Interstitial ad finished successfully"),t.preloadInterestialAds(),t.lastShowTime=Date.now(),e&&e(null)}).catch(function(t){cc.audioEngine.resumeMusic(),console.error(t.message),e&&e(t)})):e&&e(Error("NULL inters"))},e.prototype.reloadRewardedAds=function(){this.isLoadedRewardAds=!1,console.log("Rewarded ad finished successfully"),this.preloadRewardVideoAds()},e.prototype.showRewardedAds=function(e){var t=this;if(void 0===e&&(e=null),cc.audioEngine.pauseMusic(),this.preloadedReward&&this.preloadedReward.showAsync().then(function(){t.reloadRewardedAds(),e&&e(null),cc.audioEngine.resumeMusic()}).catch(function(n){cc.audioEngine.resumeMusic(),console.error("ads err",n.message),t.reloadRewardedAds(),e&&e(n)}),!this.preloadedReward){this.onAdsRewardFail();var n=new l("ADS_NOT_LOADED");n.code="ADS_NOT_LOADED",e&&e(n)}},e.prototype.onAdsRewardFail=function(){cc.find("Canvas/UI").getComponent("UIController").showAlert("NO INTERNET CONNECTION",2.5)},t=r([c],e)}();n.default=u,cc._RF.pop()},{"./Data":"Data"}],Alert:[function(e,t,n){"use strict";cc._RF.push(t,"044d3DDMC9Kf5Tpw9Zpr6YN","Alert");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=cc.tween,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t}return i(t,e),t.prototype.onEnable=function(){this.text.scale=0,this.text.opacity=0,l(this.text).to(.5,{scale:1,opacity:255},{easing:"cubicIn"}).start()},t.prototype.onClose=function(){this.node.active=!1},t.prototype.setText=function(e){this.text.getComponent(cc.Label).string=e},r([c(cc.Node)],t.prototype,"text",void 0),r([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],BundleManager:[function(e,t,n){"use strict";cc._RF.push(t,"7645afhoy5Be4b1dv1hvYmb","BundleManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=[],s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bundle=[],t._prefabs=[],t._lazyLoadBundle=[],t}var n;return i(t,e),n=t,t.getInstance=function(){return n._instance?n._instance:(n._instance=new n,n._instance)},t.prototype.getPrefabByName=function(e,t){var n=this;void 0===t&&(t=null);for(var o=0,i=this._prefabs;o<i.length;o++){var r=i[o];if(r.name==e)return void(t&&t(null,r))}cc.assetManager.loadBundle(e,function(o,i){o?t?(console.error(o),t(o,null)):console.error(o):i.load(e,cc.Prefab,function(e,o){if(!e)return console.error("Loaded "+o.name),n._prefabs.includes(o)||n._prefabs.push(o),void(t&&t(null,o));console.log(e)})})},t.prototype.getResource=function(e,t,n,o){var i=function(e){e.instance.load(t,n,function(t,i){if(t)return o(t,null);e.resources.push({namePath:n,instance:i,type:n}),o(null,i)})},r=a.find(function(t){return t.instance.name===e});if(r){var s=r.resources.find(function(e){return e.namePath===t&&e.type===n});return s?o(null,s.instance):i(r)}cc.assetManager.loadBundle(e,function(e,t){if(e)return o(e,null);var n={instance:t,resources:[]};a.push(n),i(n)})},t._instance=null,n=r([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{}],ButtonNext:[function(e,t,n){"use strict";cc._RF.push(t,"619c7FKngVAq4hGivO+DbG/","ButtonNext");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./EffectManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){a.default.scaleForever(this.node,1,1.1,.7)},r([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"./EffectManager":"EffectManager"}],ClickItem:[function(e,t,n){"use strict";cc._RF.push(t,"999c8OWQ45LuamLep+cbF8/","ClickItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isClick=!1,t}return i(t,e),t.prototype.onClick=function(){if(this.isClick){var e=new cc.Event.EventCustom("click_item",!0),t=this.node.getChildByName("txt_number").getComponent(cc.Label).string;e.level=Number(t)-1,this.node.dispatchEvent(e)}},r([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],ClipController:[function(e,t,n){"use strict";cc._RF.push(t,"29db6CM5eJA4LKE7xSCD9h9","ClipController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.TYPE=void 0;var a,s=e("./StageController"),c=e("./EffectManager"),l=cc._decorator,u=l.ccclass,d=l.property;(function(e){e[e.NONE=0]="NONE",e[e.INTRODUCE=1]="INTRODUCE",e[e.SUCCESS=2]="SUCCESS",e[e.FAIL=3]="FAIL"})(a=n.TYPE||(n.TYPE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.NONE,t.nextStage=null,t.fade=!1,t.actionStart=[],t._=null,t}return i(t,e),t.prototype.onLoad=function(){this._=this},t.prototype.onEnable=function(){this.node.on("complete_introduce",this.onCompleteIntroduce,this)},t.prototype.onDisable=function(){this.node.on("complete_introduce",this.onCompleteIntroduce,this)},t.prototype.onCompleteIntroduce=function(e){e.stopPropagation();var t=cc.find("Canvas/OptionContainer");c.default.effectScaleOption(t,.7)},t.prototype.startClip=function(e){for(var t="",n="",o=0,i=e.actionStart;o<i.length;o++){var r=i[o];t=r._componentName,n=r.handler,(0,r.target.getComponent(t)[n])(r.target.getComponent(t))}},t.prototype.onFinishClip=function(e){switch(console.log("%c"+e.type,"color: violet"),e.type){case a.INTRODUCE:var t=e.node.parent.getComponent("StageController");c.default.effectScaleOption(t.optionContainer,.5);break;default:e.node.parent.getComponent("StageController").onResult(e.type)}},r([d({type:cc.Enum(a)})],t.prototype,"type",void 0),r([d({type:s.default})],t.prototype,"nextStage",void 0),r([d],t.prototype,"fade",void 0),r([d({type:cc.Component.EventHandler})],t.prototype,"actionStart",void 0),r([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./EffectManager":"EffectManager","./StageController":"StageController"}],ComingSoon2:[function(e,t,n){"use strict";cc._RF.push(t,"53946CuBB5P87+zTy0UYp+D","ComingSoon2");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Scripts/ComingSoon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.node.opacity=0,this.node.scale=.7},t.prototype.onEnable=function(){var e=this;cc.tween(this.node).parallel(cc.tween().to(.2,{opacity:255}),cc.tween().to(.2,{scale:1},{easing:"quartOut"})).call(function(){e.node.on("touchend",e.onClose,e)}).start()},t.prototype.onClose=function(){var e=this;cc.tween(this.node).parallel(cc.tween().to(.2,{opacity:0}),cc.tween().to(.2,{scale:.7},{easing:"quartOut"})).call(function(){e.node.active=!1}).start()},r([c],t)}(a.default));n.default=l,cc._RF.pop()},{"../Scripts/ComingSoon":"ComingSoon"}],ComingSoon:[function(e,t,n){"use strict";cc._RF.push(t,"54298/iC0NMXYnoRNWGjB1u","ComingSoon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Data"),s=cc._decorator,c=s.ccclass,l=s.property,u=cc.tween,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t.money=null,t._gameManager=null,t._data=null,t}return i(t,e),t.prototype.start=function(){this._gameManager=cc.find("Canvas/GameManager").getComponent("GameManager")},t.prototype.onHome=function(){this._gameManager.onHome(),this.node.active=!1},t.prototype.onReplay=function(){this._gameManager.onReplay(),this.node.active=!1},t.prototype.onEnable=function(){var e=this;this.text.scale=7,this.text.opacity=0,u(this.text).parallel(u().to(1,{scale:1},{easing:"cubicIn"}),u().to(1,{opacity:255},{easing:"cubicIn"})).start(),a.default.getData(a.default.FACEBOOK_KEY,function(t,n){e._data=n,e.money.string=e._data.money})},t.prototype.addMoney=function(e){var t=this,n=e<0?-1:1;0!=e&&u(this.money.node).repeat(e*n/3,u().call(function(){t.money.string=(parseInt(t.money.string)+3*n).toString()}).delay(.03)).call(function(){a.default.getData(a.default.FACEBOOK_KEY,function(n,o){t._data=o,t._data.money+=e,t.money.string=t._data.money,a.default.saveData(t._data,a.default.FACEBOOK_KEY)})}).start()},r([l(cc.Node)],t.prototype,"text",void 0),r([l(cc.Label)],t.prototype,"money",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./Data":"Data"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"0dd0flSBFtGCK3C4oudkQFv","Config");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./FBInstantManager"),a=e("./FirebaseManager"),s=cc._decorator,c=s.ccclass,l=(s.property,{adsRetryTime:3e4}),u=r.default.getInstance().getPlayerId(),d=function(){function e(){}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.isLocal=function(){return"localId"===u},e.prototype.getDynamicConfig=function(e){var n=this;if(t.isLocal())return e(o({},l));a.default.getInstance().getConfig(function(t,o){return t?(console.log("get dynamic config error",t),e(t,null)):e(null,o||n.getDefaultConfig())})},e.prototype.getDefaultConfig=function(){return o({},l)},t=i([c],e)}();n.default=d,cc._RF.pop()},{"./FBInstantManager":"FBInstantManager","./FirebaseManager":"FirebaseManager"}],CountDown5s:[function(e,t,n){"use strict";cc._RF.push(t,"7be24qOSP5BCqev62sqCXxY","CountDown5s");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./EventManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countDown=null,t}return i(t,e),t.prototype.onEnable=function(){this.runCountDown(5)},t.prototype.onDisable=function(){this.stopCountDown()},t.prototype.runCountDown=function(e){var t=Date.now();this.countDown=function(){var n=Date.now()-t,o=1-1/(1e3*e/n);if(this.node.getComponent(cc.Sprite).fillRange=o,this.node.getChildByName("Second").getComponent(cc.Label).string=Math.floor(6-n/1e3),o<-.009){this.node.getComponent(cc.Sprite).fillRange=0;var i=cc.find("Canvas/GameManager").getComponent("GameManager"),r=i._currentScene;i._ui.showUIContinue(!1),r&&a.default.sendRequestPlayStageBegin(r),this.unschedule(this.countDown)}},this.schedule(this.countDown,.01)},t.prototype.stopCountDown=function(){this.unschedule(this.countDown),console.log("%cStop CountDown","color:orange")},r([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"./EventManager":"EventManager"}],1:[function(e,t){(function(e){"use strict";var n,o,i,r,a=a||function(e){var t={},n=t.lib={},o=function(){},i=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var i=0;i<e;i++)t[o+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(o+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[o+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;o<t;o+=4)n.push(4294967296*e.random()|0);return new r.init(n,t)}}),a=t.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new r.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new r.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,i=e.min(4*t,i),t){for(var c=0;c<t;c+=a)this._doProcessBlock(o,c);c=o.splice(0,t),n.sigBytes-=i}return new r.init(c,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=t.algo={};return t}(Math);(function(e){for(var t=a,n=(i=t.lib).WordArray,o=i.Hasher,i=t.algo,r=[],s=[],c=function(e){return 4294967296*(e-(0|e))|0},l=2,u=0;64>u;){var d;e:{d=l;for(var p=e.sqrt(d),f=2;f<=p;f++)if(!(d%f)){d=!1;break e}d=!0}d&&(8>u&&(r[u]=c(e.pow(l,.5))),s[u]=c(e.pow(l,1/3)),u++),l++}var v=[];i=i.SHA256=o.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],c=n[4],l=n[5],u=n[6],d=n[7],p=0;64>p;p++){if(16>p)v[p]=0|e[t+p];else{var f=v[p-15],h=v[p-2];v[p]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+v[p-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+v[p-16]}f=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+s[p]+v[p],h=((o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22))+(o&i^o&r^i&r),d=u,u=l,l=c,c=a+f|0,a=r,r=i,i=o,o=f+h|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=o._createHelper(i),t.HmacSHA256=o._createHmacHelper(i)})(Math),o=(n=a).enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),function(){var e=a,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var r=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<n;a++)e.push(o.charAt(r>>>6*(3-a)&63));if(t=o.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,o=this._map;(i=o.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],r=0,a=0;a<n;a++)if(a%4){var s=o.indexOf(e.charAt(a-1))<<a%4*2,c=o.indexOf(e.charAt(a))>>>6-a%4*2;i[r>>>2]|=(s|c)<<24-r%4*8,r++}return t.create(i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={})),function(e){(function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok",e[e.Created=10]="Created"})(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.EventValidation=1]="EventValidation",e[e.Database=2]="Database",e[e.Init=3]="Init",e[e.Http=4]="Http",e[e.Json=5]="Json"})(e.EGASdkErrorCategory||(e.EGASdkErrorCategory={})),function(e){e[e.Undefined=0]="Undefined",e[e.BusinessEvent=1]="BusinessEvent",e[e.ResourceEvent=2]="ResourceEvent",e[e.ProgressionEvent=3]="ProgressionEvent",e[e.DesignEvent=4]="DesignEvent",e[e.ErrorEvent=5]="ErrorEvent",e[e.InitHttp=9]="InitHttp",e[e.EventsHttp=10]="EventsHttp",e[e.ProcessEvents=11]="ProcessEvents",e[e.AddEventsToStore=12]="AddEventsToStore",e[e.AdEvent=20]="AdEvent"}(e.EGASdkErrorArea||(e.EGASdkErrorArea={})),function(e){e[e.Undefined=0]="Undefined",e[e.InvalidCurrency=1]="InvalidCurrency",e[e.InvalidShortString=2]="InvalidShortString",e[e.InvalidEventPartLength=3]="InvalidEventPartLength",e[e.InvalidEventPartCharacters=4]="InvalidEventPartCharacters",e[e.InvalidStore=5]="InvalidStore",e[e.InvalidFlowType=6]="InvalidFlowType",e[e.StringEmptyOrNull=7]="StringEmptyOrNull",e[e.NotFoundInAvailableCurrencies=8]="NotFoundInAvailableCurrencies",e[e.InvalidAmount=9]="InvalidAmount",e[e.NotFoundInAvailableItemTypes=10]="NotFoundInAvailableItemTypes",e[e.WrongProgressionOrder=11]="WrongProgressionOrder",e[e.InvalidEventIdLength=12]="InvalidEventIdLength",e[e.InvalidEventIdCharacters=13]="InvalidEventIdCharacters",e[e.InvalidProgressionStatus=15]="InvalidProgressionStatus",e[e.InvalidSeverity=16]="InvalidSeverity",e[e.InvalidLongString=17]="InvalidLongString",e[e.DatabaseTooLarge=18]="DatabaseTooLarge",e[e.DatabaseOpenOrCreate=19]="DatabaseOpenOrCreate",e[e.JsonError=25]="JsonError",e[e.FailHttpJsonDecode=29]="FailHttpJsonDecode",e[e.FailHttpJsonEncode=30]="FailHttpJsonEncode",e[e.InvalidAdAction=31]="InvalidAdAction",e[e.InvalidAdType=32]="InvalidAdType",e[e.InvalidString=33]="InvalidString"}(e.EGASdkErrorAction||(e.EGASdkErrorAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Currency=1]="Currency",e[e.CartType=2]="CartType",e[e.ItemType=3]="ItemType",e[e.ItemId=4]="ItemId",e[e.Store=5]="Store",e[e.FlowType=6]="FlowType",e[e.Amount=7]="Amount",e[e.Progression01=8]="Progression01",e[e.Progression02=9]="Progression02",e[e.Progression03=10]="Progression03",e[e.EventId=11]="EventId",e[e.ProgressionStatus=12]="ProgressionStatus",e[e.Severity=13]="Severity",e[e.Message=14]="Message",e[e.AdAction=15]="AdAction",e[e.AdType=16]="AdType",e[e.AdSdkName=17]="AdSdkName",e[e.AdPlacement=18]="AdPlacement"}(e.EGASdkErrorParameter||(e.EGASdkErrorParameter={}))}(e.events||(e.events={}))}(r||(r={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={}))}(i||(i={})),function(e){(function(e){var t;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(t||(t={}));var n=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(n){if(e.instance.infoLogEnabled){var o="Info/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Info)}},e.w=function(n){var o="Warning/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Warning)},e.e=function(n){var o="Error/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Error)},e.ii=function(n){if(e.instance.infoLogVerboseEnabled){var o="Verbose/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Info)}},e.d=function(n){if(e.debugEnabled){var o="Debug/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Debug)}},e.prototype.sendNotificationMessage=function(e,n){switch(n){case t.Error:console.error(e);break;case t.Warning:console.warn(e);break;case t.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case t.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=n})(e.logging||(e.logging={}))}(r||(r={})),function(e){(function(t){var n=e.logging.GALogger,o=function(){function e(){}return e.getHmac=function(e,t){var n=a.HmacSHA256(t,e);return a.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var n="",o=0,i=e.length;o<i;o++)o>0&&(n+=t),n+=e[o];return n},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var n in e)if(e[n]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var n,o,i,r,a,s="",c=0,l=0,u=0;do{i=(n=t.charCodeAt(u++))>>2,r=(3&n)<<4|(o=t.charCodeAt(u++))>>4,a=(15&o)<<2|(c=t.charCodeAt(u++))>>6,l=63&c,isNaN(o)?a=l=64:isNaN(c)&&(l=64),s=s+e.keyStr.charAt(i)+e.keyStr.charAt(r)+e.keyStr.charAt(a)+e.keyStr.charAt(l),n=o=c=0,i=r=a=l=0}while(u<t.length);return s},e.decode64=function(t){var o,i,r,a,s="",c=0,l=0,u=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=e.keyStr.indexOf(t.charAt(u++))<<2|(r=e.keyStr.indexOf(t.charAt(u++)))>>4,i=(15&r)<<4|(a=e.keyStr.indexOf(t.charAt(u++)))>>2,c=(3&a)<<6|(l=e.keyStr.indexOf(t.charAt(u++))),s+=String.fromCharCode(o),64!=a&&(s+=String.fromCharCode(i)),64!=l&&(s+=String.fromCharCode(c)),o=i=c=0,r=a=l=0}while(u<t.length);return decodeURI(s)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)})},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=o})(e.utilities||(e.utilities={}))}(r||(r={})),function(e){(function(t){var n=e.logging.GALogger,o=e.utilities.GAUtilities,i=e.events.EGASdkErrorCategory,r=e.events.EGASdkErrorArea,a=e.events.EGASdkErrorAction,s=e.events.EGASdkErrorParameter,c=function(e,t,n,o,i){this.category=e,this.area=t,this.action=n,this.parameter=o,this.reason=i};t.ValidationResult=c;var l=function(){function t(){}return t.validateBusinessEvent=function(e,o,l,u,d){return t.validateCurrency(e)?o<0?(n.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+o),new c(i.EventValidation,r.BusinessEvent,a.InvalidAmount,s.Amount,o+"")):t.validateShortString(l,!0)?t.validateEventPartLength(u,!1)?t.validateEventPartCharacters(u)?t.validateEventPartLength(d,!1)?t.validateEventPartCharacters(d)?null:(n.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartCharacters,s.ItemId,d)):(n.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+d),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartLength,s.ItemId,d)):(n.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartCharacters,s.ItemType,u)):(n.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+u),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartLength,s.ItemType,u)):(n.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+l),new c(i.EventValidation,r.BusinessEvent,a.InvalidShortString,s.CartType,l)):(n.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),new c(i.EventValidation,r.BusinessEvent,a.InvalidCurrency,s.Currency,e))},t.validateResourceEvent=function(l,u,d,p,f,v,h){return l==e.EGAResourceFlowType.Undefined?(n.w("Validation fail - resource event - flowType: Invalid flow type."),new c(i.EventValidation,r.ResourceEvent,a.InvalidFlowType,s.FlowType,"")):u?o.stringArrayContainsString(v,u)?d>0?p?t.validateEventPartLength(p,!1)?t.validateEventPartCharacters(p)?o.stringArrayContainsString(h,p)?t.validateEventPartLength(f,!1)?t.validateEventPartCharacters(f)?null:(n.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+f),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartCharacters,s.ItemId,f)):(n.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+f),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartLength,s.ItemId,f)):(n.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.NotFoundInAvailableItemTypes,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartCharacters,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartLength,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot be (null)"),new c(i.EventValidation,r.ResourceEvent,a.StringEmptyOrNull,s.ItemType,"")):(n.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+d),new c(i.EventValidation,r.ResourceEvent,a.InvalidAmount,s.Amount,d+"")):(n.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+u),new c(i.EventValidation,r.ResourceEvent,a.NotFoundInAvailableCurrencies,s.Currency,u)):(n.w("Validation fail - resource event - currency: Cannot be (null)"),new c(i.EventValidation,r.ResourceEvent,a.StringEmptyOrNull,s.Currency,""))},t.validateProgressionEvent=function(o,l,u,d){if(o==e.EGAProgressionStatus.Undefined)return n.w("Validation fail - progression event: Invalid progression status."),new c(i.EventValidation,r.ProgressionEvent,a.InvalidProgressionStatus,s.ProgressionStatus,"");if(d&&!u&&l)return n.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(u&&!l)return n.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(!l)return n.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,(l||"")+":"+(u||"")+":"+(d||""));if(!t.validateEventPartLength(l,!1))return n.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+l),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression01,l);if(!t.validateEventPartCharacters(l))return n.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression01,l);if(u){if(!t.validateEventPartLength(u,!0))return n.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+u),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression02,u);if(!t.validateEventPartCharacters(u))return n.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression02,u)}if(d){if(!t.validateEventPartLength(d,!0))return n.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+d),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression03,d);if(!t.validateEventPartCharacters(d))return n.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression03,d)}return null},t.validateDesignEvent=function(e){return t.validateEventIdLength(e)?t.validateEventIdCharacters(e)?null:(n.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),new c(i.EventValidation,r.DesignEvent,a.InvalidEventIdCharacters,s.EventId,e)):(n.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 64 characters or less. String: "+e),new c(i.EventValidation,r.DesignEvent,a.InvalidEventIdLength,s.EventId,e))},t.validateErrorEvent=function(o,l){return o==e.EGAErrorSeverity.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(i.EventValidation,r.ErrorEvent,a.InvalidSeverity,s.Severity,"")):t.validateLongString(l,!0)?null:(n.w("Validation fail - error event - message: Message cannot be above 8192 characters."),new c(i.EventValidation,r.ErrorEvent,a.InvalidLongString,s.Message,l))},t.validateAdEvent=function(o,l,u,d){return o==e.EGAAdAction.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(i.EventValidation,r.AdEvent,a.InvalidAdAction,s.AdAction,"")):l==e.EGAAdType.Undefined?(n.w("Validation fail - ad event - adType: Ad type was unsupported value."),new c(i.EventValidation,r.AdEvent,a.InvalidAdType,s.AdType,"")):t.validateShortString(u,!1)?t.validateString(d,!1)?null:(n.w("Validation fail - ad event - message: Ad placement cannot be above 64 characters."),new c(i.EventValidation,r.AdEvent,a.InvalidString,s.AdPlacement,d)):(n.w("Validation fail - ad event - message: Ad SDK name cannot be above 32 characters."),new c(i.EventValidation,r.AdEvent,a.InvalidShortString,s.AdSdkName,u))},t.validateSdkErrorEvent=function(e,o,s,c,l){return!(!t.validateKeys(e,o)||(s===i.Undefined?(n.w("Validation fail - sdk error event - type: Category was unsupported value."),1):c===r.Undefined?(n.w("Validation fail - sdk error event - type: Area was unsupported value."),1):l===a.Undefined&&(n.w("Validation fail - sdk error event - type: Action was unsupported value."),1)))},t.validateKeys=function(e,t){return!(!o.stringMatch(e,/^[A-z0-9]{32}$/)||!o.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!o.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!o.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!o.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!o.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e,t){if(null==e)return n.w("validateInitRequestResponse failed - no response dictionary."),null;var o={};try{var i=e.server_ts;if(!(i>0))return n.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;o.server_ts=i}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+l),null}if(t){try{var r=e.configs;o.configs=r}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs' field. type="+typeof e.configs+", value="+e.configs+", "+l),null}try{var a=e.configs_hash;o.configs_hash=a}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs_hash' field. type="+typeof e.configs_hash+", value="+e.configs_hash+", "+l),null}try{var s=e.ab_id;o.ab_id=s}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_id' field. type="+typeof e.ab_id+", value="+e.ab_id+", "+l),null}try{var c=e.ab_variant_id;o.ab_variant_id=c}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_variant_id' field. type="+typeof e.ab_variant_id+", value="+e.ab_variant_id+", "+l),null}}return o},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!o.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot|flutter) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!o.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return o.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!o.stringMatch(e[i],/^[A-Za-z]+$/))return n.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var o=0;o<e.length;++o)if(!t.validateEventPartCharacters(e[o]))return n.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[o]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,o,i,r){var a=i;if(a||(a="Array"),!r)return n.w(a+" validation failed: array cannot be null. "),!1;if(0==o&&0==r.length)return n.w(a+" validation failed: array cannot be empty. "),!1;if(e>0&&r.length>e)return n.w(a+" validation failed: array cannot exceed "+e+" values. It has "+r.length+" values."),!1;for(var s=0;s<r.length;++s){var c=r[s]?r[s].length:0;if(0===c)return n.w(a+" validation failed: contained an empty string. Array="+JSON.stringify(r)),!1;if(t>0&&c>t)return n.w(a+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+r[s]),!1}return!0},t.validateClientTs=function(e){return!(e<0||e>99999999999)},t}();t.GAValidator=l})(e.validators||(e.validators={}))}(r||(r={})),function(e){(function(e){var t=function(e,t,n){this.name=e,this.value=t,this.version=n};e.NameValueVersion=t;var n=function(e,t){this.name=e,this.version=t};e.NameVersion=n;var o=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var t,n=navigator.userAgent,o=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==o.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(o[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"");if("Chrome"===o[1]&&null!=(t=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return t.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(o[1]&&"fbav"===o[1].toLowerCase()&&(o[1]="facebook",o[2]))return"facebook "+o[2];var i=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(t=n.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var o,i,r,a,s=new n("unknown","0.0.0"),c=0,l=0;for(c=0;c<t.length;c+=1)if(new RegExp(t[c].value,"i").test(e)){if(o=new RegExp(t[c].version+"[- /:;]([\\d._]+)","i"),a="",(i=e.match(o))&&i[1]&&(r=i[1]),r){var u=r.split(/[._]+/);for(l=0;l<Math.min(u.length,3);l+=1)a+=u[l]+(l<Math.min(u.length,3)-1?".":"")}else a="0.0.0";return s.name=t[c].name,s.version=a,s}return s},e.sdkWrapperVersion="javascript 4.4.5",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv"),new t("kai_os","KAIOS","KAIOS")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e}();e.GADevice=o})(e.device||(e.device={}))}(r||(r={})),function(e){(function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=t})(e.threading||(e.threading={}))}(r||(r={})),function(e){(function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,n){return t.comparer.compare(e,n)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t})(e.threading||(e.threading={}))}(r||(r={})),function(e){(function(t){var n,o,i=e.logging.GALogger;(function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"})(n=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(o=t.EGAStore||(t.EGAStore={}));var r=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(t){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,o,i,r){void 0===o&&(o=[]),void 0===i&&(i=!1),void 0===r&&(r=0);var a=e.getStore(t);if(!a)return null;for(var s=[],c=0;c<a.length;++c){for(var l=a[c],u=!0,d=0;d<o.length;++d){var p=o[d];if(l[p[0]])switch(p[1]){case n.Equal:u=l[p[0]]==p[2];break;case n.LessOrEqual:u=l[p[0]]<=p[2];break;case n.NotEqual:u=l[p[0]]!=p[2];break;default:u=!1}else u=!1;if(!u)break}u&&s.push(l)}return i&&s.sort(function(e,t){return e.client_ts-t.client_ts}),r>0&&s.length>r&&(s=s.slice(0,r+1)),s},e.update=function(t,o,i){void 0===i&&(i=[]);var r=e.getStore(t);if(!r)return!1;for(var a=0;a<r.length;++a){for(var s=r[a],c=!0,l=0;l<i.length;++l){var u=i[l];if(s[u[0]])switch(u[1]){case n.Equal:c=s[u[0]]==u[2];break;case n.LessOrEqual:c=s[u[0]]<=u[2];break;case n.NotEqual:c=s[u[0]]!=u[2];break;default:c=!1}else c=!1;if(!c)break}if(c)for(l=0;l<o.length;++l){var d=o[l];s[d[0]]=d[1]}}return!0},e.delete=function(t,o){var i=e.getStore(t);if(i)for(var r=0;r<i.length;++r){for(var a=i[r],s=!0,c=0;c<o.length;++c){var l=o[c];if(a[l[0]])switch(l[1]){case n.Equal:s=a[l[0]]==l[2];break;case n.LessOrEqual:s=a[l[0]]<=l[2];break;case n.NotEqual:s=a[l[0]]!=l[2];break;default:s=!1}else s=!1;if(!s)break}s&&(i.splice(r,1),--r)}},e.insert=function(t,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=null);var r=e.getStore(t);if(r)if(o){if(!i)return;for(var a=!1,s=0;s<r.length;++s){var c=r[s];if(c[i]==n[i]){for(var l in n)c[l]=n[l];a=!0;break}}a||r.push(n)}else r.push(n)},e.save=function(t){e.isStorageAvailable()?(localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey),JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey),JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey),JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey),JSON.stringify(e.instance.storeItems))):i.w("Storage is not available, cannot save.")},e.load=function(t){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey))),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){i.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey))),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){i.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey))),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){i.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey))),e.instance.storeItems||(e.instance.storeItems={})}catch(n){i.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else i.w("Storage is not available, cannot load.")},e.setItem=function(t,n,o){var i=e.StringFormat(e.KeyFormat,t,n);o?e.instance.storeItems[i]=o:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(t,n){var o=e.StringFormat(e.KeyFormat,t,n);return o in e.instance.storeItems?e.instance.storeItems[o]:null},e.getStore=function(t){switch(t){case o.Events:return e.instance.eventsStore;case o.Sessions:return e.instance.sessionsStore;case o.Progression:return e.instance.progressionStore;default:return i.w("GAStore.getStore(): Cannot find store: "+t),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.StringFormat=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,function(e,n){return t[n]||""})},e.KeyFormat="GA::{0}::{1}",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();t.GAStore=r})(e.store||(e.store={}))}(r||(r={})),function(e){(function(t){var n=e.validators.GAValidator,o=e.utilities.GAUtilities,i=e.logging.GALogger,r=e.store.GAStore,a=e.device.GADevice,s=e.store.EGAStore,c=e.store.EGAStoreArgsOperator,l=function(){function e(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.currentGlobalCustomEventFields={},this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.remoteConfigsListeners=[],this.beforeUnloadListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0,this.isUnloading=!1}return e.setUserId=function(t){e.instance.userId=t,e.cacheIdentifier()},e.getIdentifier=function(){return e.instance.identifier},e.isInitialized=function(){return e.instance.initialized},e.setInitialized=function(t){e.instance.initialized=t},e.getSessionStart=function(){return e.instance.sessionStart},e.getSessionNum=function(){return e.instance.sessionNum},e.getTransactionNum=function(){return e.instance.transactionNum},e.getSessionId=function(){return e.instance.sessionId},e.getCurrentCustomDimension01=function(){return e.instance.currentCustomDimension01},e.getCurrentCustomDimension02=function(){return e.instance.currentCustomDimension02},e.getCurrentCustomDimension03=function(){return e.instance.currentCustomDimension03},e.getGameKey=function(){return e.instance.gameKey},e.getGameSecret=function(){return e.instance.gameSecret},e.getAvailableCustomDimensions01=function(){return e.instance.availableCustomDimensions01},e.setAvailableCustomDimensions01=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions01=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom01 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions02=function(){return e.instance.availableCustomDimensions02},e.setAvailableCustomDimensions02=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions02=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom02 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions03=function(){return e.instance.availableCustomDimensions03},e.setAvailableCustomDimensions03=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions03=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom03 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableResourceCurrencies=function(){return e.instance.availableResourceCurrencies},e.setAvailableResourceCurrencies=function(t){n.validateResourceCurrencies(t)&&(e.instance.availableResourceCurrencies=t,i.i("Set available resource currencies: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableResourceItemTypes=function(){return e.instance.availableResourceItemTypes},e.setAvailableResourceItemTypes=function(t){n.validateResourceItemTypes(t)&&(e.instance.availableResourceItemTypes=t,i.i("Set available resource item types: ("+o.joinStringArray(t,", ")+")"))},e.getBuild=function(){return e.instance.build},e.setBuild=function(t){e.instance.build=t,i.i("Set build version: "+t)},e.getUseManualSessionHandling=function(){return e.instance.useManualSessionHandling},e.isEventSubmissionEnabled=function(){return e.instance._isEventSubmissionEnabled},e.getABTestingId=function(){return e.instance.abId},e.getABTestingVariantId=function(){return e.instance.abVariantId},e.prototype.setDefaultId=function(t){this.defaultUserId=t||"",e.cacheIdentifier()},e.getDefaultId=function(){return e.instance.defaultUserId},e.getSdkConfig=function(){var t,n=0;for(var o in e.instance.sdkConfig)0===n&&(t=o),++n;if(t&&n>0)return e.instance.sdkConfig;for(var o in n=0,e.instance.sdkConfigCached)0===n&&(t=o),++n;return t&&n>0?e.instance.sdkConfigCached:e.instance.sdkConfigDefault},e.isEnabled=function(){return!!e.instance.initAuthorized},e.setCustomDimension01=function(t){e.instance.currentCustomDimension01=t,r.setItem(e.getGameKey(),e.Dimension01Key,t),i.i("Set custom01 dimension value: "+t)},e.setCustomDimension02=function(t){e.instance.currentCustomDimension02=t,r.setItem(e.getGameKey(),e.Dimension02Key,t),i.i("Set custom02 dimension value: "+t)},e.setCustomDimension03=function(t){e.instance.currentCustomDimension03=t,r.setItem(e.getGameKey(),e.Dimension03Key,t),i.i("Set custom03 dimension value: "+t)},e.incrementSessionNum=function(){var t=e.getSessionNum()+1;e.instance.sessionNum=t},e.incrementTransactionNum=function(){var t=e.getTransactionNum()+1;e.instance.transactionNum=t},e.incrementProgressionTries=function(t){var n=e.getProgressionTries(t)+1;e.instance.progressionTries[t]=n;var o={};o.progression=t,o.tries=n,r.insert(s.Progression,o,!0,"progression")},e.getProgressionTries=function(t){return t in e.instance.progressionTries?e.instance.progressionTries[t]:0},e.clearProgressionTries=function(t){t in e.instance.progressionTries&&delete e.instance.progressionTries[t];var n=[];n.push(["progression",c.Equal,t]),r.delete(s.Progression,n)},e.setKeys=function(t,n){e.instance.gameKey=t,e.instance.gameSecret=n},e.setManualSessionHandling=function(t){e.instance.useManualSessionHandling=t,i.i("Use manual session handling: "+t)},e.setEnabledEventSubmission=function(t){e.instance._isEventSubmissionEnabled=t},e.getEventAnnotations=function(){var t={v:2};t.event_uuid=o.createGuid(),t.user_id=e.instance.identifier,t.client_ts=e.getClientTsAdjusted(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.browser_version=a.browserVersion,t.platform=a.buildPlatform,t.session_id=e.instance.sessionId,t[e.SessionNumKey]=e.instance.sessionNum;var i=a.getConnectionType();if(n.validateConnectionType(i)&&(t.connection_type=i),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),e.instance.configurations){var r=0;for(var s in e.instance.configurations){r++;break}r>0&&(t.configurations=e.instance.configurations)}return e.instance.abId&&(t.ab_id=e.instance.abId),e.instance.abVariantId&&(t.ab_variant_id=e.instance.abVariantId),e.instance.build&&(t.build=e.instance.build),t},e.getSdkErrorEventAnnotations=function(){var t={v:2};t.event_uuid=o.createGuid(),t.category=e.CategorySdkError,t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.platform=a.buildPlatform;var i=a.getConnectionType();return n.validateConnectionType(i)&&(t.connection_type=i),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),t},e.getInitAnnotations=function(){var t={};return e.getIdentifier()||e.cacheIdentifier(),r.setItem(e.getGameKey(),e.LastUsedIdentifierKey,e.getIdentifier()),t.user_id=e.getIdentifier(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.platform=a.buildPlatform,e.getBuild()?t.build=e.getBuild():t.build=null,t.session_num=e.getSessionNum(),t.random_salt=e.getSessionNum(),t},e.getClientTsAdjusted=function(){var t=o.timeIntervalSince1970(),i=t+e.instance.clientServerTimeOffset;return n.validateClientTs(i)?i:t},e.sessionIsStarted=function(){return 0!=e.instance.sessionStart},e.cacheIdentifier=function(){e.instance.userId?e.instance.identifier=e.instance.userId:e.instance.defaultUserId&&(e.instance.identifier=e.instance.defaultUserId)},e.ensurePersistedStates=function(){r.isStorageAvailable()&&r.load(e.getGameKey());var t=e.instance;t.setDefaultId(null!=r.getItem(e.getGameKey(),e.DefaultUserIdKey)?r.getItem(e.getGameKey(),e.DefaultUserIdKey):o.createGuid()),t.sessionNum=null!=r.getItem(e.getGameKey(),e.SessionNumKey)?Number(r.getItem(e.getGameKey(),e.SessionNumKey)):0,t.transactionNum=null!=r.getItem(e.getGameKey(),e.TransactionNumKey)?Number(r.getItem(e.getGameKey(),e.TransactionNumKey)):0,t.currentCustomDimension01?r.setItem(e.getGameKey(),e.Dimension01Key,t.currentCustomDimension01):(t.currentCustomDimension01=null!=r.getItem(e.getGameKey(),e.Dimension01Key)?r.getItem(e.getGameKey(),e.Dimension01Key):"",t.currentCustomDimension01),t.currentCustomDimension02?r.setItem(e.getGameKey(),e.Dimension02Key,t.currentCustomDimension02):(t.currentCustomDimension02=null!=r.getItem(e.getGameKey(),e.Dimension02Key)?r.getItem(e.getGameKey(),e.Dimension02Key):"",t.currentCustomDimension02),t.currentCustomDimension03?r.setItem(e.getGameKey(),e.Dimension03Key,t.currentCustomDimension03):(t.currentCustomDimension03=null!=r.getItem(e.getGameKey(),e.Dimension03Key)?r.getItem(e.getGameKey(),e.Dimension03Key):"",t.currentCustomDimension03);var n=null!=r.getItem(e.getGameKey(),e.SdkConfigCachedKey)?r.getItem(e.getGameKey(),e.SdkConfigCachedKey):"";if(n){var a=JSON.parse(o.decode64(n));if(a){var c=r.getItem(e.getGameKey(),e.LastUsedIdentifierKey);null!=c&&c!=e.getIdentifier()&&(i.w("New identifier spotted compared to last one used, clearing cached configs hash!!"),a.configs_hash&&delete a.configs_hash),t.sdkConfigCached=a}}var l=e.getSdkConfig();t.configsHash=l.configs_hash?l.configs_hash:"",t.abId=l.ab_id?l.ab_id:"",t.abVariantId=l.ab_variant_id?l.ab_variant_id:"";var u=r.select(s.Progression);if(u)for(var d=0;d<u.length;++d){var p=u[d];p&&(t.progressionTries[p.progression]=p.tries)}},e.calculateServerTimeOffset=function(e){return e-o.timeIntervalSince1970()},e.formatString=function(e,t){for(var n=e,o=0;o<t.length;o++){var i=new RegExp("\\{"+o+"\\}","gi");n=n.replace(i,arguments[o])}return n},e.validateAndCleanCustomFields=function(t,n){void 0===n&&(n=null);var r={};if(t){var a=0;for(var s in t){var c=t[s];if(s&&c)if(a<e.MAX_CUSTOM_FIELDS_COUNT){var l=new RegExp("^[a-zA-Z0-9_]{1,"+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(o.stringMatch(s,l)){var u=typeof c;if("string"===u||c instanceof String){var d=c;d.length<=e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&d.length>0?(r[s]=d,++a):(f="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is an empty string or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")",v=e.formatString(f,[s,c]),i.w(v),n&&n(f,v))}else if("number"===u||c instanceof Number){var p=c;r[s]=p,++a}else f="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is not a string or number",v=e.formatString(f,[s,c]),i.w(v),n&&n(f,v)}else f="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+")",v=e.formatString(f,[s,c]),i.w(v),n&&n(f,v)}else f="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because it exceeds the max number of custom fields ("+e.MAX_CUSTOM_FIELDS_COUNT+")",v=e.formatString(f,[s,c]),i.w(v),n&&n(f,v);else{var f="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key or value is null",v=e.formatString(f,[s,c]);i.w(v),n&&n(f,v)}}}return r},e.validateAndFixCurrentDimensions=function(){n.validateDimension01(e.getCurrentCustomDimension01(),e.getAvailableCustomDimensions01())||e.setCustomDimension01(""),n.validateDimension02(e.getCurrentCustomDimension02(),e.getAvailableCustomDimensions02())||e.setCustomDimension02(""),n.validateDimension03(e.getCurrentCustomDimension03(),e.getAvailableCustomDimensions03())||e.setCustomDimension03("")},e.getConfigurationStringValue=function(t,n){return e.instance.configurations[t]?e.instance.configurations[t].toString():n},e.isRemoteConfigsReady=function(){return e.instance.remoteConfigsIsReady},e.addRemoteConfigsListener=function(t){e.instance.remoteConfigsListeners.indexOf(t)<0&&e.instance.remoteConfigsListeners.push(t)},e.removeRemoteConfigsListener=function(t){var n=e.instance.remoteConfigsListeners.indexOf(t);n>-1&&e.instance.remoteConfigsListeners.splice(n,1)},e.getRemoteConfigsContentAsString=function(){return JSON.stringify(e.instance.configurations)},e.populateConfigurations=function(t){var n=t.configs;if(n){e.instance.configurations={};for(var o=0;o<n.length;++o){var i=n[o];if(i){var r=i.key,a=i.value,s=i.start_ts?i.start_ts:Number.MIN_VALUE,c=i.end_ts?i.end_ts:Number.MAX_VALUE,l=e.getClientTsAdjusted();r&&a&&l>s&&l<c&&(e.instance.configurations[r]=a)}}}e.instance.remoteConfigsIsReady=!0;var u=e.instance.remoteConfigsListeners;for(o=0;o<u.length;++o)u[o]&&u[o].onRemoteConfigsUpdated()},e.addOnBeforeUnloadListener=function(t){e.instance.beforeUnloadListeners.indexOf(t)<0&&e.instance.beforeUnloadListeners.push(t)},e.removeOnBeforeUnloadListener=function(t){var n=e.instance.beforeUnloadListeners.indexOf(t);n>-1&&e.instance.beforeUnloadListeners.splice(n,1)},e.notifyBeforeUnloadListeners=function(){for(var t=e.instance.beforeUnloadListeners,n=0;n<t.length;++n)t[n]&&t[n].onBeforeUnload()},e.CategorySdkError="sdk_error",e.MAX_CUSTOM_FIELDS_COUNT=50,e.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,e.instance=new e,e.DefaultUserIdKey="default_user_id",e.SessionNumKey="session_num",e.TransactionNumKey="transaction_num",e.Dimension01Key="dimension01",e.Dimension02Key="dimension02",e.Dimension03Key="dimension03",e.SdkConfigCachedKey="sdk_config_cached",e.LastUsedIdentifierKey="last_used_identifier",e}();t.GAState=l})(e.state||(e.state={}))}(r||(r={})),function(e){(function(t){var n=e.utilities.GAUtilities,o=e.logging.GALogger,i=function(){function e(){}return e.execute=function(t,i,r,a){var s=new Date;if(e.timestampMap[i]||(e.timestampMap[i]=s),e.countMap[i]||(e.countMap[i]=0),(s.getTime()-e.timestampMap[i].getTime())/1e3>=3600&&(e.timestampMap[i]=s,e.countMap[i]=0),!(e.countMap[i]>=e.MaxCount)){var c=n.getHmac(a,r),l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(!l.responseText)return;if(200!=l.status)return void o.w("sdk error failed. response code not 200. status code: "+l.status+", description: "+l.statusText+", body: "+l.responseText);e.countMap[i]=e.countMap[i]+1}},l.open("POST",t,!0),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Authorization",c);try{l.send(r)}catch(u){console.error(u)}}},e.MaxCount=10,e.countMap={},e.timestampMap={},e}();t.SdkErrorTask=i})(e.tasks||(e.tasks={}))}(r||(r={})),function(e){(function(t){var n=e.state.GAState,o=e.logging.GALogger,i=e.utilities.GAUtilities,r=e.validators.GAValidator,a=e.tasks.SdkErrorTask,s=e.events.EGASdkErrorCategory,c=e.events.EGASdkErrorArea,l=e.events.EGASdkErrorAction,u=e.events.EGASdkErrorParameter,d=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.remoteConfigsVersion="v1",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.remoteConfigsBaseUrl=this.protocol+"://"+this.hostName+"/remote_configs/"+this.remoteConfigsVersion,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(o,i){var r=n.getGameKey(),a=this.remoteConfigsBaseUrl+"/"+this.initializeUrlPath+"?game_key="+r+"&interval_seconds=0&configs_hash="+o,s=n.getInitAnnotations(),c=JSON.stringify(s);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),e.sendRequest(a,l,u,this.useGzip,e.initRequestCallback,i)}else i(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(o,i,r){if(0!=o.length){var a=n.getGameKey(),s=this.baseUrl+"/"+a+"/"+this.eventsUrlPath,c=JSON.stringify(o);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),u.push(i),u.push(o.length.toString()),e.sendRequest(s,l,u,this.useGzip,e.sendEventInArrayRequestCallback,r)}else r(t.EGAHTTPApiResponse.JsonEncodeFailed,null,i,o.length)}},e.prototype.sendSdkErrorEvent=function(t,i,s,c,l,u,d){if(n.isEventSubmissionEnabled()&&r.validateSdkErrorEvent(u,d,t,i,s)){var p,f=this.baseUrl+"/"+u+"/"+this.eventsUrlPath,v="",h=n.getSdkErrorEventAnnotations(),g=e.sdkErrorCategoryString(t);h.error_category=g,v+=g;var y=e.sdkErrorAreaString(i);h.error_area=y,v+=":"+y;var m=e.sdkErrorActionString(s);h.error_action=m;var _=e.sdkErrorParameterString(c);if(_.length>0&&(h.error_parameter=_),l.length>0){var E=l;l.length>e.MAX_ERROR_MESSAGE_LENGTH&&(E=l.substring(0,e.MAX_ERROR_MESSAGE_LENGTH)),h.reason=E}var C=[];C.push(h),(p=JSON.stringify(C))?a.execute(f,v,p,d):o.w("sendSdkErrorEvent: JSON encoding failed.")}},e.sendEventInArrayRequestCallback=function(o,i,r,a){void 0===a&&(a=null),a[0],a[1];var d,p,f=a[2],v=parseInt(a[3]);d=o.responseText,p=o.status;var h=e.instance.processRequestResponse(p,o.statusText,d,"Events");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.Created||h==t.EGAHTTPApiResponse.BadRequest){var g=d?JSON.parse(d):{};if(null==g)return r(t.EGAHTTPApiResponse.JsonDecodeFailed,null,f,v),void e.instance.sendSdkErrorEvent(s.Http,c.EventsHttp,l.FailHttpJsonDecode,u.Undefined,d,n.getGameKey(),n.getGameSecret());t.EGAHTTPApiResponse.BadRequest,r(h,g,f,v)}else r(h,null,f,v)},e.sendRequest=function(e,t,o,r,a,s){var c=new XMLHttpRequest,l=n.getGameSecret(),u=i.getHmac(l,t),d=[];for(var p in d.push(u),o)d.push(o[p]);if(c.onreadystatechange=function(){4===c.readyState&&a(c,e,s,d)},c.open("POST",e,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",u),r)throw new Error("gzip not supported");try{c.send(t)}catch(f){console.error(f.stack)}},e.initRequestCallback=function(o,i,a,d){var p,f;void 0===d&&(d=null),d[0],d[1],p=o.responseText,f=o.status;var v=p?JSON.parse(p):{},h=e.instance.processRequestResponse(f,o.statusText,p,"Init");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.Created||h==t.EGAHTTPApiResponse.BadRequest){if(null==v)return a(t.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0),void e.instance.sendSdkErrorEvent(s.Http,c.InitHttp,l.FailHttpJsonDecode,u.Undefined,p,n.getGameKey(),n.getGameSecret());if(h!==t.EGAHTTPApiResponse.BadRequest){var g=r.validateAndCleanInitRequestResponse(v,h===t.EGAHTTPApiResponse.Created);g?a(h,g,"",0):a(t.EGAHTTPApiResponse.BadResponse,null,"",0)}else a(h,null,"",0)}else a(h,null,"",0)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,n,o){return o?200===e?t.EGAHTTPApiResponse.Ok:201===e?t.EGAHTTPApiResponse.Created:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorCategoryString=function(e){switch(e){case s.EventValidation:return"event_validation";case s.Database:return"db";case s.Init:return"init";case s.Http:return"http";case s.Json:return"json"}return""},e.sdkErrorAreaString=function(e){switch(e){case c.BusinessEvent:return"business";case c.ResourceEvent:return"resource";case c.ProgressionEvent:return"progression";case c.DesignEvent:return"design";case c.ErrorEvent:return"error";case c.InitHttp:return"init_http";case c.EventsHttp:return"events_http";case c.ProcessEvents:return"process_events";case c.AddEventsToStore:return"add_events_to_store"}return""},e.sdkErrorActionString=function(e){switch(e){case l.InvalidCurrency:return"invalid_currency";case l.InvalidShortString:return"invalid_short_string";case l.InvalidEventPartLength:return"invalid_event_part_length";case l.InvalidEventPartCharacters:return"invalid_event_part_characters";case l.InvalidStore:return"invalid_store";case l.InvalidFlowType:return"invalid_flow_type";case l.StringEmptyOrNull:return"string_empty_or_null";case l.NotFoundInAvailableCurrencies:return"not_found_in_available_currencies";case l.InvalidAmount:return"invalid_amount";case l.NotFoundInAvailableItemTypes:return"not_found_in_available_item_types";case l.WrongProgressionOrder:return"wrong_progression_order";case l.InvalidEventIdLength:return"invalid_event_id_length";case l.InvalidEventIdCharacters:return"invalid_event_id_characters";case l.InvalidProgressionStatus:return"invalid_progression_status";case l.InvalidSeverity:return"invalid_severity";case l.InvalidLongString:return"invalid_long_string";case l.DatabaseTooLarge:return"db_too_large";case l.DatabaseOpenOrCreate:return"db_open_or_create";case l.JsonError:return"json_error";case l.FailHttpJsonDecode:return"fail_http_json_decode";case l.FailHttpJsonEncode:return"fail_http_json_encode"}return""},e.sdkErrorParameterString=function(e){switch(e){case u.Currency:return"currency";case u.CartType:return"cart_type";case u.ItemType:return"item_type";case u.ItemId:return"item_id";case u.Store:return"store";case u.FlowType:return"flow_type";case u.Amount:return"amount";case u.Progression01:return"progression01";case u.Progression02:return"progression02";case u.Progression03:return"progression03";case u.EventId:return"event_id";case u.ProgressionStatus:return"progression_status";case u.Severity:return"severity";case u.Message:return"message"}return""},e.instance=new e,e.MAX_ERROR_MESSAGE_LENGTH=256,e}();t.GAHTTPApi=d})(e.http||(e.http={}))}(r||(r={})),function(e){var t,n,o,i,r,a,s,c,l,u,d;t=e.events||(e.events={}),n=e.store.GAStore,o=e.store.EGAStore,i=e.store.EGAStoreArgsOperator,r=e.state.GAState,a=e.logging.GALogger,s=e.utilities.GAUtilities,c=e.http.EGAHTTPApiResponse,l=e.http.GAHTTPApi,u=e.validators.GAValidator,d=function(){function d(){}return d.customEventFieldsErrorCallback=function(t,n){if(r.isEventSubmissionEnabled()){var o=new Date;d.timestampMap[t]||(d.timestampMap[t]=o),d.countMap[t]||(d.countMap[t]=0),(o.getTime()-d.timestampMap[t].getTime())/1e3>=3600&&(d.timestampMap[t]=o,d.countMap[t]=0),d.countMap[t]>=d.MAX_ERROR_COUNT||e.threading.GAThreading.performTaskOnGAThread(function(){d.addErrorEvent(e.EGAErrorSeverity.Warning,n,null,!0),d.countMap[t]=d.countMap[t]+1})}},d.addSessionStartEvent=function(){if(r.isEventSubmissionEnabled()){var e={};e.category=d.CategorySessionStart,r.incrementSessionNum(),n.setItem(r.getGameKey(),r.SessionNumKey,r.getSessionNum().toString()),d.addDimensionsToEvent(e);var t=r.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(e,r.validateAndCleanCustomFields(t,d.customEventFieldsErrorCallback)),d.addEventToStore(e),a.i("Add SESSION START event"),d.processEvents(d.CategorySessionStart,!1)}},d.addSessionEndEvent=function(){if(r.isEventSubmissionEnabled()){var e=r.getSessionStart(),t=r.getClientTsAdjusted()-e;t<0&&(a.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var n={};n.category=d.CategorySessionEnd,n.length=t,d.addDimensionsToEvent(n);var o=r.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(n,r.validateAndCleanCustomFields(o,d.customEventFieldsErrorCallback)),d.addEventToStore(n),a.i("Add SESSION END event."),d.processEvents("",!1)}},d.addBusinessEvent=function(e,t,o,i,s,c,p){if(void 0===s&&(s=null),r.isEventSubmissionEnabled()){var f=u.validateBusinessEvent(e,t,s,o,i);if(null==f){var v={};r.incrementTransactionNum(),n.setItem(r.getGameKey(),r.TransactionNumKey,r.getTransactionNum().toString()),v.event_id=o+":"+i,v.category=d.CategoryBusiness,v.currency=e,v.amount=t,v[r.TransactionNumKey]=r.getTransactionNum(),s&&(v.cart_type=s),d.addDimensionsToEvent(v);var h={};if(c&&Object.keys(c).length>0)for(var g in c)h[g]=c[g];else for(var g in r.instance.currentGlobalCustomEventFields)h[g]=r.instance.currentGlobalCustomEventFields[g];if(p&&c&&Object.keys(c).length>0)for(var g in r.instance.currentGlobalCustomEventFields)h[g]||(h[g]=r.instance.currentGlobalCustomEventFields[g]);d.addCustomFieldsToEvent(v,r.validateAndCleanCustomFields(h,d.customEventFieldsErrorCallback)),a.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+o+", itemId:"+i+", cartType:"+s+"}"),d.addEventToStore(v)}else l.instance.sendSdkErrorEvent(f.category,f.area,f.action,f.parameter,f.reason,r.getGameKey(),r.getGameSecret())}},d.addResourceEvent=function(t,n,o,i,s,c,p){if(r.isEventSubmissionEnabled()){var f=u.validateResourceEvent(t,n,o,i,s,r.getAvailableResourceCurrencies(),r.getAvailableResourceItemTypes());if(null==f){t===e.EGAResourceFlowType.Sink&&(o*=-1);var v={},h=d.resourceFlowTypeToString(t);v.event_id=h+":"+n+":"+i+":"+s,v.category=d.CategoryResource,v.amount=o,d.addDimensionsToEvent(v);var g={};if(c&&Object.keys(c).length>0)for(var y in c)g[y]=c[y];else for(var y in r.instance.currentGlobalCustomEventFields)g[y]=r.instance.currentGlobalCustomEventFields[y];if(p&&c&&Object.keys(c).length>0)for(var y in r.instance.currentGlobalCustomEventFields)g[y]||(g[y]=r.instance.currentGlobalCustomEventFields[y]);d.addCustomFieldsToEvent(v,r.validateAndCleanCustomFields(g,d.customEventFieldsErrorCallback)),a.i("Add RESOURCE event: {currency:"+n+", amount:"+o+", itemType:"+i+", itemId:"+s+"}"),d.addEventToStore(v)}else l.instance.sendSdkErrorEvent(f.category,f.area,f.action,f.parameter,f.reason,r.getGameKey(),r.getGameSecret())}},d.addProgressionEvent=function(t,n,o,i,s,c,p,f){if(r.isEventSubmissionEnabled()){var v=d.progressionStatusToString(t),h=u.validateProgressionEvent(t,n,o,i);if(null==h){var g,y={};g=o?i?n+":"+o+":"+i:n+":"+o:n,y.category=d.CategoryProgression,y.event_id=v+":"+g;var m=0;c&&t!=e.EGAProgressionStatus.Start&&(y.score=Math.round(s)),t===e.EGAProgressionStatus.Fail&&r.incrementProgressionTries(g),t===e.EGAProgressionStatus.Complete&&(r.incrementProgressionTries(g),m=r.getProgressionTries(g),y.attempt_num=m,r.clearProgressionTries(g)),d.addDimensionsToEvent(y);var _={};if(p&&Object.keys(p).length>0)for(var E in p)_[E]=p[E];else for(var E in r.instance.currentGlobalCustomEventFields)_[E]=r.instance.currentGlobalCustomEventFields[E];if(f&&p&&Object.keys(p).length>0)for(var E in r.instance.currentGlobalCustomEventFields)_[E]||(_[E]=r.instance.currentGlobalCustomEventFields[E]);d.addCustomFieldsToEvent(y,r.validateAndCleanCustomFields(_,d.customEventFieldsErrorCallback)),a.i("Add PROGRESSION event: {status:"+v+", progression01:"+n+", progression02:"+o+", progression03:"+i+", score:"+s+", attempt:"+m+"}"),d.addEventToStore(y)}else l.instance.sendSdkErrorEvent(h.category,h.area,h.action,h.parameter,h.reason,r.getGameKey(),r.getGameSecret())}},d.addDesignEvent=function(e,t,n,o,i){if(r.isEventSubmissionEnabled()){var s=u.validateDesignEvent(e);if(null==s){var c={};c.category=d.CategoryDesign,c.event_id=e,n&&(c.value=t),d.addDimensionsToEvent(c);var p={};if(o&&Object.keys(o).length>0)for(var f in o)p[f]=o[f];else for(var f in r.instance.currentGlobalCustomEventFields)p[f]=r.instance.currentGlobalCustomEventFields[f];if(i&&o&&Object.keys(o).length>0)for(var f in r.instance.currentGlobalCustomEventFields)p[f]||(p[f]=r.instance.currentGlobalCustomEventFields[f]);d.addCustomFieldsToEvent(c,r.validateAndCleanCustomFields(p,d.customEventFieldsErrorCallback)),a.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),d.addEventToStore(c)}else l.instance.sendSdkErrorEvent(s.category,s.area,s.action,s.parameter,s.reason,r.getGameKey(),r.getGameSecret())}},d.addErrorEvent=function(e,t,n,o,i){if(void 0===i&&(i=!1),r.isEventSubmissionEnabled()){var s=d.errorSeverityToString(e),c=u.validateErrorEvent(e,t);if(null==c){var p={};if(p.category=d.CategoryError,p.severity=s,p.message=t,d.addDimensionsToEvent(p),!i){var f={};if(n&&Object.keys(n).length>0)for(var v in n)f[v]=n[v];else for(var v in r.instance.currentGlobalCustomEventFields)f[v]=r.instance.currentGlobalCustomEventFields[v];if(o&&n&&Object.keys(n).length>0)for(var v in r.instance.currentGlobalCustomEventFields)f[v]||(f[v]=r.instance.currentGlobalCustomEventFields[v]);d.addCustomFieldsToEvent(p,r.validateAndCleanCustomFields(f,d.customEventFieldsErrorCallback))}a.i("Add ERROR event: {severity:"+s+", message:"+t+"}"),d.addEventToStore(p)}else l.instance.sendSdkErrorEvent(c.category,c.area,c.action,c.parameter,c.reason,r.getGameKey(),r.getGameSecret())}},d.addAdEvent=function(t,n,o,i,s,c,p,f,v){if(r.isEventSubmissionEnabled()){var h=d.adActionToString(t),g=d.adTypeToString(n),y=d.adErrorToString(s),m=u.validateAdEvent(t,n,o,i);if(null==m){var _={};_.category=d.CategoryAds,_.ad_sdk_name=o,_.ad_placement=i,_.ad_type=g,_.ad_action=h,t==e.EGAAdAction.FailedShow&&y.length>0&&(_.ad_fail_show_reason=y),!p||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video||(_.ad_duration=c),d.addDimensionsToEvent(_);var E={};if(f&&Object.keys(f).length>0)for(var C in f)E[C]=f[C];else for(var C in r.instance.currentGlobalCustomEventFields)E[C]=r.instance.currentGlobalCustomEventFields[C];if(v&&f&&Object.keys(f).length>0)for(var C in r.instance.currentGlobalCustomEventFields)E[C]||(E[C]=r.instance.currentGlobalCustomEventFields[C]);d.addCustomFieldsToEvent(_,r.validateAndCleanCustomFields(E,d.customEventFieldsErrorCallback)),a.i("Add AD event: {ad_sdk_name:"+o+", ad_placement:"+i+", ad_type:"+g+", ad_action:"+h+(t==e.EGAAdAction.FailedShow&&y.length>0?", ad_fail_show_reason:"+y:"")+(!p||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video?"":", ad_duration:"+c)+"}"),d.addEventToStore(_)}else l.instance.sendSdkErrorEvent(m.category,m.area,m.action,m.parameter,m.reason,r.getGameKey(),r.getGameSecret())}},d.processEvents=function(e,c){if(r.isEventSubmissionEnabled())try{var p=s.createGuid();c&&(d.cleanupEvents(),d.fixMissingSessionEndEvents());var f=[];f.push(["status",i.Equal,"new"]);var v=[];v.push(["status",i.Equal,"new"]),e&&(f.push(["category",i.Equal,e]),v.push(["category",i.Equal,e]));var h=[];h.push(["status",p]);var g=n.select(o.Events,f);if(!g||0==g.length)return a.i("Event queue: No events to send"),void d.updateSessionStore();if(g.length>d.MaxEventCount){if(!(g=n.select(o.Events,f,!0,d.MaxEventCount)))return;var y=g[g.length-1].client_ts;if(f.push(["client_ts",i.LessOrEqual,y]),!(g=n.select(o.Events,f)))return;v.push(["client_ts",i.LessOrEqual,y])}if(a.i("Event queue: Sending "+g.length+" events."),!n.update(o.Events,h,v))return;for(var m=[],_=0;_<g.length;++_){var E=g[_],C=JSON.parse(s.decode64(E.event));if(0!=C.length){var b=C.client_ts;b&&!u.validateClientTs(b)&&delete C.client_ts,m.push(C)}}l.instance.sendEventsInArray(m,p,d.processEventsCallback)}catch(S){a.e("Error during ProcessEvents(): "+S.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Json,t.EGASdkErrorArea.ProcessEvents,t.EGASdkErrorAction.JsonError,t.EGASdkErrorParameter.Undefined,S.stack,r.getGameKey(),r.getGameSecret())}},d.processEventsCallback=function(e,t,r,s){var l=[];if(l.push(["status",i.Equal,r]),e===c.Ok)n.delete(o.Events,l),a.i("Event queue: "+s+" events sent.");else if(e===c.NoResponse){var u=[];u.push(["status","new"]),a.w("Event queue: Failed to send events to collector - Retrying next time"),n.update(o.Events,u,l)}else{if(t){var d,p=0;for(var f in t)0==p&&(d=t[f]),++p;e===c.BadRequest&&d.constructor===Array?a.w("Event queue: "+s+" events sent. "+p+" events failed GA server validation."):a.w("Event queue: Failed to send events.")}else a.w("Event queue: Failed to send events.");n.delete(o.Events,l)}},d.cleanupEvents=function(){n.update(o.Events,[["status","new"]])},d.fixMissingSessionEndEvents=function(){if(r.isEventSubmissionEnabled()){var e=[];e.push(["session_id",i.NotEqual,r.getSessionId()]);var t=n.select(o.Sessions,e);if(t&&0!=t.length){a.i(t.length+" session(s) located with missing session_end event.");for(var c=0;c<t.length;++c){var l=JSON.parse(s.decode64(t[c].event)),u=l.client_ts-t[c].timestamp;u=Math.max(0,u),l.category=d.CategorySessionEnd,l.length=u,d.addEventToStore(l)}}}},d.addEventToStore=function(e){if(r.isEventSubmissionEnabled())if(r.isInitialized())try{if(n.isStoreTooLargeForEvents()&&!s.stringMatch(e.category,/^(user|session_end|business)$/))return a.w("Database too large. Event has been blocked."),void l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,"",r.getGameKey(),r.getGameSecret());var c=r.getEventAnnotations();for(var u in e)c[u]=e[u];var p=JSON.stringify(c);a.ii("Event added to queue: "+p);var f={status:"new"};f.category=c.category,f.session_id=c.session_id,f.client_ts=c.client_ts,f.event=s.encode64(JSON.stringify(c)),n.insert(o.Events,f),e.category==d.CategorySessionEnd?n.delete(o.Sessions,[["session_id",i.Equal,c.session_id]]):d.updateSessionStore(),n.isStorageAvailable()&&n.save(r.getGameKey())}catch(u){a.e("addEventToStore: error"),a.e(u.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,u.stack,r.getGameKey(),r.getGameSecret())}else a.w("Could not add event: SDK is not initialized")},d.updateSessionStore=function(){if(r.sessionIsStarted()){var e={};e.session_id=r.instance.sessionId,e.timestamp=r.getSessionStart();var t=r.getEventAnnotations();d.addDimensionsToEvent(t);var i=r.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(t,r.validateAndCleanCustomFields(i,d.customEventFieldsErrorCallback)),e.event=s.encode64(JSON.stringify(t)),n.insert(o.Sessions,e,!0,"session_id"),n.isStorageAvailable()&&n.save(r.getGameKey())}},d.addDimensionsToEvent=function(e){e&&(r.getCurrentCustomDimension01()&&(e.custom_01=r.getCurrentCustomDimension01()),r.getCurrentCustomDimension02()&&(e.custom_02=r.getCurrentCustomDimension02()),r.getCurrentCustomDimension03()&&(e.custom_03=r.getCurrentCustomDimension03()))},d.addCustomFieldsToEvent=function(e,t){e&&t&&Object.keys(t).length>0&&(e.custom_fields=t)},d.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},d.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},d.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},d.adActionToString=function(t){return t==e.EGAAdAction.Clicked||t==e.EGAAdAction[e.EGAAdAction.Clicked]?"clicked":t==e.EGAAdAction.Show||t==e.EGAAdAction[e.EGAAdAction.Show]?"show":t==e.EGAAdAction.FailedShow||t==e.EGAAdAction[e.EGAAdAction.FailedShow]?"failed_show":t==e.EGAAdAction.RewardReceived||t==e.EGAAdAction[e.EGAAdAction.RewardReceived]?"reward_received":""},d.adErrorToString=function(t){return t==e.EGAAdError.Unknown||t==e.EGAAdError[e.EGAAdError.Unknown]?"unknown":t==e.EGAAdError.Offline||t==e.EGAAdError[e.EGAAdError.Offline]?"offline":t==e.EGAAdError.NoFill||t==e.EGAAdError[e.EGAAdError.NoFill]?"no_fill":t==e.EGAAdError.InternalError||t==e.EGAAdError[e.EGAAdError.InternalError]?"internal_error":t==e.EGAAdError.InvalidRequest||t==e.EGAAdError[e.EGAAdError.InvalidRequest]?"invalid_request":t==e.EGAAdError.UnableToPrecache||t==e.EGAAdError[e.EGAAdError.UnableToPrecache]?"unable_to_precache":""},d.adTypeToString=function(t){return t==e.EGAAdType.Video||t==e.EGAAdType[e.EGAAdType.Video]?"video":t==e.EGAAdType.RewardedVideo||t==e.EGAAdError[e.EGAAdType.RewardedVideo]?"rewarded_video":t==e.EGAAdType.Playable||t==e.EGAAdError[e.EGAAdType.Playable]?"playable":t==e.EGAAdType.Interstitial||t==e.EGAAdError[e.EGAAdType.Interstitial]?"interstitial":t==e.EGAAdType.OfferWall||t==e.EGAAdError[e.EGAAdType.OfferWall]?"offer_wall":t==e.EGAAdType.Banner||t==e.EGAAdError[e.EGAAdType.Banner]?"banner":""},d.CategorySessionStart="user",d.CategorySessionEnd="session_end",d.CategoryDesign="design",d.CategoryBusiness="business",d.CategoryProgression="progression",d.CategoryResource="resource",d.CategoryError="error",d.CategoryAds="ads",d.MaxEventCount=500,d.MAX_ERROR_COUNT=10,d.countMap={},d.timestampMap={},d}(),t.GAEvents=d}(r||(r={})),function(e){(function(t){var n=e.logging.GALogger,o=e.state.GAState,i=e.events.GAEvents,r=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var n=new Date;return n.setSeconds(n.getSeconds()+e),new t.TimedBlock(n)},e.performTaskOnGAThread=function(n,o){void 0===o&&(o=0);var i=new Date;i.setSeconds(i.getSeconds()+o);var r=new t.TimedBlock(i);r.block=n,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(n,o){var i=new Date;i.setSeconds(i.getSeconds()+n);var r=new t.TimedBlock(i);return r.block=o,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r),r.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){o.isInitialized()&&(n.i("Ending session."),e.stopEventQueue(),o.isEnabled()&&o.sessionIsStarted()&&(i.addSessionEndEvent(),o.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(o){n.e("Error on GA thread"),n.e(o.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){i.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();t.GAThreading=r})(e.threading||(e.threading={}))}(r||(r={})),function(t){var n=t.threading.GAThreading,o=t.logging.GALogger,i=t.store.GAStore,r=t.state.GAState,a=t.http.GAHTTPApi,s=t.device.GADevice,c=t.validators.GAValidator,l=t.http.EGAHTTPApiResponse,u=t.utilities.GAUtilities,d=t.events.GAEvents,p=function(){function p(){}return p.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0},p.init=function(){if(s.touch(),p.methodMap.configureAvailableCustomDimensions01=p.configureAvailableCustomDimensions01,p.methodMap.configureAvailableCustomDimensions02=p.configureAvailableCustomDimensions02,p.methodMap.configureAvailableCustomDimensions03=p.configureAvailableCustomDimensions03,p.methodMap.configureAvailableResourceCurrencies=p.configureAvailableResourceCurrencies,p.methodMap.configureAvailableResourceItemTypes=p.configureAvailableResourceItemTypes,p.methodMap.configureBuild=p.configureBuild,p.methodMap.configureSdkGameEngineVersion=p.configureSdkGameEngineVersion,p.methodMap.configureGameEngineVersion=p.configureGameEngineVersion,p.methodMap.configureUserId=p.configureUserId,p.methodMap.initialize=p.initialize,p.methodMap.addBusinessEvent=p.addBusinessEvent,p.methodMap.addResourceEvent=p.addResourceEvent,p.methodMap.addProgressionEvent=p.addProgressionEvent,p.methodMap.addDesignEvent=p.addDesignEvent,p.methodMap.addErrorEvent=p.addErrorEvent,p.methodMap.addAdEvent=p.addAdEvent,p.methodMap.setEnabledInfoLog=p.setEnabledInfoLog,p.methodMap.setEnabledVerboseLog=p.setEnabledVerboseLog,p.methodMap.setEnabledManualSessionHandling=p.setEnabledManualSessionHandling,p.methodMap.setEnabledEventSubmission=p.setEnabledEventSubmission,p.methodMap.setCustomDimension01=p.setCustomDimension01,p.methodMap.setCustomDimension02=p.setCustomDimension02,p.methodMap.setCustomDimension03=p.setCustomDimension03,p.methodMap.setGlobalCustomEventFields=p.setGlobalCustomEventFields,p.methodMap.setEventProcessInterval=p.setEventProcessInterval,p.methodMap.startSession=p.startSession,p.methodMap.endSession=p.endSession,p.methodMap.onStop=p.onStop,p.methodMap.onResume=p.onResume,p.methodMap.addRemoteConfigsListener=p.addRemoteConfigsListener,p.methodMap.removeRemoteConfigsListener=p.removeRemoteConfigsListener,p.methodMap.getRemoteConfigsValueAsString=p.getRemoteConfigsValueAsString,p.methodMap.isRemoteConfigsReady=p.isRemoteConfigsReady,p.methodMap.getRemoteConfigsContentAsString=p.getRemoteConfigsContentAsString,p.methodMap.addOnBeforeUnloadListener=p.addOnBeforeUnloadListener,p.methodMap.removeOnBeforeUnloadListener=p.removeOnBeforeUnloadListener,void 0!==p.getGlobalObject()&&void 0!==p.getGlobalObject().GameAnalytics&&void 0!==p.getGlobalObject().GameAnalytics.q){var e=p.getGlobalObject().GameAnalytics.q;for(var t in e)p.gaCommand.apply(null,e[t])}window.addEventListener("beforeunload",function(){console.log("addEventListener unload"),r.instance.isUnloading=!0,r.notifyBeforeUnloadListeners(),n.endSessionAndStopQueue(),r.instance.isUnloading=!1})},p.gaCommand=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length>0&&e[0]in t.GameAnalytics.methodMap&&(e.length>1?t.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):t.GameAnalytics.methodMap[e[0]]())},p.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions01(e)})},p.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions02(e)})},p.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions03(e)})},p.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available resource currencies must be set before SDK is initialized"):r.setAvailableResourceCurrencies(e)})},p.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available resource item types must be set before SDK is initialized"):r.setAvailableResourceItemTypes(e)})},p.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Build version must be set before SDK is initialized."):c.validateBuild(e)?r.setBuild(e):o.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},p.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)||(c.validateSdkWrapperVersion(e)?s.sdkGameEngineVersion=e:o.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},p.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)||(c.validateEngineVersion(e)?s.gameEngineVersion=e:o.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},p.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("A custom user id must be set before SDK is initialized."):c.validateUserId(e)?r.setUserId(e):o.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},p.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),s.updateConnectionType();var i=n.createTimedBlock();i.async=!0,p.initTimedBlockId=i.id,i.block=function(){p.isSdkReady(!0,!1)?o.w("SDK already initialized. Can only be called once."):c.validateKeys(e,t)?(r.setKeys(e,t),p.internalInitialize()):o.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},n.performTimedBlockOnGAThread(i)},p.addBusinessEvent=function(e,t,o,i,a,c,l){if(void 0===e&&(e=""),void 0===t&&(t=0),void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===l&&(l=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add business event"))return;d.addBusinessEvent(e,t,o,i,a,c,l)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add business event")&&d.addBusinessEvent(e,t,o,i,a,c,l)})},p.addResourceEvent=function(e,o,i,a,c,l,u){if(void 0===e&&(e=t.EGAResourceFlowType.Undefined),void 0===o&&(o=""),void 0===i&&(i=0),void 0===a&&(a=""),void 0===c&&(c=""),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add resource event"))return;d.addResourceEvent(e,o,i,a,c,l,u)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add resource event")&&d.addResourceEvent(e,o,i,a,c,l,u)})},p.addProgressionEvent=function(e,o,i,a,c,l,u){if(void 0===e&&(e=t.EGAProgressionStatus.Undefined),void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=""),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add progression event"))return;var f="number"==typeof c;d.addProgressionEvent(e,o,i,a,f?c:0,f,l,u)}else n.performTaskOnGAThread(function(){if(p.isSdkReady(!0,!0,"Could not add progression event")){var t="number"==typeof c;d.addProgressionEvent(e,o,i,a,t?c:0,t,l,u)}})},p.addDesignEvent=function(e,t,o,i){if(void 0===o&&(o={}),void 0===i&&(i=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add design event"))return;var a="number"==typeof t;d.addDesignEvent(e,a?t:0,a,o,i)}else n.performTaskOnGAThread(function(){if(p.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;d.addDesignEvent(e,n?t:0,n,o,i)}})},p.addErrorEvent=function(e,o,i,a){if(void 0===e&&(e=t.EGAErrorSeverity.Undefined),void 0===o&&(o=""),void 0===i&&(i={}),void 0===a&&(a=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add error event"))return;d.addErrorEvent(e,o,i,a)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add error event")&&d.addErrorEvent(e,o,i,a)})},p.addAdEventWithNoAdReason=function(e,o,i,a,c,l,u){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c=t.EGAAdError.Undefined),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,c,0,!1,l,u)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,c,0,!1,l,u)})},p.addAdEventWithDuration=function(e,o,i,a,c,l,u){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c=0),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,c,!0,l,u)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,c,!0,l,u)})},p.addAdEvent=function(e,o,i,a,c,l){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===l&&(l=!1),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,0,!1,c,l)}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,0,!1,c,l)})},p.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setInfoLog(e),o.i("Info logging enabled")):(o.i("Info logging disabled"),o.setInfoLog(e))})},p.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setVerboseLog(e),o.i("Verbose logging enabled")):(o.i("Verbose logging disabled"),o.setVerboseLog(e))})},p.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){r.setManualSessionHandling(e)})},p.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(r.setEnabledEventSubmission(e),o.i("Event submission enabled")):(o.i("Event submission disabled"),r.setEnabledEventSubmission(e))})},p.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension01(e,r.getAvailableCustomDimensions01())?r.setCustomDimension01(e):o.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},p.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension02(e,r.getAvailableCustomDimensions02())?r.setCustomDimension02(e):o.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},p.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension03(e,r.getAvailableCustomDimensions03())?r.setCustomDimension03(e):o.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},p.setGlobalCustomEventFields=function(e){void 0===e&&(e={}),n.performTaskOnGAThread(function(){o.i("Set global custom event fields: "+JSON.stringify(e)),r.instance.currentGlobalCustomEventFields=e})},p.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},p.startSession=function(){if(r.isInitialized()){var e=n.createTimedBlock();e.async=!0,p.initTimedBlockId=e.id,e.block=function(){r.isEnabled()&&r.sessionIsStarted()&&n.endSessionAndStopQueue(),p.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},p.endSession=function(){p.onStop()},p.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},p.onResume=function(){var e=n.createTimedBlock();e.async=!0,p.initTimedBlockId=e.id,e.block=function(){p.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},p.getRemoteConfigsValueAsString=function(e,t){return void 0===t&&(t=null),r.getConfigurationStringValue(e,t)},p.isRemoteConfigsReady=function(){return r.isRemoteConfigsReady()},p.addRemoteConfigsListener=function(e){r.addRemoteConfigsListener(e)},p.removeRemoteConfigsListener=function(e){r.removeRemoteConfigsListener(e)},p.getRemoteConfigsContentAsString=function(){return r.getRemoteConfigsContentAsString()},p.getABTestingId=function(){return r.getABTestingId()},p.getABTestingVariantId=function(){return r.getABTestingVariantId()},p.addOnBeforeUnloadListener=function(e){r.addOnBeforeUnloadListener(e)},p.removeOnBeforeUnloadListener=function(e){r.removeOnBeforeUnloadListener(e)},p.internalInitialize=function(){r.ensurePersistedStates(),i.setItem(r.getGameKey(),r.DefaultUserIdKey,r.getDefaultId()),r.setInitialized(!0),p.newSession(),r.isEnabled()&&n.ensureEventQueueIsRunning()},p.newSession=function(){o.i("Starting a new session."),r.validateAndFixCurrentDimensions(),a.instance.requestInit(r.instance.configsHash,p.startNewSessionCallback)},p.startNewSessionCallback=function(e,t){if(e!==l.Ok&&e!==l.Created||!t)e==l.Unauthorized?(o.w("Initialize SDK failed - Unauthorized"),r.instance.initAuthorized=!1):(e===l.NoResponse||e===l.RequestTimeout?o.i("Init call (session start) failed - no response. Could be offline or timeout."):e===l.BadResponse||e===l.JsonEncodeFailed||e===l.JsonDecodeFailed?o.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==l.BadRequest&&e!==l.UnknownResponseCode||o.i("Init call (session start) failed - bad request or unknown response."),null==r.instance.sdkConfig?null!=r.instance.sdkConfigCached?(o.i("Init call (session start) failed - using cached init values."),r.instance.sdkConfig=r.instance.sdkConfigCached):(o.i("Init call (session start) failed - using default init values."),r.instance.sdkConfig=r.instance.sdkConfigDefault):o.i("Init call (session start) failed - using cached init values."),r.instance.initAuthorized=!0);else{var a=0;if(t.server_ts){var s=t.server_ts;a=r.calculateServerTimeOffset(s)}if(t.time_offset=a,e!=l.Created){var c=r.getSdkConfig();c.configs&&(t.configs=c.configs),c.configs_hash&&(t.configs_hash=c.configs_hash),c.ab_id&&(t.ab_id=c.ab_id),c.ab_variant_id&&(t.ab_variant_id=c.ab_variant_id)}r.instance.configsHash=t.configs_hash?t.configs_hash:"",r.instance.abId=t.ab_id?t.ab_id:"",r.instance.abVariantId=t.ab_variant_id?t.ab_variant_id:"",i.setItem(r.getGameKey(),r.SdkConfigCachedKey,u.encode64(JSON.stringify(t))),r.instance.sdkConfigCached=t,r.instance.sdkConfig=t,r.instance.initAuthorized=!0}if(r.instance.clientServerTimeOffset=r.getSdkConfig().time_offset?r.getSdkConfig().time_offset:0,r.populateConfigurations(r.getSdkConfig()),!r.isEnabled())return o.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var f=u.createGuid();r.instance.sessionId=f,r.instance.sessionStart=r.getClientTsAdjusted(),d.addSessionStartEvent();var v=n.getTimedBlockById(p.initTimedBlockId);null!=v&&(v.running=!1),p.initTimedBlockId=-1},p.resumeSessionAndStartQueue=function(){r.isInitialized()&&(o.i("Resuming session."),r.sessionIsStarted()||p.newSession())},p.isSdkReady=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=""),n&&(n+=": "),e&&!r.isInitialized()?(t&&o.w(n+"SDK is not initialized"),!1):e&&!r.isEnabled()?(t&&o.w(n+"SDK is disabled"),!1):!(e&&!r.sessionIsStarted()&&(t&&o.w(n+"Session has not started yet"),1))},p.initTimedBlockId=-1,p.methodMap={},p}();t.GameAnalytics=p}(r||(r={})),r.GameAnalytics.init(),r.GameAnalytics.gaCommand,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],Data:[function(e,t,n){"use strict";cc._RF.push(t,"c55584XxZ5G/5H9kJJbLNrP","Data");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.CONFIG_KEY=n.FIREBASE_KEY=n.FACEBOOK_KEY=n.LOCAL_KEY=void 0;var r=e("./FBInstantManager"),a=e("./FirebaseManager"),s=e("./Shop/Shop"),c=e("./Config"),l=cc._decorator,u=l.ccclass,d=(l.property,r.default.getInstance().getPlayerId());n.LOCAL_KEY="userData",n.FACEBOOK_KEY="facebookData",n.FIREBASE_KEY="firebaseData",n.CONFIG_KEY="configKey";var p=function(e){return s.default.serilizeUnlockedDeco(e),e},f=function(){function e(){}var t;return t=e,e.isLocal=function(){return"localId"===d},e.saveData=function(e,o,i){if(void 0===o&&(o=n.LOCAL_KEY),void 0===i&&(i=null),o===n.LOCAL_KEY&&(cc.sys.localStorage.setItem(n.LOCAL_KEY,JSON.stringify(e)),i&&i(null)),t.isLocal()&&o!==n.LOCAL_KEY)return t.saveData(e,t.LOCAL_KEY),i&&i(null);if(o===n.FACEBOOK_KEY&&r.default.getInstance().setPlayerData(e,function(n){n&&console.log("save facebook err:",n),cc.sys.localStorage.setItem(t.FACEBOOK_LOCAL_KEY,JSON.stringify(e)),i&&i(n)}),o===n.FIREBASE_KEY)try{a.default.getInstance().setPlayerData(e),i&&i(null)}catch(s){console.error("save firebase err:",s),i(s)}},e.getData=function(e,o){return void 0===e&&(e=n.LOCAL_KEY),void 0===o&&(o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}),e===n.LOCAL_KEY?t.getLocalData(o):t.isLocal()&&e!==t.LOCAL_KEY&&e!==t.CONFIG_KEY?t.getLocalData(o):e===n.FACEBOOK_KEY?t.getFacebookData(o):e===n.FIREBASE_KEY?t.getFirebaseData(o):e===n.CONFIG_KEY?t.getConfigData(o):void 0},e.getLocalData=function(e){var i=cc.sys.localStorage.getItem(n.LOCAL_KEY);e(null,i?p(JSON.parse(i)):o({},t.defaultData))},e.getFacebookData=function(e){r.default.getInstance().getPlayerData(function(n,i){if(n){console.log("get facebook data err",n);var r=cc.sys.localStorage.getItem(t.FACEBOOK_LOCAL_KEY);return e(null,r?p(JSON.parse(r)):o({},t.defaultData))}if(!i)return t.getData(t.LOCAL_KEY,function(n,i){e(null,o(o({},t.defaultData),i))});e(null,o(o({},t.defaultData),i))})},e.getFirebaseData=function(e){a.default.getInstance().getPlayerData(function(n,i){if(n)return e(n,null);e(null,o(o({},t.defaultData),i))})},e.getConfigData=function(e){c.default.getInstance().getDynamicConfig(function(t,n){return e(null,t?c.default.getInstance().getDefaultConfig():n)})},e.prototype.removeData=function(){cc.sys.localStorage.removeItem(n.LOCAL_KEY)},e.LOCAL_KEY=n.LOCAL_KEY,e.FACEBOOK_KEY=n.FACEBOOK_KEY,e.FIREBASE_KEY=n.FIREBASE_KEY,e.FACEBOOK_LOCAL_KEY="facebookLocalUserData",e.CONFIG_KEY=n.CONFIG_KEY,e.defaultData={money:0,unlockedLevel:0,isSound:!0,isMusic:!0,isVibrate:!0},t=i([u],e)}();n.default=f,cc._RF.pop()},{"./Config":"Config","./FBInstantManager":"FBInstantManager","./FirebaseManager":"FirebaseManager","./Shop/Shop":"Shop"}],EffectManager:[function(e,t,n){"use strict";cc._RF.push(t,"651ccMOV4lP5YZQYpu0DX8S","EffectManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,cc.tween),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.hideScene=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=cc.find("Canvas/Shadow");n&&e&&c(n).to(.4,{opacity:255}).call(function(){e(t)}.bind(this)).start()},t.showScene=function(e){void 0===e&&(e=null);var t=cc.find("Canvas/Shadow");t&&c(t).to(.4,{opacity:0}).start()},t.effectFail=function(){var e=cc.find("Canvas/Shadow"),t=cc.find("Canvas/Fail");e&&t&&(c(e).to(.2,{opacity:150},{easing:"cubicOut"}).start(),c(t).to(.2,{scale:1,opacity:255},{easing:"cubicOut"}).start())},t.effectSuccess=function(){var e=cc.find("Canvas/Shadow"),t=cc.find("Canvas/Success");e&&t&&(c(e).to(.2,{opacity:150},{easing:"cubicOut"}).start(),c(t).to(.2,{scale:.7,opacity:255},{easing:"cubicOut"}).start())},t.effectScaleOption=function(e,t){e.active=!0,e.scale=0,c(e).to(t,{scale:1,opacity:255},{easing:"backOut"}).start()},t.effectHideButton=function(e,t){c(e).to(t,{scale:0,opacity:0},{easing:"backOut"}).start()},t.showUI=function(e){cc.find("Canvas/Level").active=e,cc.find("Canvas/OptionContainer").active=e},t.flicker=function(e,t){c(e).repeat(t,c().to(.05,{opacity:0}).delay(.1).to(.05,{opacity:255})).start()},t.showTick=function(e,t){void 0===t&&(t=null),t?t.getChildByName("TrueAnswer").active=!0:cc.find("Canvas/Level/Line/TrueAnswer").active=!0;var n=cc.find("Canvas/OptionContainer").getChildByName("option"+(e+1));switch(e){case 0:case 1:n.getChildByName("tick").active=!0;break;case 2:n.getChildByName("tick").active=!0}},t.showX=function(e,t){void 0===t&&(t=null),t?t.getChildByName("FalseAnswer").active=!0:cc.find("Canvas/Level/Line/FalseAnswer").active=!0;var n=cc.find("Canvas/OptionContainer").getChildByName("option"+(e+1));switch(e){case 0:case 1:n.getChildByName("x").active=!0;break;case 2:n.getChildByName("x").active=!0}},t.effectFlyMoney=function(e,t){for(var n=[],o=0;o<11;++o){var i=cc.instantiate(e);n.push(i),t.addChild(i)}var r=cc.find("Canvas/UI"),a=r.getComponent("UIController"),s=r.convertToNodeSpaceAR(a.point.convertToWorldSpaceAR(r));c(n[0]).to(1,{position:cc.v3(-110,50)},{easing:"quintOut"}).delay(0).bezierTo(.5,cc.v2(-110,50),cc.v2(-120,350),cc.v2(s)).delay(.2).call(function(){n[0].active=!1,n[0].position=cc.v3(0,0)}).start(),c(n[1]).to(1,{position:cc.v3(-52,143)},{easing:"quintOut"}).delay(.05).bezierTo(.5,cc.v2(-52,143),cc.v2(-65,310),cc.v2(s)).delay(.2).call(function(){n[1].active=!1,n[1].position=cc.v3(0,0)}).start(),c(n[2]).to(1,{position:cc.v3(-240,114)},{easing:"quintOut"}).delay(.05).bezierTo(.5,cc.v2(-240,114),cc.v2(-310,300),cc.v2(s)).delay(.2).call(function(){n[2].active=!1,n[2].position=cc.v3(0,0)}).start(),c(n[3]).to(1,{position:cc.v3(100,200)},{easing:"quintOut"}).delay(.01).bezierTo(.5,cc.v2(100,200),cc.v2(305,210),cc.v2(s)).delay(.2).call(function(){n[3].active=!1,n[3].position=cc.v3(0,0)}).start(),c(n[4]).to(1,{position:cc.v3(165,202)},{easing:"quintOut"}).delay(.1).bezierTo(.5,cc.v2(165,202),cc.v2(360,310),cc.v2(s)).delay(.2).call(function(){n[4].active=!1,n[4].position=cc.v3(0,0)}).start(),c(n[5]).to(1,{position:cc.v3(102,280)},{easing:"quintOut"}).delay(.1).bezierTo(.5,cc.v2(102,280),cc.v2(111,400),cc.v2(s)).delay(.2).call(function(){n[5].active=!1,n[5].position=cc.v3(0,0)}).start(),c(n[6]).to(1,{position:cc.v3(208,105)},{easing:"quintOut"}).delay(.15).bezierTo(.5,cc.v2(208,105),cc.v2(360,142),cc.v2(s)).delay(.2).call(function(){n[6].active=!1,n[6].position=cc.v3(0,0)}).start(),c(n[7]).to(1,{position:cc.v3(-193,-169)},{easing:"quintOut"}).delay(.15).bezierTo(.5,cc.v2(-193,-169),cc.v2(-322,40),cc.v2(s)).delay(.2).call(function(){n[7].active=!1,n[7].position=cc.v3(0,0)}).start(),c(n[8]).to(1,{position:cc.v3(-100,-215)},{easing:"quintOut"}).delay(.2).bezierTo(.5,cc.v2(-100,-215),cc.v2(127,-280),cc.v2(s)).delay(.2).call(function(){n[8].active=!1,n[8].position=cc.v3(0,0)}).start(),c(n[9]).to(1,{position:cc.v3(71,-121)},{easing:"quintOut"}).delay(.2).bezierTo(.5,cc.v2(71,-121),cc.v2(330,-88),cc.v2(s)).delay(.2).call(function(){n[9].active=!1,n[9].position=cc.v3(0,0)}).start(),c(n[10]).to(1,{position:cc.v3(35,-2)},{easing:"quintOut"}).delay(.025).bezierTo(.5,cc.v2(35,-2),cc.v2(0,0),cc.v2(s)).delay(.2).call(function(){n[10].active=!1,n[10].position=cc.v3(0,0)}).start()},t.showButton=function(e,t){e.active=!0,e.scale=0,e.opacity=0,c(e).to(t,{scale:1,opacity:255},{easing:"quadIn"}).start()},t.scaleForever=function(e,t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),t&&n&&o?(e.active=!0,e.scale=1,e.opacity=0,c(e).to(o,{scale:n,opacity:255}).repeatForever(c().to(o,{scale:t}).to(o,{scale:n})).start()):cc.Tween.stopAllByTarget(e)},t.effectScaleStart=function(e){e.active=!0,c(e).to(.25,{scale:.95},{easing:"backOut"}).repeatForever(c().to(.8,{scale:.95},{easing:"backOut"}).delay(.4).to(.8,{scale:1.05},{easing:"backOut"}).delay(.4)).start()},t.effectScaleButton=function(e,t,n,o){e.active=!0,e.opacity=255,c(e).parallel(c().to(o,{scaleX:t+.1},{easing:"cubicOut"}).to(.3,{scaleX:t}),c().to(o,{scaleY:n+.1},{easing:"cubicOut"}).to(.3,{scaleY:n})).start()},r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"5bc46rpWClIqJJbH+W8pEmC","EventManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.sendRequestNextScene=function(e){e.dispatchEvent(new cc.Event.EventCustom("request_next_scene",!0))},t.sendRequestReset=function(e){e.dispatchEvent(new cc.Event.EventCustom("back_to_stage_begin",!0))},t.sendRequestPlayStageBegin=function(e){e.dispatchEvent(new cc.Event.EventCustom("back_to_stage_begin",!0))},t.sendRequestResult=function(e){e.dispatchEvent(new cc.Event.EventCustom("next_level",!0))},t.sendRequestNextStage=function(e){e.dispatchEvent(new cc.Event.EventCustom("next_stage",!0))},t.sendRequestContinue=function(e){e.dispatchEvent(new cc.Event.EventCustom("show_continue",!0))},r([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],FBInstantManager:[function(e,t,n){"use strict";cc._RF.push(t,"8a866GWI09Fuq0ZAeTmADjR","FBInstantManager");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){this.playerId=""}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.prototype.getPlayerId=function(){if(!this.playerId)try{this.playerId=FBInstant.player.getID()}catch(e){this.playerId="localId"}if(this.playerId)return this.playerId},e.prototype.getShareImg=function(e){var t=this;if(this.shareImg)return e(this.shareImg);cc.resources.load("Base64/ShareImg",function(n,o){t.shareImg=o.text,e(t.shareImg)})},e.prototype.shareGame=function(){this.getShareImg(function(e){var t=FBInstant.player.getID();FBInstant.shareAsync({intent:"REQUEST",image:e,text:"Let's play prison escape!",data:{sharePlayerID:t}})})},e.prototype.invitePlay=function(e){void 0===e&&(e={level:1,playerId:""});var t=function(t){FBInstant.getLeaderboardAsync(t).then(function(t){return t.setScoreAsync(e.level,"")}).then(function(){FBInstant.updateAsync({action:"LEADERBOARD",name:t,text:FBInstant.player.getName()+" had passed level "+e.level+" invite you to play Escape Prison"}).then(function(){cc.log("send invite - update leaderboard")}).catch(function(e){console.log("errr",e)})}).catch(function(e){console.log("err",e)})},n=FBInstant.context.chooseAsync,o=[];e.playerId&&(n=FBInstant.context.createAsync,o.push(e.playerId)),n.apply(void 0,o).then(function(){var e="Top escaptists."+FBInstant.context.getID();t(e)}).catch(function(e){void 0===e&&(e=null),console.log("fail?",e)})},e.prototype.getConnectedPlayers=function(e){try{FBInstant.player.getConnectedPlayersAsync().then(function(t){var n=t.map(function(e){return{id:e.getID(),name:e.getName(),photo:e.getPhoto()}});e(n)}).catch(function(e){console.log("get list fail",e)})}catch(t){cc.log("error:",t)}},e.prototype.setPlayerData=function(e,t){try{if(!FBInstant)return t(null)}catch(o){return t(null)}var n={};n.userData=e,FBInstant.player.setDataAsync(n).then(function(){t(null)}).catch(function(e){t(e)})},e.prototype.getPlayerData=function(e){try{if(!FBInstant)return e(null,null)}catch(t){return e(null,null)}FBInstant.player.getDataAsync(["userData"]).then(function(t){e(null,t.userData)}).catch(function(t){e(t,null)})},t=o([r],e)}());n.default=a,cc._RF.pop()},{}],FirebaseManager:[function(e,t,n){"use strict";cc._RF.push(t,"aab2cDGV/BNxLfM/InAEHbA","FirebaseManager");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./FBInstantManager"),a=cc._decorator,s=a.ccclass,c=(a.property,"players"),l=function(e,t,n){var o=e.constructor.getInstance(),i=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o._firebase)return i.apply(o,e);o._lazyCalls.push({func:n.value,args:arguments})}},u=function(){function e(){this._firebase=null,this._db=null,this._lazyCalls=[]}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.initFirebase=function(){var e,t,n,o,i=this;e=0,t=function(){if(e++,console.log(e),e<2)return o.onload=t,o.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js",void document.body.appendChild(o);firebase.initializeApp({apiKey:"AIzaSyAtgQV4Y4C421i5yXu-LPnBLduNq_k8180",authDomain:"prison-escape-intants-facebook.firebaseapp.com",projectId:"prison-escape-intants-facebook",storageBucket:"prison-escape-intants-facebook.appspot.com",messagingSenderId:"665662688817",appId:"1:665662688817:web:ef8b820f7b2b73b9624f10",measurementId:"G-XP2FTDN4XW"}),i._firebase=firebase,i._db=firebase.firestore(),window.firebase=null,i._lazyCalls.forEach(function(e){return e.func.apply(e,e.args)})},n=document.createElement("script"),o=document.createElement("script"),n.onload=t,n.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js",document.body.appendChild(n)},e.prototype.getPlayerRef=function(e){return e+"/"+r.default.getInstance().getPlayerId()},e.prototype.setData=function(e,t,n){try{this._db.collection(e).doc(t).set(n).then(function(){console.log("Document written")}).catch(function(e){console.error("Error adding document: ",e)})}catch(o){console.error("save firebase err: ",o)}},e.prototype.getData=function(e,t,n){this._db.collection(e).doc(t).get().then(function(o){if(o.exists){var i=o.data();n(null,i)}else console.log("no doc",e,t),n(null,null)}).catch(function(e){n(e)})},e.prototype.setPlayerData=function(e){var t=r.default.getInstance().getPlayerId();"localId"!==t&&this.setData(c,t,e)},e.prototype.getPlayerData=function(e){var t=r.default.getInstance().getPlayerId();if("localId"===t)return e(null,null);this.getData(c,t,e)},e.prototype.getFriendData=function(e,t){if("localId"===r.default.getInstance().getPlayerId())return t(null,null);this.getData(c,e,t)},e.prototype.getLeaderboard=function(e){var t=this,n=[],i=function(e,r,a){var s=e[r];t.getFriendData(s.id,function(t,c){t&&(c={unlockedLevel:-1});var l=o(o({},c),s);if(n.push(l),e[++r])return i(e,r,a);a(n)})};r.default.getInstance().getConnectedPlayers(function(t){i(t,0,e)})},e.prototype.getConfig=function(e){this._db.collection("config").doc("configId").get().then(function(t){t.exists?e(null,t.data()):e(null,null)}).catch(function(t){e(t,null)})},e._instance=null,i([l],e.prototype,"getConfig",null),t=i([s],e)}();n.default=u,cc._RF.pop()},{"./FBInstantManager":"FBInstantManager"}],FishSwim:[function(e,t,n){"use strict";cc._RF.push(t,"0fbf2HST0tF/o8oPnW3t+5Y","FishSwim");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=cc.tween,u=[250,500,200,300,200,150],d=[3,6,2,2,4,1],p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fishs=[],t._durations=[],t._fishsConfig=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;this._fishsConfig=[];var t=this.node.width;u.forEach(function(n){e._durations.push(parseInt(t/n+""))}),this.fishs.forEach(function(t,n){t.width;var o=t.position.x;e._fishsConfig.push({node:t,duration:Math.abs(2*o)/u[n],startX:o,endX:-o,delay:d[n],y:t.y,scaleX:t.scaleX})}),cc.Tween.stopAllByTag(-100)},t.prototype.onEnable=function(){this._fishsConfig.forEach(function(e){e.node.position.x=e.startX,e.node.scaleX=e.scaleX,l(e.node).tag(-100).delay(e.delay/2).repeatForever(l().to(e.duration,{position:cc.v3(e.endX,e.y)}).delay(e.delay).call(function(){e.node.scaleX=-e.scaleX}).to(e.duration,{position:cc.v3(e.startX,e.y)}).delay(e.delay).call(function(){e.node.scaleX=e.scaleX})).start()})},t.prototype.onDisable=function(){cc.Tween.stopAllByTag(-100)},r([c([cc.Node])],t.prototype,"fishs",void 0),r([s],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"01bf0WmjNtFoaDXKbrhV1vh","GameManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.SOUND=void 0;var a,s=e("./Data"),c=e("./AdsManager"),l=e("./EffectManager"),u=e("./FBInstantManager"),d=e("./BundleManager"),p=e("./FirebaseManager"),f=e("gameanalytics"),v=e("gameanalytics"),h=cc._decorator,g=h.ccclass,y=h.property,m=cc.tween;(function(e){e[e.BG=0]="BG",e[e.CLICK=1]="CLICK",e[e.FAIL_STAGE=2]="FAIL_STAGE",e[e.SUCCESS_STAGE=3]="SUCCESS_STAGE",e[e.SUCCESS_LEVEL=4]="SUCCESS_LEVEL"})(a=n.SOUND||(n.SOUND={}));var _=[{bundle:"lupin",resources:["lupin","lupin_boom"]},{bundle:"animal",resources:["animal","bear","bird","boar","chimgokien","crab","crocodile","crocodile_1","dog","dog_1","dog_2","fish","mouse","Shark","shark_2","snake","spider"]},{bundle:"assets",resources:["assets","laser","skeleton"]},{bundle:"police",resources:["police"]}],E=[],C=[],b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levels=[],t.shadow=null,t.sounds=[],t.success=null,t.fail=null,t.ui=null,t.shadowUI=null,t.gameContainer=null,t.optionContainer=null,t.introducePrefab=null,t.home=null,t.listLevelPrefab=null,t.level=null,t.mainCamera=null,t.setting=null,t.noInternet=null,t.introduce=null,t.loading=null,t.btnSetting=null,t.guide=null,t.comingSoon2=null,t._home=null,t._introduce=null,t._listLevel=null,t._shop=null,t._loading=null,t._ui=null,t._countDown=null,t._levelCurrent={script:null,level:0},t._levelArray=[],t._currentScene=null,t._beginScene=null,t._data=null,t._txtMoney=null,t.currentAudioBG=null,t._clickX4=!0,t._selectedLevel=0,t._failLevelLoad=null,t._bundleInstance=null,t._temp=0,t.firstPlay=!0,t._skeletonResource={},t._finishLoadResources=!1,t._resourcesLoaded=0,t._resourcesRequired=1,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this;this._bundleInstance=d.default.getInstance(),console.log("APP VERSION: ","1.2.62"),this.ui.active=!0,this._ui=this.ui.getComponent("UIController"),this.shadowUI.opacity=0,p.default.getInstance().initFirebase(),this.showHome(),this.loadShop(),this.showShop(!1),this._txtMoney=this._ui.moneyTop.getChildByName("txt_money").getComponent(cc.Label),this._countDown=this._ui.countDown.getComponent("CountDown5s"),f.GameAnalytics.setEnabledInfoLog(!0),f.GameAnalytics.setEnabledVerboseLog(!0),f.GameAnalytics.configureBuild("1.2.62"),f.GameAnalytics.initialize("cc6953ee132cd22c735ff12664605ead","e0c1ff5146630355878b2ba994ae100e2818c899"),s.default.getData(s.default.FACEBOOK_KEY,function(t,n){if(e._data=n,e._data.unlockedLevel>0&&(e.firstPlay=!1),e._txtMoney.string=e._data.money,e._temp=e._data.unlockedLevel,e._data.unlockedLevel<30){var o="Level"+(e._data.unlockedLevel+1);e._bundleInstance.getPrefabByName(o)}E.forEach(function(t){t(e._data)})});try{c.default.getInstance().preload()}catch(t){console.log(t)}},t.prototype.onEnable=function(){var e=this;this._home=this.home.getComponent("HomeController"),this._home&&this._home.updateCalendar(),this._introduce=cc.find("Canvas/Introduce"),this.optionContainer.zIndex=cc.macro.MAX_ZINDEX-100,this.home.zIndex=cc.macro.MAX_ZINDEX-99,this.getDataAsync(function(t){e._levelCurrent.level=t.unlockedLevel,e._selectedLevel=t.unlockedLevel,0==e._data.unlockedLevel&&e.firstPlay&&(e._ui.showGuide(!0),e.firstPlay=!1)})},t.prototype.start=function(){this.playAudioBG(),this._loading=cc.instantiate(this.loading),this.showLoading(!1),this._loading.zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(this._loading),this.loadRes(function(){})},t.prototype.getDataAsync=function(e){if(this._data)return e(this._data);E.push(e)},t.prototype.playAudioBG=function(){this.playSound(a.BG,!0)},t.prototype.stopAudioBG=function(){cc.audioEngine.stopMusic()},t.prototype.showHome=function(){this.home&&(this.home.active=!0)},t.prototype.showLoading=function(e){this._loading.active=e},t.prototype.showIntroduce=function(){this._introduce&&(this.showLoading(!1),this._introduce.active=!0,this._introduce.zIndex=cc.macro.MAX_ZINDEX,this._ui.showUIIntroduce(!1))},t.prototype.showListLevel=function(){this.playSound(a.CLICK,!1),this._listLevel?this._listLevel.active=!0:(this._listLevel=cc.instantiate(this.listLevelPrefab),this._listLevel.zIndex=cc.macro.MAX_ZINDEX-1,cc.find("Canvas").addChild(this._listLevel)),this._ui.showGuide(!1)},t.prototype.nextIntroduce=function(){this.home.active=!1,this._ui.showUIIntroduce(!1),0!=this._temp&&(this._selectedLevel=this._temp),this._selectedLevel%10==0?this._introduce&&(this._introduce.getComponent("Introduce").setIntro(this._selectedLevel),this._ui.showUIEndGame(!1),this.showIntroduce()):this.startGame()},t.prototype.onReplay=function(){var e=this;this.playSound(a.CLICK,!1),c.default.getInstance().showInterestialAds(function(t){t&&console.log("ADS: "+t.message),e._currentScene.active=!1,e._beginScene.active=!0})},t.prototype.onHome=function(){var e=this;this.playSound(a.CLICK,!1),cc.Tween.stopAll(),c.default.getInstance().showInterestialAds(function(t){t&&console.log("ADS: "+t.message),e.mainCamera.active=!0,e.home.active=!0,e.gameContainer.children.forEach(function(e){e.active=!1}),e._ui.showUIEndGame(!1),e._ui.showUIIntroduce(!0),e._ui.showUIContinue(!1)})},t.prototype.onNextLevel=function(){var e=this;if(this.playSound(a.CLICK,!1),this._levelCurrent.level>=30)return this.btnSetting.active=!1,this._ui.showUIEndGame(!1),void this._ui.showComingSoon();this.showLoading(!0),c.default.getInstance().showInterestialAds(function(t){t&&cc.log("ADS",t.message),e._temp=e._levelCurrent.level;var o="Level"+(e._temp+1);e._temp%10!=0?e._bundleInstance.getPrefabByName(o,function(t,o){if(e.showLoading(!1),o){e._currentScene.active=!1,e._currentScene.parent!=e.gameContainer&&(e._currentScene.parent.active=!1),e.gameContainer.addChild(cc.instantiate(o)),e._ui.showUIEndGame(!1);var i=e._temp+1,r=e._temp+2;return cc.error("Current "+i),cc.error("Next "+r),e.setLevel(i,r),void n.logNextLevel(i)}console.error(t)}):e.nextIntroduce()})},t.logEvent=function(e){f.GameAnalytics.addDesignEvent(e)},t.logFailed=function(e,t,n){f.GameAnalytics.addProgressionEvent(v.EGAProgressionStatus.Fail,"Level"+(e+1),"Stage"+(t+1),"Option"+(n+1))},t.logPassed=function(e,t,n){f.GameAnalytics.addProgressionEvent(v.EGAProgressionStatus.Complete,"Level"+(e+1),"Stage"+(t+1),"Option"+(n+1))},t.logLevel=function(e){f.GameAnalytics.addProgressionEvent(v.EGAProgressionStatus.Start,"EnterLevel"+(e+1))},t.logNextLevel=function(e){f.GameAnalytics.addProgressionEvent(v.EGAProgressionStatus.Start,"NextLevel"+(e+1))},t.prototype.initGame=function(e){var t=this;n.logLevel(e);for(var o=0;o<this.gameContainer.children.length;++o){var i=this.gameContainer.children[o];if(i.name=="Level"+(e+1)){if(i.active=!0,i.children[0].name.includes("Level")){for(var r=0,a=i.children;r<a.length;r++)a[r].active=!1;i.children[0].active=!0}return}}this.showLoading(!0);var s="Level"+(e+1);this._bundleInstance.getPrefabByName(s,function(e,n){if(n){var o=function(){var e=cc.instantiate(n);t.gameContainer.addChild(e),t.showLoading(!1)};return t._finishLoadResources?void o():void C.push(o)}t.showLoading(!1),console.log("get level err",e),t.onHome(),window.navigator.online?t._ui.showComingSoon():t._ui.showAlert("NO INTERNET CONNECTION")})},t.prototype.startGame=function(){this.playSound(a.CLICK,!1),this.initGame(this._selectedLevel)},t.prototype.selectLevel=function(e){return 30==this._data.unlockedLevel&&30==e?(this.showComingSoon2(),void this.playSound(a.CLICK,!1)):(this._selectedLevel=e,this.gameContainer.children.forEach(function(e){e.active=!1}),e%10==0?(this._temp=this._selectedLevel,void this.nextIntroduce()):(this.initGame(e),this._ui.showUIIntroduce(!1),void(this.home.active=!1)))},t.prototype.setLevel=function(e,t){this.level.getChildByName("Start").getChildByName("txtLevel").getComponent(cc.Label).string=e.toString(),this.level.getChildByName("Current").getChildByName("txtLevel").getComponent(cc.Label).string=t.toString()},t.prototype.playSound=function(e,t){var n=this;s.default.getData(s.default.LOCAL_KEY,function(o,i){var r=i;r.isSound&&0!=e&&cc.audioEngine.play(n.sounds[e],t,1),r.isMusic&&0==e&&cc.audioEngine.playMusic(n.sounds[e],t)})},t.prototype.playStageBegin=function(){},t.prototype.addMoney=function(e,t){var n=this;void 0===t&&(t=null);var o=e<0?-1:1;0!=e&&s.default.getData(s.default.FACEBOOK_KEY,function(i,r){n._data=r,n._data.money+=e,s.default.saveData(n._data,s.default.FACEBOOK_KEY,t),m(n._txtMoney.node).repeat(e*o/3,m().call(function(){n._txtMoney.string=parseInt(n._txtMoney.string)+3*o}).delay(.03)).call(function(){n._txtMoney.string=n._data.money}).start()})},t.prototype.payMoney=function(){var e=this;this.playSound(a.CLICK,!1),this.addMoney(-200,function(){e.onPlayAgain()})},t.prototype.playClickAudio=function(){this.playSound(a.CLICK,!1)},t.prototype.showVideoX4=function(e){var t=this;this._clickX4&&(this._clickX4=!1,this.playSound(a.CLICK,!1),c.default.getInstance().showRewardedAds(function(o){o||(n.logEvent("x4RewardedVideo"),t.addMoney(150),t._ui.setMoney(150),l.default.effectHideButton(e.target,.7))}))},t.prototype.showVideo=function(){var e=this;this.playSound(a.CLICK,!1),this._countDown.stopCountDown(),c.default.getInstance().showRewardedAds(function(t){if(t)return"ADS_NOT_LOADED"===t.code||"RATE_LIMITED"===t.code?e.scheduleOnce(function(){e.onPlayAgain()},.5):(e._ui.showUIContinue(!1),void e.onReplay());n.logEvent("RevivedRewaredVideo"),e.onPlayAgain()})},t.prototype.onPlayAgain=function(){this._ui.showUIEndGame(!1),this._ui.showUIContinue(!1),this._countDown.stopCountDown(),this._levelCurrent.script.initStage()},t.prototype.onTapToStart=function(){var e=this;this.playSound(a.CLICK,!1),this._ui.showGuide(!1),30!=this._data.unlockedLevel?this._failLevelLoad||s.default.getData(s.default.FACEBOOK_KEY,function(t,n){e._temp=n.unlockedLevel,e.nextIntroduce()}):this.showListLevel()},t.prototype.onClickSetting=function(){this.playSound(a.CLICK,!1);var e=cc.find("Canvas/Setting");e?e.active=!0:(e=cc.instantiate(this.setting),cc.find("Canvas").addChild(e)),this._ui.showGuide(!1)},t.prototype.loadShop=function(e){var t=this;void 0===e&&(e=null),this._shop||this._bundleInstance.getPrefabByName("Shop",function(n,o){if(o)return t._shop=cc.instantiate(o),t._shop.zIndex=cc.macro.MAX_ZINDEX,t._shop.active=!1,cc.find("Canvas").addChild(t._shop),e&&e(null,t._shop);console.log("get shop err",n),e&&e(n,null)})},t.prototype.showShop=function(e){var t=this;this._shop?this._shop.active=e:e&&this.loadShop(function(n,o){if(n)return t.onHome(),window.navigator.online?void t._ui.showComingSoon():void t._ui.showAlert("NO INTERNET CONNECTION");o.active=e}),this._ui.showGuide(!1)},t.prototype.onClickReload=function(){},t.prototype.onShare=function(){u.default.getInstance().shareGame()},t.prototype.onInvite=function(){s.default.getData(s.default.FACEBOOK_KEY,function(e,t){u.default.getInstance().invitePlay({level:t.unlockedLevel||1,playerId:""})})},t.prototype.showGuide=function(e){var t;0==this._data.unlockedLevel&&this.firstPlay&&(e?(t=cc.find("Canvas/Guide"))?t.active=!0:((t=cc.instantiate(this.guide)).zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(t)):(t=cc.find("Canvas/Guide"))&&(t.active=!1,this.firstPlay=!1))},t.prototype.showComingSoon2=function(){var e=cc.find("Canvas/ComingSoon2");e?e.active=!0:((e=cc.instantiate(this.comingSoon2)).zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(e))},t.prototype.finishLoadResource=function(){this._resourcesLoaded++,this._resourcesLoaded>=this._resourcesRequired&&(this._finishLoadResources=!0,C.forEach(function(e){return e()}))},t.prototype.loadRes=function(e){var t=this,n=0,o=0,i=function(e){e&&(console.log(e),t._ui.showAlert("NO INTERNET CONNECTION"))};_.forEach(function(r){r.resources.forEach(function(a){var s,c;o++,s=r.bundle,c=a,d.default.getInstance().getResource(s,c,sp.SkeletonData,function(r,a){if(r)return i(r);n++,console.log("--- load:",s,c),t._skeletonResource[s+"__"+c]=a,n>=o&&(console.log("--- load ",n,"skeletons"),t.finishLoadResource(),e())})})})},t.prototype.getSkeletonResource=function(e,t){return this._skeletonResource[e+"__"+t]},r([y(cc.Prefab)],t.prototype,"levels",void 0),r([y(cc.Node)],t.prototype,"shadow",void 0),r([y([cc.AudioClip])],t.prototype,"sounds",void 0),r([y(cc.Node)],t.prototype,"success",void 0),r([y(cc.Node)],t.prototype,"fail",void 0),r([y(cc.Node)],t.prototype,"ui",void 0),r([y(cc.Node)],t.prototype,"shadowUI",void 0),r([y(cc.Node)],t.prototype,"gameContainer",void 0),r([y(cc.Node)],t.prototype,"optionContainer",void 0),r([y(cc.Prefab)],t.prototype,"introducePrefab",void 0),r([y(cc.Node)],t.prototype,"home",void 0),r([y(cc.Prefab)],t.prototype,"listLevelPrefab",void 0),r([y(cc.Node)],t.prototype,"level",void 0),r([y(cc.Node)],t.prototype,"mainCamera",void 0),r([y(cc.Prefab)],t.prototype,"setting",void 0),r([y(cc.Node)],t.prototype,"noInternet",void 0),r([y(cc.Prefab)],t.prototype,"introduce",void 0),r([y(cc.Prefab)],t.prototype,"loading",void 0),r([y(cc.Node)],t.prototype,"btnSetting",void 0),r([y(cc.Prefab)],t.prototype,"guide",void 0),r([y(cc.Prefab)],t.prototype,"comingSoon2",void 0),n=r([g],t)}(cc.Component);n.default=b,cc._RF.pop()},{"./AdsManager":"AdsManager","./BundleManager":"BundleManager","./Data":"Data","./EffectManager":"EffectManager","./FBInstantManager":"FBInstantManager","./FirebaseManager":"FirebaseManager",gameanalytics:1}],Guide:[function(e,t,n){"use strict";cc._RF.push(t,"83398XgwSJOD6j4WX9n26Ap","Guide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hand=null,t}return i(t,e),t.prototype.onLoad=function(){this.hand.active=!1,this._shadow=cc.find("Canvas/Shadow"),this._setting=cc.find("Canvas/BtnSetting")},t.prototype.onEnable=function(){this.action(),this._setting.getChildByName("Block").active=!0,this._setting.color=new cc.Color(150,150,150,255)},t.prototype.onDisable=function(){this._shadow.opacity=0,this._setting.getChildByName("Block").active=!1,this._setting.color=new cc.Color(255,255,255,255)},t.prototype.action=function(){var e=this;this.hand.active=!0,cc.tween(this._shadow).to(.2,{opacity:150}).call(function(){cc.tween(e.hand).repeatForever(cc.tween().call(function(){e.hand.position=cc.v3(-310,-960),e.hand.opacity=0}).parallel(cc.tween().to(.5,{opacity:255}),cc.tween().to(.5,{position:cc.v3(-310,-800)}).call(function(){cc.tween(e.hand).to(.2,{scale:.95},{easing:"cubicIn"}).to(.2,{scale:1},{easing:"cubicOut"}).start()})).delay(.7).to(.5,{position:cc.v3(0,-800)}).call(function(){cc.tween(e.hand).to(.2,{scale:.95},{easing:"cubicIn"}).to(.2,{scale:1},{easing:"cubicOut"}).start()}).delay(.7).to(.5,{position:cc.v3(310,-800)}).call(function(){cc.tween(e.hand).to(.2,{scale:.95},{easing:"cubicIn"}).to(.2,{scale:1},{easing:"cubicOut"}).start()}).delay(.7).parallel(cc.tween().by(.5,{position:cc.v3(200,0)}),cc.tween().to(.5,{opacity:0}))).start()}).start()},r([c(cc.Node)],t.prototype,"hand",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],HomeController:[function(e,t,n){"use strict";cc._RF.push(t,"1401dGXgNZBWa6wc2UrdD/k","HomeController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Data"),s=cc._decorator,c=s.ccclass,l=s.property,u=cc.tween,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lupin=null,t.ui=null,t.wall=null,t.floor=null,t.bed=null,t.tv=null,t.window=null,t.pricture=null,t.toilet=null,t.dayCount=null,t.notification=null,t._decorations=[],t}return i(t,e),t.prototype.onLoad=function(){this._decorations=[this.wall,this.floor,this.bed,this.tv,this.window,this.pricture,this.toilet],this.setCurrentDeco(),this.setLupinLoop()},t.prototype.onEnable=function(){this.notification.active=!0,this.lupin.setSkin("Lupin")},t.prototype.onDisable=function(){this.notification.active=!1},t.prototype.moveVertical=function(e,t,n){void 0===n&&(n=function(){}),cc.tween(this.node).by(t,{position:cc.v3(0,-e)}).call(n).start()},t.prototype.setDecoration=function(e,t){var n=this._decorations[e];n&&(n.node.opacity=180,n.spriteFrame=t,u(n.node).delay(.5).to(.3,{opacity:255}).start())},t.prototype.setCurrentDeco=function(){var e=this;a.default.getData(a.default.FACEBOOK_KEY,function(t,n){var o=n.currentDeco||{};Object.keys(o).forEach(function(t){var n=o[t];cc.resources.load("Shop/"+n.type+"/"+t+"_"+n.type,cc.SpriteFrame,function(t,o){t&&(o=null),e.setDecoration(n.cateIndex,o)})})})},t.prototype.setLupinLoop=function(){var e=this,t=0;this.lupin.setCompleteListener(function(n){"home/bed"===n.animation.name&&++t>=4&&(t=0,e.setLupinToilet()),"emotion/sinister"===n.animation.name&&++t>=7&&(t=0,e.setLupinBed())}),this.setLupinStand()},t.prototype.setLupinOpacity=function(){this.lupin.node.opacity=180,u(this.lupin.node).to(.5,{opacity:255}).start()},t.prototype.setLupinBed=function(){var e=this;a.default.getData(a.default.FACEBOOK_KEY,function(t,n){var o=n.currentDeco;if(!o||!o.Giuong||!o.Giuong.type)return e.setLupinToilet();e.lupin.timeScale=1,e.lupin.setAnimation(0,"emotion/idle",!1),e.lupin.setAnimation(1,"home/bed",!0),e.lupin.clearTrack(0),e.lupin.node.position=cc.v3(264,-378),e.setLupinOpacity()})},t.prototype.setLupinStand=function(){this.lupin.setAnimation(1,"general/stand_thinking",!1),this.lupin.setAnimation(0,"emotion/sinister",!0),this.lupin.node.position=cc.v3(19,-515),this.setLupinOpacity()},t.prototype.setLupinToilet=function(){var e=this;this.lupin.setAnimation(1,"home/seat_toilet",!1),this.lupin.setAnimation(0,"emotion/idle",!1),this.lupin.node.position=cc.v3(-110,-305),this.lupin.node.opacity=180,u(this.lupin.node).to(.5,{opacity:255}).repeat(2,u().call(function(){e.lupin.setAnimation(1,"home/seat_toilet",!0),e.lupin.setAnimation(0,"emotion/idle",!0)}).delay(5).call(function(){e.lupin.clearTrack(0),e.lupin.setAnimation(1,"home/seat_toilet2",!1)}).delay(3)).call(function(){e.setLupinStand()}).start()},t.prototype.updateCalendar=function(){var e=this;a.default.getData(a.default.FACEBOOK_KEY,function(t,n){var o=10-n.unlockedLevel%10;e.dayCount.string=o.toString()})},r([l(sp.Skeleton)],t.prototype,"lupin",void 0),r([l(cc.Node)],t.prototype,"ui",void 0),r([l(cc.Sprite)],t.prototype,"wall",void 0),r([l(cc.Sprite)],t.prototype,"floor",void 0),r([l(cc.Sprite)],t.prototype,"bed",void 0),r([l(cc.Sprite)],t.prototype,"tv",void 0),r([l(cc.Sprite)],t.prototype,"window",void 0),r([l(cc.Sprite)],t.prototype,"pricture",void 0),r([l(cc.Sprite)],t.prototype,"toilet",void 0),r([l(cc.Label)],t.prototype,"dayCount",void 0),r([l(cc.Node)],t.prototype,"notification",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./Data":"Data"}],Introduce:[function(e,t,n){"use strict";cc._RF.push(t,"d019bXxFwlPZZ7uJAYL0AVJ","Introduce");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Scripts/EffectManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=[["STICKMAN","INVOLVED","IN","A","BANK","ROBBERY","HE","WAS","ARRESTED","IN","A","SECRET","PRISON","IN","AMERICA"],["AFTER","ESCAPING","FROM","THE","PRISON,","THE","STICKMAN","LIVED","A","LIFE","OF","LUXURY.","\nBUT","THERE","WAS","AN","ENEMY","WHO","WAS","LIVING","IN","A","PRISON","UNDER","THE","SEA.","\nPUNISHING","HIM","WAS","THE","NEXT","OBJECTIVE."],["AFTER","ESCAPING","TO","THE","ISLAND,","THE","STICKMAN","STOLE","A","JEWEL","FROM","AN","ABORIGINAL","TRIBE.","HE","WAS","ONCE","AGAIN","ARRESTED"]],d=cc.tween,p=0,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prisonScene=[],t.next=null,t.story=null,t.storyLabel=null,t.left=[],t.right=[],t.countWord=0,t}return i(t,e),t.prototype.onLoad=function(){this.resetIntroduce()},t.prototype.onEnable=function(){this.runAnimation()},t.prototype.onDisable=function(){this.resetIntroduce()},t.prototype.resetIntroduce=function(){this.prisonScene[0].node.position=cc.v3(-450,1200),this.prisonScene[1].node.position=cc.v3(1200,133),this.next.opacity=0,this.next.scale=0,this.story.opacity=0,this.storyLabel.string=""},t.prototype.runAnimation=function(){var e=this;d(this.node).call(function(){d(e.prisonScene[0].node).to(.3,{position:cc.v3(0,385)}).start()}).delay(.3).call(function(){d(e.prisonScene[1].node).to(.3,{position:cc.v3(0,220)}).start()}).delay(.5).call(function(){e.story.active=!0,e.story.scale=0,e.story.opacity=0,d(e.story).to(.3,{scaleX:1.2,scaleY:1.5,opacity:255},{easing:"quadIn"}).call(function(){e.schedule(function(){switch(p){case 0:e.storyLabel.fontSize=30,e.storyLabel.lineHeight=30;break;case 1:e.storyLabel.fontSize=22,e.storyLabel.lineHeight=22;break;case 2:e.storyLabel.fontSize=28,e.storyLabel.lineHeight=28}e.countWord<u[p].length?e.storyLabel.string+=u[p][e.countWord]+" ":(cc.log("story","end"),a.default.showButton(e.next,.3)),e.countWord++},.1,u[p].length)}).start()}).start()},t.prototype.startGame=function(){this.node.active=!1,cc.find("Canvas/GameManager").getComponent("GameManager").startGame()},t.prototype.setIntro=function(e){var t=this.left.length;p=Math.floor(e/10),this.countWord=0;for(var n=0;n<t;++n)if(p==n)return this.prisonScene[0].spriteFrame=this.left[n],void(this.prisonScene[1].spriteFrame=this.right[n])},r([l([cc.Sprite])],t.prototype,"prisonScene",void 0),r([l(cc.Node)],t.prototype,"next",void 0),r([l(cc.Node)],t.prototype,"story",void 0),r([l(cc.Label)],t.prototype,"storyLabel",void 0),r([l([cc.SpriteFrame])],t.prototype,"left",void 0),r([l([cc.SpriteFrame])],t.prototype,"right",void 0),r([c],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Scripts/EffectManager":"EffectManager"}],LeaderboardManager:[function(e,t,n){"use strict";cc._RF.push(t,"b29e4CYyF5BIrboahEaUqcB","LeaderboardManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Data"),s=e("./FBInstantManager"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerPrefab=null,t.content=null,t.players=[],t._scroll=null,t}return i(t,e),t.prototype.onLoad=function(){this._scroll=this.node.getComponent(cc.ScrollView)},t.prototype.onEnable=function(){this._scroll.scrollToTop()},t.prototype.onInvite=function(e,t){a.default.getData(a.default.FACEBOOK_KEY,function(e,n){s.default.getInstance().invitePlay({level:n.unlockedLevel,playerId:t})});var n=e.target;n.getChildByName("Text").getComponent(cc.Label).string="invited",n.getComponent(cc.Button).clickEvents.pop()},t.prototype.addPlayerNode=function(e){var t=cc.instantiate(this.playerPrefab),n=e.unlockedLevel||1;n<0&&(n=1),t.getChildByName("Name").getComponent(cc.Label).string=e.name,t.getChildByName("Level").getComponent(cc.Label).string=n;var o=new cc.Component.EventHandler;o.target=this.node,o.component="LeaderboardManager",o.handler="onInvite",o.customEventData=e.id,t.getChildByName("Button").getComponent(cc.Button).clickEvents.push(o),e.photo&&cc.loader.load(e.photo,function(e,n){e&&console.log("load avatar fail",e),t.getChildByName("Avatar").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)}),this.content.addChild(t)},t.prototype.clearLeaderboard=function(){this.content.removeAllChildren(!0)},t.prototype.addPlayers=function(e){this.players=[];var t=e.length<10?e.length:10,n=function(e){return(!e.unlockedLevel||e.unlockedLevel<0)&&(e.unlockedLevel=1),e.unlockedLevel};e.sort(function(e,t){return n(t)-n(e)});for(var o=0;o<t;o++){var i=e[o];this.players.push(i),this.addPlayerNode(i)}},t.prototype.hasPlayers=function(){return!!this.players},r([u(cc.Prefab)],t.prototype,"playerPrefab",void 0),r([u(cc.Node)],t.prototype,"content",void 0),r([l],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./Data":"Data","./FBInstantManager":"FBInstantManager"}],LevelBase:[function(e,t,n){"use strict";cc._RF.push(t,"5aee2Hmyp1LC4bNZhdX+QQs","LevelBase");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.TOTAL_LEVEL=void 0;var a=e("./EffectManager"),s=e("./EventManager"),c=e("./GameManager"),l=e("./GameManager"),u=e("./Data"),d=e("./BundleManager"),p=e("./AdsManager"),f=cc._decorator,v=f.ccclass,h=f.property,g=null,y=null,m=null,_=cc.tween;n.TOTAL_LEVEL=30;var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelCurrent=0,t.numberStage=0,t.stageCurrent=0,t.sceneBegin=null,t.sceneOption0=[],t.sceneOption1=[],t.sceneOption2=[],t.background=null,t.money=null,t.line=null,t.lupin=null,t.otherSpine=[],t.otherSprite=[],t.iconOption=[],t.next=null,t.fishSwim=null,t.sounds=[],t.selected=0,t.currentId=0,t.clickOption=!0,t.optionScene=[[],[],[]],t.arrScene=[],t._gameManager=null,t.fail=null,t.success=null,t.shadow=null,t.currentLine=null,t.isTrue=!0,t._money=50,t._fishSwim=null,t._line=new cc.NodePool,t.camera2d=[],t.lupinSkeletonName="lupin",t.spineDatas=[],t}return i(t,e),t.prototype.onLoad=function(){this._gameManager=cc.find("Canvas/GameManager").getComponent("GameManager"),g=this._gameManager.optionContainer,y=g.getComponent("OptionController"),this.fail=this._gameManager.fail,this.success=this._gameManager.success,this.shadow=this._gameManager.shadow,m=this._gameManager._ui;for(var e=0,t=this.camera2d;e<t.length;e++)t[e].active=!1;this.fishSwim&&!this._fishSwim&&(this._fishSwim=cc.instantiate(this.fishSwim),this._fishSwim.active=!1,this.node.addChild(this._fishSwim))},t.prototype.onEnable=function(){var e=this;console.log("%c"+this.node.name,"color:blue"),this.initOption(),this._gameManager._levelCurrent.script=this,cc.log(this._gameManager._levelCurrent),this.node.getChildByName("Background").zIndex=cc.macro.MIN_ZINDEX,this.initArrayScene(),this.addEventCustom(),this.clickOption=!0,this.lupin.skeletonData=this._gameManager.getSkeletonResource(this.lupinSkeletonName,"lupin"),this.lupin.setSkin("Lupin"),this.otherSpine.forEach(function(t,n){if(e.spineDatas[n]){var o=e.spineDatas[n];t.skeletonData=e._gameManager.getSkeletonResource(o.bundle,o.name)}}),this.initStage(),this.showOptionContainer(!1),this._fishSwim&&(this._fishSwim.active=!0)},t.prototype.onDisable=function(){this.showOptionContainer(!1),this.removeEventCustom(),this.resetUIResult();for(var e=0,t=this.node.children;e<t.length;e++){var n=t[e];n.name.includes("Option")&&(n.active=!1)}this._fishSwim&&(this._fishSwim.active=!1),this._gameManager._home.updateCalendar()},t.prototype.start=function(){if(this.levelCurrent+1<n.TOTAL_LEVEL){var e="Level"+Number(this._gameManager._levelCurrent.level+2);d.default.getInstance().getPrefabByName(e,null)}0===this.stageCurrent&&m.getLeaderboardPlayers()},t.prototype.addEventCustom=function(){this.node.on("request_next_scene",this.nextScene,this),this.node.on("show_continue",this.onContinue,this),this.node.on("next_stage",this.nextStage,this),this.node.on("back_to_stage_begin",this.playStageBegin,this),this.node.on("next_level",this.endGame,this)},t.prototype.removeEventCustom=function(){this.node.off("request_next_scene",this.nextScene,this),this.node.off("show_continue",this.onContinue,this),this.node.off("back_to_stage_begin",this.playStageBegin,this),this.node.off("next_stage",this.nextStage,this),this.node.off("next_level",this.endGame,this)},t.prototype.checkNextSceneExits=function(e,t){switch(t){case 0:return this.node.getChildByName("Option1_"+(e+1));case 1:return this.node.getChildByName("Option2_"+(e+1));case 2:return this.node.getChildByName("Option3_"+(e+1));default:cc.error("Khong co scene")}},t.prototype.getInstantiate=function(e,t){switch(t){case 0:return this.optionScene[0][e];case 1:return this.optionScene[1][e];case 2:return this.optionScene[2][e];default:return cc.error("Khong co prefab"),null}},t.prototype.selectedButton=function(e){e.getChildByName("selected").active=!0},t.prototype.resetUIResult=function(){this.shadow.opacity=0,this.fail.opacity=0,this.fail.scale=10,this.success.opacity=0,this.success.scale=10},t.prototype.endGame=function(e){var t=this;this._gameManager._levelCurrent.level<n.TOTAL_LEVEL&&++this._gameManager._levelCurrent.level,this._gameManager._levelCurrent.level>this._gameManager._data.unlockedLevel&&(this._gameManager._data.unlockedLevel=this._gameManager._levelCurrent.level,u.default.getData(u.default.FACEBOOK_KEY,function(e,n){n.unlockedLevel=t._gameManager._levelCurrent.level,u.default.saveData(n,u.default.FACEBOOK_KEY),u.default.saveData(n,u.default.FIREBASE_KEY)})),this.resetUIResult(),this.showEndGame(e)},t.prototype.nextScene=function(){var e=this;this._gameManager._currentScene.active=!1;var t=this.checkNextSceneExits(this.currentId,this.selected);if(t)return t.active=!0,this._gameManager._currentScene=t,void++this.currentId;(t=this.getInstantiate(this.currentId,this.selected))&&(t.zIndex=-1,this._gameManager._currentScene=t,this.arrScene.push(t),this.scheduleOnce(function(){e.node.addChild(t)},.2)),++this.currentId},t.prototype.nextStage=function(){if(this.next){for(var e=0,t=this.node.parent.children;e<t.length;e++)t[e].active=!1;var n=this.node.parent.getChildByName(this.next.name);n?n.active=!0:(n=cc.instantiate(this.next),this.node.parent.addChild(n))}},t.prototype.initStage=function(){cc.audioEngine.stopAllEffects(),this._gameManager.btnSetting.active=!0,this.currentId=0,this.clickOption=!0,this.camera2d[0].position=cc.v3(0,0),this.camera2d[0].getComponent(cc.Camera).zoomRatio=1,this.background.zIndex=cc.macro.MIN_ZINDEX,this._gameManager.mainCamera.active=!1;for(var e=0,t=this.camera2d;e<t.length;e++)t[e].active=!0;this.lupin.timeScale=1;for(var n=0,o=this.otherSpine;n<o.length;n++)o[n].timeScale=1;this.background.position=cc.v3(0,0),this._gameManager.optionContainer.getComponent("OptionController").resetOption(),this._gameManager._currentScene=this.sceneBegin,y.setImageOption(this.iconOption),m.showUIEndGame(!1),this.resetUIResult(),a.default.showUI(!0),this.removeLineStage(),this.createLineStage(this.numberStage),this.resultLineStage(),this.setLevel(this.levelCurrent+1,this.levelCurrent+2),(this.levelCurrent+1)%5==0&&this.levelCurrent>5?(this._gameManager.btnSetting.x=-515,this._gameManager.level.x=50):(this._gameManager.btnSetting.x=-500,this._gameManager.level.x=0),this.showOptionContainer(!1)},t.prototype.hideAllScene=function(){for(var e=0,t=this.node.children;e<t.length;e++){var n=t[e];"Background"!=n.name&&(n.active=!1)}},t.prototype.showEndGame=function(){m.showUIIntroduce(!1),m.showUIEndGame(!0)},t.prototype.selectOption=function(e){if(this._gameManager.playSound(l.SOUND.CLICK,!1),this._gameManager.showGuide(!1),this.clickOption){switch(this.clickOption=!1,e.target.name){case"option1":this.selected=0,g.getChildByName("option1").getChildByName("selected").active=!0,this.runOption1();break;case"option2":this.selected=1,g.getChildByName("option2").getChildByName("selected").active=!0,this.runOption2();break;case"option3":this.selected=2,g.getChildByName("option3").getChildByName("selected").active=!0,this.runOption3();break;default:cc.error("Khong co case phu hop!")}this.selectedButton(e.target)}else cc.error("Khong duoc click lien tuc hoac chon dap an khac!!!")},t.prototype.runOption1=function(){},t.prototype.runOption2=function(){},t.prototype.runOption3=function(){},t.prototype.setLupin=function(e,t,n){t&&this.lupin.setAnimation(0,t,!0),n&&this.lupin.setAnimation(1,n,!0),this.lupin.node.position=cc.v3(e)},t.prototype.setOtherSpine=function(e,t,n,o){n&&e.setAnimation(0,n,!0),o&&e.setAnimation(1,o,!0),t&&(e.node.position=cc.v3(t))},t.prototype.setOtherSprite=function(e,t){e.node.position=cc.v3(t)},t.prototype.initArrayScene=function(){for(var e=[this.sceneOption0,this.sceneOption1,this.sceneOption2],t=0;t<3;t++){var n=[];if(0==this.optionScene[t].length){for(var o=0;o<e[t].length;++o)n.push(cc.instantiate(e[t][o]));this.optionScene[t]=n}}},t.prototype.initOption=function(){for(var e=0;e<3;++e)y.setOption(e,this.node,this.node.name,"selectOption")},t.prototype.showOptionContainer=function(e){e&&a.default.effectScaleOption(g,.7),g.active=e},t.prototype.showFail=function(e){var t=this;c.default.logFailed(this.levelCurrent,this.stageCurrent,e),cc.audioEngine.stopAllEffects(),_(this.node).call(function(){t.lupin.timeScale=0;for(var n=0,o=t.otherSpine;n<o.length;n++)o[n].timeScale=0;a.default.showX(e,t.getLineCurrent())}).delay(1).call(function(){t.scheduleOnce(function(){t._gameManager.playSound(l.SOUND.FAIL_STAGE,!1)},.15),t._gameManager.btnSetting.active=!1,t.lupin.timeScale=0;for(var e=0,n=t.otherSpine;e<n.length;e++)n[e].timeScale=0;a.default.effectFail(),a.default.showUI(!1)}).delay(2).call(function(){p.default.getInstance().showInterestialAds(function(e){e&&cc.log("ADS",e.message),a.default.hideScene(s.default.sendRequestReset,t.node)})}).start()},t.prototype.showSuccess=function(e){var t=this;c.default.logPassed(this.levelCurrent,this.stageCurrent,e),cc.audioEngine.stopAllEffects(),_(this.node).call(function(){a.default.showTick(e,t.getLineCurrent())}).delay(1).call(function(){t.scheduleOnce(function(){t._gameManager.playSound(l.SOUND.SUCCESS_LEVEL,!1)},.2),t._gameManager.btnSetting.active=!1,a.default.effectSuccess(),a.default.showUI(!1),t.lupin.timeScale=0;for(var e=0,n=t.otherSpine;e<n.length;e++)n[e].timeScale=0}).delay(2).call(function(){s.default.sendRequestResult(t.node)}).start()},t.prototype.setCamera=function(e,t,n){e.active=!0,e.position=cc.v3(t),e.getComponent(cc.Camera).zoomRatio=n},t.prototype.stopAction=function(){for(var e=0,t=this.otherSpine;e<t.length;e++)t[e].timeScale=0},t.prototype.setTimeScaleAllSpine=function(e){for(var t=0,n=this.otherSpine;t<n.length;t++)n[t].timeScale=e;this.lupin.timeScale=e},t.prototype.onContinue=function(){this._gameManager.mainCamera.active=!0,this.resetUIResult(),this._gameManager._ui.showUIContinue(!0)},t.prototype.playStageBegin=function(){if("GameContainer"!=this.node.parent.name)for(var e=0,t=this.node.parent.children;e<t.length;e++)t[e].active=!1;var n=this.getBeginSceen();n&&(n.active=!0,"GameContainer"==this.node.parent.name?this.initStage():this.background.active=!0)},t.prototype.setBeginSceen=function(e){this._gameManager._beginScene=e},t.prototype.getBeginSceen=function(){return this._gameManager._beginScene},t.prototype.setLevel=function(e,t){this._gameManager.setLevel(e,t)},t.prototype.createLineStage=function(e){var t=cc.find("Canvas/Level");t.getChildByName("Start").zIndex=cc.macro.MIN_ZINDEX,t.getChildByName("Current").zIndex=cc.macro.MAX_ZINDEX;for(var n=0;n<e;++n){var o=void 0;(o=this._line.size()>0?this._line.get():cc.instantiate(this.line)).zIndex=0+n,cc.find("Canvas/Level").addChild(o)}},t.prototype.removeLineStage=function(){for(var e=cc.find("Canvas/Level").children,t=0;t<e.length;++t){var n=e[t];if("Start"!=n.name&&"Current"!=n.name){for(var o=0,i=n.children;o<i.length;o++)i[o].active=!1;this._line.put(n),--t}}},t.prototype.resultLineStage=function(){for(var e=cc.find("Canvas/Level"),t=0,n=1;n<e.children.length-1;++n)"Line"==e.children[n].name&&t<this.stageCurrent&&(++t,e.children[n].getChildByName("TrueAnswer").active=!0)},t.prototype.getLineCurrent=function(){return cc.find("Canvas/Level").children[this.stageCurrent+1]},t.prototype.nextLevel=function(){var e=this;_(this.node).call(function(){a.default.showTick(e.selected,e.getLineCurrent())}).delay(1).call(function(){e.lupin.timeScale=0;for(var t=0,n=e.otherSpine;t<n.length;t++)n[t].timeScale=0;a.default.effectSuccess(),a.default.showUI(!1)}).delay(2).call(function(){s.default.sendRequestResult(e.node)}).start()},t.prototype.showContinue=function(){var e=this;c.default.logFailed(this.levelCurrent,this.stageCurrent,this.selected),cc.audioEngine.stopAllEffects(),this.lupin.timeScale=0,this.otherSpine.forEach(function(e){e.timeScale=0}),_(this.node).call(function(){a.default.showX(e.selected,e.getLineCurrent())}).delay(1).call(function(){e.scheduleOnce(function(){e._gameManager.playSound(l.SOUND.FAIL_STAGE,!1)},.15),a.default.effectFail(),a.default.showUI(!1)}).delay(2).call(function(){p.default.getInstance().showInterestialAds(function(t){t&&cc.log("ADS",t.message),s.default.sendRequestContinue(e.node)})}).start()},t.prototype.onPass=function(){var e=this;c.default.logPassed(this.levelCurrent,this.stageCurrent,this.selected),cc.audioEngine.stopAllEffects(),_(this.node).call(function(){a.default.showTick(e.selected,e.getLineCurrent())}).delay(1).call(function(){e._gameManager.btnSetting.active=!1,e.scheduleOnce(function(){e._gameManager.playSound(l.SOUND.SUCCESS_STAGE,!1)},.2),a.default.effectSuccess(),a.default.showUI(!1),e.lupin.timeScale=0,e.otherSpine.forEach(function(e){e.timeScale=0})}).delay(2).call(function(){p.default.getInstance().showInterestialAds(function(){s.default.sendRequestNextStage(e.node)})}).start()},t.prototype.showComingSoon=function(){this.resetUIResult(),this._gameManager.playSound(l.SOUND.SUCCESS_LEVEL,!1),a.default.showTick(this.selected,this.getLineCurrent()),++this._gameManager._levelCurrent.level,this._gameManager._levelCurrent.level>this._gameManager._data.unlockedLevel&&(this._gameManager._data.unlockedLevel=this._gameManager._levelCurrent.level,u.default.saveData(this._gameManager._data,u.default.FACEBOOK_KEY),u.default.saveData(this._gameManager._data,u.default.FIREBASE_KEY),u.default.saveData(this._gameManager._data,u.default.LOCAL_KEY)),this._gameManager.btnSetting.active=!1,this._gameManager._ui.showComingSoon()},t.prototype.playSound=function(e,t,n){var o=this;u.default.getData(u.default.LOCAL_KEY,function(i,r){r.isSound&&o.scheduleOnce(function(){cc.audioEngine.playEffect(o.sounds[e],t)},n)})},r([h],t.prototype,"levelCurrent",void 0),r([h],t.prototype,"numberStage",void 0),r([h],t.prototype,"stageCurrent",void 0),r([h(cc.Node)],t.prototype,"sceneBegin",void 0),r([h([cc.Prefab])],t.prototype,"sceneOption0",void 0),r([h([cc.Prefab])],t.prototype,"sceneOption1",void 0),r([h([cc.Prefab])],t.prototype,"sceneOption2",void 0),r([h(cc.Node)],t.prototype,"background",void 0),r([h(cc.Prefab)],t.prototype,"money",void 0),r([h(cc.Prefab)],t.prototype,"line",void 0),r([h(sp.Skeleton)],t.prototype,"lupin",void 0),r([h([sp.Skeleton])],t.prototype,"otherSpine",void 0),r([h([cc.Sprite])],t.prototype,"otherSprite",void 0),r([h([cc.SpriteFrame])],t.prototype,"iconOption",void 0),r([h(cc.Prefab)],t.prototype,"next",void 0),r([h(cc.Prefab)],t.prototype,"fishSwim",void 0),r([h([cc.AudioClip])],t.prototype,"sounds",void 0),r([h(cc.Node)],t.prototype,"camera2d",void 0),r([v],t)}(cc.Component);n.default=E,cc._RF.pop()},{"./AdsManager":"AdsManager","./BundleManager":"BundleManager","./Data":"Data","./EffectManager":"EffectManager","./EventManager":"EventManager","./GameManager":"GameManager"}],LevelController:[function(e,t,n){"use strict";cc._RF.push(t,"6197e/VHQpPtbSIrhBevAtS","LevelController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stage=[],t.stageBegin=null,t.numberStage=0,t.topContainer=null,t.itemStage=null,t}return i(t,e),t.prototype.onLoad=function(){this.initTopContainer()},t.prototype.onEnable=function(){this.stageBegin.getComponent("StageController").runStage()},t.prototype.initTopContainer=function(){for(var e=0;e<this.numberStage;++e){var t=cc.instantiate(this.itemStage);t.name=(e+1).toString(),this.topContainer.addChild(t)}this.topContainer.getChildByName("Next").zIndex=cc.macro.MAX_ZINDEX},r([c({type:cc.Component.EventHandler})],t.prototype,"stage",void 0),r([c(cc.Node)],t.prototype,"stageBegin",void 0),r([c],t.prototype,"numberStage",void 0),r([c(cc.Node)],t.prototype,"topContainer",void 0),r([c(cc.Prefab)],t.prototype,"itemStage",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],ListLevel:[function(e,t,n){"use strict";cc._RF.push(t,"ecffeOqxSREMo+xDLR9m1qE","ListLevel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Data"),s=e("../EffectManager"),c=e("./NewClickItem"),l=cc._decorator,u=l.ccclass,d=l.property,p=cc.tween,f=null,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.pageView=null,t.page=null,t.unlock=null,t.lock=null,t.current=null,t.shadow=null,t.container=null,t.smallItem=null,t.bigItem=null,t.icon=[],t}return i(t,e),t.prototype.onLoad=function(){this.initItem(),f=cc.find("Canvas/GameManager").getComponent("GameManager"),cc.find("Canvas/UI").getComponent("UIController"),this.shadow.opacity=0,this.container.opacity=0,a.default.getData(a.default.FACEBOOK_KEY,function(e,t){f._selectedLevel=t.unlockedLevel})},t.prototype.onEnable=function(){this.node.on("click_item",this.onClickItem,this),this.effectOpen(),this.setStatus();var e=this.container.getChildByName("List").getComponent(cc.PageView);if(f._levelCurrent){var t=Math.floor((f._levelCurrent.level+1)/10);e.setCurrentPageIndex(t)}else e.setCurrentPageIndex(0)},t.prototype.onDisable=function(){this.node.off("click_item",this.onClickItem,this),this.unschedule(this._close)},t.prototype.initItem=function(){for(var e,t=cc.instantiate(this.page),n=0,o=0;o<=30;++o){(e=(o+1)%10==0?cc.instantiate(this.bigItem):cc.instantiate(this.smallItem)).children[0].getComponent(cc.Sprite).spriteFrame=this.icon[o];var i=e.getComponent("NewClickItem");if(i.tick.active=!1,i.setLevel(o+1),i.setStatus(c.STATUS.LOCK),t.addChild(e),10==++n&&(this.content.addChild(t),t=cc.instantiate(this.page),n=0,30==o))return}this.content.addChild(t)},t.prototype.setStatus=function(){var e=this;a.default.getData(a.default.FACEBOOK_KEY,function(t,n){var o=n.unlockedLevel+1;if(0==Math.floor(o/10))for(var i=0;i<o;++i)(u=(l=e.content.children[0].children[i]).getComponent("NewClickItem")).isClick=!0,i==o-1?(u.setStatus(c.STATUS.CURRENT),u.tick.active=!1):(u.setStatus(c.STATUS.UNLOCK),u.tick.active=!0);else for(var r=0,a=0;a<o;){var l,u;if((u=(l=e.content.children[r].children[a]).getComponent("NewClickItem")).isClick=!0,10*r+a==o-1)return s.default.scaleForever(l,.95,1.05,.7),u.setStatus(c.STATUS.CURRENT),void(u.tick.active=!1);a!=o-1&&(u.setStatus(c.STATUS.UNLOCK),u.tick.active=!0),10==++a&&(++r,a=0)}})},t.prototype.effectOpen=function(){var e=this;p(this.shadow).to(.2,{opacity:200}).call(function(){p(e.container).parallel(p().to(.2,{opacity:255}),p().to(.2,{scale:1},{easing:"quartOut"})).start()}).start()},t.prototype.effectClose=function(e){p(this.shadow).to(.2,{opacity:0}).start(),p(this.container).parallel(p().to(.2,{opacity:0}),p().to(.2,{scale:.7},{easing:"quartOut"})).call(e).start()},t.prototype.onClose=function(){var e=this;cc.find("Canvas/GameManager").getComponent("GameManager").playClickAudio(),this.effectClose(function(){e.node.active=!1}),this._close=function(){this.node.active=!1},this.scheduleOnce(this._close,.3)},t.prototype.onClickItem=function(e){var t=e.level;f.selectLevel(t),this.onClose()},t.prototype.previousPage=function(){var e=this.pageView.getCurrentPageIndex();e-1<0||this.pageView.setCurrentPageIndex(e-1)},t.prototype.nextPage=function(){var e=this.pageView.getCurrentPageIndex();this.pageView.setCurrentPageIndex(e+1)},t.prototype.initItemNew=function(){},r([d(cc.Node)],t.prototype,"content",void 0),r([d(cc.PageView)],t.prototype,"pageView",void 0),r([d(cc.Prefab)],t.prototype,"page",void 0),r([d(cc.SpriteFrame)],t.prototype,"unlock",void 0),r([d(cc.SpriteFrame)],t.prototype,"lock",void 0),r([d(cc.SpriteFrame)],t.prototype,"current",void 0),r([d(cc.Node)],t.prototype,"shadow",void 0),r([d(cc.Node)],t.prototype,"container",void 0),r([d(cc.Prefab)],t.prototype,"smallItem",void 0),r([d(cc.Prefab)],t.prototype,"bigItem",void 0),r([d(cc.SpriteFrame)],t.prototype,"icon",void 0),r([u],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../Data":"Data","../EffectManager":"EffectManager","./NewClickItem":"NewClickItem"}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"2cb26ahkbZPCrGfz6CL5SeY","Loading");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dot=[],t}return i(t,e),t.prototype.onEnable=function(){for(var e=0,t=this.dot;e<t.length;e++)t[e].y=0;this.action()},t.prototype.onDisable=function(){for(var e=0,t=this.dot;e<t.length;e++){var n=t[e];cc.Tween.stopAllByTarget(n)}},t.prototype.action=function(){cc.tween(this.dot[0]).repeatForever(cc.tween().by(.2,{position:cc.v3(0,30)},{easing:"cubicIn"}).by(.2,{position:cc.v3(0,-30)},{easing:"cubicOut"}).delay(.5)).start(),cc.tween(this.dot[1]).delay(.15).repeatForever(cc.tween().by(.2,{position:cc.v3(0,30)},{easing:"cubicIn"}).by(.2,{position:cc.v3(0,-30)},{easing:"cubicOut"}).delay(.5)).start(),cc.tween(this.dot[2]).delay(.3).repeatForever(cc.tween().by(.2,{position:cc.v3(0,30)},{easing:"cubicIn"}).by(.2,{position:cc.v3(0,-30)},{easing:"cubicOut"}).delay(.5)).start()},r([c(cc.Node)],t.prototype,"dot",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],NewClickItem:[function(e,t,n){"use strict";cc._RF.push(t,"829a9uw8npBu6RdJBGkk5Vr","NewClickItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.STATUS=void 0;var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.UNLOCK=0]="UNLOCK",e[e.LOCK=1]="LOCK",e[e.CURRENT=2]="CURRENT"})(a=n.STATUS||(n.STATUS={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tick=null,t.frame=null,t.bigNumber=null,t.smallNumber=null,t.image=[],t.isClick=!1,t._status=a.LOCK,t._count=0,t}return i(t,e),t.prototype.onLoad=function(){this._view=this.node.parent.parent.parent},t.prototype.onClick=function(){if(this.isClick){var e=new cc.Event.EventCustom("click_item",!0),t=this.node.parent.children.indexOf(this.node),n=this.node.parent.parent.children.indexOf(this.node.parent);e.level=10*n+t,this.node.dispatchEvent(e)}},t.prototype.setLevel=function(e){this.frame.node.getChildByName("smallNumber").getComponent(cc.Label).string=e,this.frame.node.getChildByName("bigNumber").getComponent(cc.Label).string=e},t.prototype.setStatus=function(e){switch(this._status=e,e){case a.UNLOCK:this.frame.spriteFrame=this.image[0],this.smallNumber.active=!0,this.bigNumber.active=!1,this.smallNumber.color=new cc.Color(255,255,255,255),this.smallNumber.getComponent(cc.LabelOutline).color=new cc.Color(40,40,40,102);break;case a.CURRENT:this.frame.spriteFrame=this.image[1],this.smallNumber.active=!1,this.bigNumber.active=!0,this.bigNumber.color=new cc.Color(255,255,255,255),this.bigNumber.getComponent(cc.LabelOutline).color=new cc.Color(83,44,0,102);break;case a.LOCK:this.frame.spriteFrame=this.image[2],this.smallNumber.active=!1,this.bigNumber.active=!0,this.bigNumber.color=new cc.Color(141,141,141,255),this.bigNumber.getComponent(cc.LabelOutline).color=new cc.Color(40,40,40,102)}},t.prototype.localConvertWorldPointAR=function(e){return e?e.convertToWorldSpaceAR(cc.v2(0,0)):null},t.prototype.worldConvertLocalPointAR=function(e,t){return e?e.convertToNodeSpaceAR(t):null},t.prototype.convetOtherNodeSpaceAR=function(e,t){if(!e||!t)return null;var n=this.localConvertWorldPointAR(e);return this.worldConvertLocalPointAR(t,n)},t.prototype.update=function(){var e=this.convetOtherNodeSpaceAR(this.node,this._view);"item1"==this.node.name?e.x<-500||e.x>500?this.node.opacity=0:this.node.opacity=255:e.x<-750||e.x>750?this.node.opacity=0:this.node.opacity=255},r([l(cc.Node)],t.prototype,"tick",void 0),r([l(cc.Sprite)],t.prototype,"frame",void 0),r([l(cc.Node)],t.prototype,"bigNumber",void 0),r([l(cc.Node)],t.prototype,"smallNumber",void 0),r([l([cc.SpriteFrame])],t.prototype,"image",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Notification:[function(e,t,n){"use strict";cc._RF.push(t,"3bc37L3KwtG8K21z1sMKj3A","Notification");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.duration=0,t.delay=0,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.label.node.position=cc.v3(550,0),cc.tween(this.label.node).repeatForever(cc.tween().delay(Number(this.delay)).by(Number(this.duration),{position:cc.v3(-2170,0)}).call(function(){e.label.node.position=cc.v3(550,0)})).start()},r([c(cc.Label)],t.prototype,"label",void 0),r([c()],t.prototype,"duration",void 0),r([c()],t.prototype,"delay",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],OptimizePageView:[function(e,t,n){"use strict";cc._RF.push(t,"a1781R//gFAbLVSqbJk3RZg","OptimizePageView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=null,t.content=null,t}return i(t,e),t.prototype.update=function(){for(var e=cc.rect(0,-this.view.height/2,this.view.width,this.view.height),t=this.content.children,n=0;n<t.length;++n)for(var o=t[n].children,i=0;i<o.length;++i)e.intersects(o[i].getBoundingBox())?o[i].opacity=255:o[i].opacity=0},r([c(cc.Node)],t.prototype,"view",void 0),r([c(cc.Node)],t.prototype,"content",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],OptionController:[function(e,t,n){"use strict";cc._RF.push(t,"71cf6u8DwJMgKVm2Oh5+mKG","OptionController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.option=[],t}return i(t,e),t.prototype.onDisable=function(){this.resetOption()},t.prototype.resetOption=function(){this.option.forEach(function(e){e.getChildByName("selected").active=!1,e.getChildByName("tick").active=!1,e.getChildByName("x").active=!1})},t.prototype.setOption=function(e,t,n,o){var i=new cc.Component.EventHandler;i.target=t,i.component=n,i.handler=o,this.option[e].getComponent(cc.Button).clickEvents=[],this.option[e].getComponent(cc.Button).clickEvents.push(i)},t.prototype.setImageOption=function(e){for(var t=0;t<e.length;++t)this.node.children[t].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=e[t]},r([c(cc.Node)],t.prototype,"option",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],Setting:[function(e,t,n){"use strict";cc._RF.push(t,"5f46du+rlVPAasD8jvXHQxB","Setting");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Data"),s=cc._decorator,c=s.ccclass,l=s.property,u=cc.tween,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sound=null,t.music=null,t.shadow=null,t.container=null,t._data=null,t._gameManager=null,t}return i(t,e),t.prototype.onLoad=function(){this.shadow.opacity=0,this.container.scale=.7,this.container.opacity=0,this.node.zIndex=cc.macro.MAX_ZINDEX},t.prototype.onEnable=function(){var e=this;this.node.on("touchend",this.onClose,this),this.effectOpen(),this._gameManager=cc.find("Canvas/GameManager").getComponent("GameManager"),a.default.getData(a.default.LOCAL_KEY,function(t,n){e._data=n,e.music.isChecked=e._data.isMusic,e.sound.isChecked=e._data.isSound})},t.prototype.onDisable=function(){this.node.off("touchend",this.onClose,this)},t.prototype.effectOpen=function(){var e=this;u(this.shadow).to(.2,{opacity:200}).call(function(){u(e.container).parallel(u().to(.2,{opacity:255}),u().to(.2,{scale:1},{easing:"quartOut"})).start()}).start()},t.prototype.effectClose=function(e){u(this.shadow).to(.2,{opacity:0}).start(),u(this.container).parallel(u().to(.2,{opacity:0}),u().to(.2,{scale:.7},{easing:"quartOut"})).call(e).start()},t.prototype.onClose=function(){var e=this;this.effectClose(function(){e.node.active=!1})},t.prototype.onChangeToggle=function(e){switch(e.target.parent.name){case"ToggleSound":this._data.isSound=e.isChecked,a.default.saveData(this._data,a.default.LOCAL_KEY);break;case"ToggleMusic":this._data.isMusic=e.isChecked,a.default.saveData(this._data,a.default.LOCAL_KEY),e.isChecked?this.playMusic():this.stopMusic()}},t.prototype.onRestoreSetting=function(){this._data.isSound=!0,this._data.isMusic=!0,this.sound.isChecked=this._data.isSound,this.music.isChecked=this._data.isMusic,a.default.saveData(this._data,a.default.LOCAL_KEY)},t.prototype.stopMusic=function(){this._gameManager.stopAudioBG()},t.prototype.playMusic=function(){this._gameManager.playAudioBG()},r([l(cc.Toggle)],t.prototype,"sound",void 0),r([l(cc.Toggle)],t.prototype,"music",void 0),r([l(cc.Node)],t.prototype,"shadow",void 0),r([l(cc.Node)],t.prototype,"container",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./Data":"Data"}],Shop:[function(e,t,n){"use strict";cc._RF.push(t,"90b6dWHqk1Mw4QLtFoNCCzW","Shop");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Data"),l=e("../AdsManager"),u=e("../GameManager"),d=cc._decorator,p=d.ccclass,f=d.property,v=cc.tween,h=["Tuong","Sannha","Giuong","Tivi","cuaso","Anh","Boncau"],g=["DEFAULT","TYPE1","TYPE2","TYPE3","TYPE4","NONE"],y=[[0,1,6,14,20],[0,1,8,14,22],[2,2,8,18,22,0],[0,2,10,16,24],[0,4,10,18,24],[0,4,12,18,26],[0,6,12,20,26]],m=[[0,100,-1,400,600],[0,100,-1,400,600],[0,150,-1,400,600,0],[0,150,-1,400,600],[0,200,-1,400,600],[0,200,-1,400,600],[0,200,-1,400,600]],_={Tuong:{cateIndex:0,type:"DEFAULT"},Sannha:{cateIndex:0,type:"DEFAULT"},Giuong:{cateIndex:0,type:"NONE"},Tivi:{cateIndex:0,type:"DEFAULT"},cuaso:{cateIndex:0,type:"DEFAULT"},Anh:{cateIndex:0,type:"DEFAULT"},Boncau:{cateIndex:0,type:"DEFAULT"}},E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.itemContents=[],t.overlay=null,t.back=null,t.adsMoney=null,t.confirm=null,t._gameManager=null,t._uiController=null,t._homeController=null,t._itemNodes=[],t._confirmDeco={cateIndex:0,typeIndex:0},t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){this._gameManager=cc.find("Canvas/GameManager").getComponent("GameManager"),this._uiController=cc.find("Canvas/UI").getComponent("UIController");var e=cc.find("Canvas/Home");e&&(this._homeController=e.getComponent("HomeController")),this.overlay.active=!1,this.back.active=!1,this.adsMoney.active=!1,this.confirm.active=!1},t.prototype.onEnable=function(){this.background.opacity=0,this.background.position=cc.v3(0,-1377),this.effectOpen(),this.setUnlockItems()},t.serilizeUnlockedDeco=function(e){if(e.unlockedDeco instanceof Array){var t={};return e.unlockedDeco.forEach(function(e,n){t[h[n]]={},e.forEach(function(e,o){t[h[n]][g[o]]=e})}),e.unlockedDeco=t,t}return e.unlockedDeco},t.prototype.getUnlockedDeco=function(e){return n.serilizeUnlockedDeco(e)},t.prototype.setUnlockItems=function(e){var t=this;void 0===e&&(e=null),c.default.getData(c.default.FACEBOOK_KEY,function(n,o){var i=o.money,a=o.unlockedLevel||0,l=t.getUnlockedDeco(o)||{},u=r(r({},_),o.currentDeco);y.forEach(function(e,n){var o=h[n];!l[o]&&(l[o]={}),t._itemNodes[n]||(t._itemNodes[n]=[]),e.forEach(function(e,r){var c,d=g[r],p=t.itemContents[n].getChildByName("Item"+(r||"")),f=!(!u[o]||u[o].type!==d);!l[o][d]&&(l[o][d]=!1),t._itemNodes[n][r]||(t._itemNodes[n][r]={tick:p.getChildByName("Tick"),require:p.getChildByName("Require"),payment:p.getChildByName("Payment"),ads:p.getChildByName("Ads")});var v=m[n][r],h=t._itemNodes[n][r].require.getChildByName("Level"),y=t._itemNodes[n][r].payment.getChildByName("Price"),_=i<v?[255,32,0]:[255,255,255];h.getComponent(cc.Label).string="LEVEL "+(e+1),y.getComponent(cc.Label).string=v,y.color=new((c=cc.Color).bind.apply(c,s([void 0],_))),e?a>e?0===v?(l[o][d]=!0,t._itemNodes[n][r].tick.active=f,t._itemNodes[n][r].require.active=!1,t._itemNodes[n][r].payment.active=!1,t._itemNodes[n][r].ads.active=!1):l[o][d]?(t._itemNodes[n][r].tick.active=f,t._itemNodes[n][r].require.active=!1,t._itemNodes[n][r].payment.active=!1,t._itemNodes[n][r].ads.active=!1):(t._itemNodes[n][r].tick.active=!1,t._itemNodes[n][r].require.active=!1,t._itemNodes[n][r].payment.active=v>0,t._itemNodes[n][r].ads.active=-1===v):(t._itemNodes[n][r].tick.active=!1,t._itemNodes[n][r].require.active=!0,t._itemNodes[n][r].payment.active=!1,t._itemNodes[n][r].ads.active=!1):(l[o][d]=!0,t._itemNodes[n][r].tick.active=f,t._itemNodes[n][r].require.active=!1,t._itemNodes[n][r].payment.active=!1,t._itemNodes[n][r].ads.active=!1)})}),o.unlockedDeco=l,c.default.saveData(o,c.default.FACEBOOK_KEY),e&&e(l)})},t.prototype.effectOpen=function(){this._uiController.showUIControlling(!1),this._homeController.moveVertical(-360,.5),v(this.background).by(.5,{position:cc.v3(0,793),opacity:255}).start()},t.prototype.effectClose=function(e){void 0===e&&(e=function(){}),this._uiController.showUIControlling(!0),this._homeController.moveVertical(360,.5),v(this.background).by(.5,{position:cc.v3(0,-793),opacity:-255}).call(e).start()},t.prototype.onClose=function(e){var t=this;v(e.target).by(.05,{scale:-.1}).by(.05,{scale:.1}).call(function(){t.effectClose(function(){t.node.active=!1})}).start()},t.prototype.onSelectCate=function(e,t){var n=parseInt(t);e.target.parent.children.forEach(function(t){var n=t.getChildByName("Selected");t===e.target?n.active=!0:n.active=!1}),this.itemContents.forEach(function(e,t){e.active=t===n})},t.prototype.onSelectItem=function(e,t){var n=this;v(e.target).by(.1,{scale:.1}).by(.1,{scale:-.1}).start(),c.default.getData(c.default.FACEBOOK_KEY,function(e,o){var i=o.money,r=o.unlockedLevel,a=n.getUnlockedDeco(o),s=t.split(":"),c=parseInt(s[0]),l=parseInt(s[1]),u=function(e){var t=h[c],o=g[l],a=y[c][l],s=m[c][l];if(e[t][o])n.changeDeco(c,l,function(){n.setUnlockItems()});else if(r>a){if(-1===s)return n.showAdsReward(function(){var e;(e=n._itemNodes[c][l]).tick.active=!0,e.require.active=!1,e.payment.active=!1,e.ads.active=!1,n.unlockDeco(c,l)});s<=i&&(n._confirmDeco={cateIndex:c,typeIndex:l},n.showConfirm(!0)),s>i&&n.showAdsMoney(!0)}};a?u(a):n.setUnlockItems(function(e){u(e)})})},t.prototype.unlockDeco=function(e,t,n){var o=this;void 0===n&&(n=null);var i=h[e],r=g[t];c.default.getData(c.default.FACEBOOK_KEY,function(a,s){var l=o.getUnlockedDeco(s),d=function(a){a[i][r]=!0,s.unlockedDeco=a,c.default.saveData(s,c.default.FACEBOOK_KEY,function(){u.default.logEvent("decor_"+h[e]+"_"+g[t]),o.changeDeco(e,t,function(){o.setUnlockItems(function(){n&&n(a)})})})};l?d(l):o.setUnlockItems(function(e){d(e)})})},t.prototype.changeDeco=function(e,t,n){var o=this;void 0===n&&(n=null);var i=h[e],r=g[t];c.default.getData(c.default.FACEBOOK_KEY,function(t,a){var s=a.currentDeco||{};s[i]={cateIndex:e,type:r},a.currentDeco=s,c.default.saveData(a,c.default.FACEBOOK_KEY,function(){n&&n(s)}),r||o._homeController.setDecoration(e,null),cc.resources.load("Shop/"+r+"/"+i+"_"+r,cc.SpriteFrame,function(t,n){t&&(n=null),o._homeController.setDecoration(e,n)})})},t.prototype.showAdsReward=function(e){l.default.getInstance().showRewardedAds(function(t){t||e()})},t.prototype.showEffect=function(e){e.scale=0,v(e).to(0,{scale:1}).start()},t.prototype.showAdsMoney=function(e){void 0===e&&(e=!1),this.overlay.active=e,this.adsMoney.active=e,this.back.active=e,e&&(this.showEffect(this.adsMoney),this.showEffect(this.back))},t.prototype.showConfirm=function(e){void 0===e&&(e=!1),this.overlay.active=e,this.confirm.active=e,this.back.active=e,e&&(this.showEffect(this.confirm),this.showEffect(this.back))},t.prototype.onClosePopup=function(){this.showAdsMoney(!1),this.showConfirm(!1)},t.prototype.onAds=function(){var e=this;this.showAdsMoney(!1),this.showAdsReward(function(){e._gameManager.addMoney(200,function(){e.setUnlockItems()})})},t.prototype.onConfirm=function(){var e=this,t=this._confirmDeco,n=t.cateIndex,o=t.typeIndex,i=this._itemNodes[n][o];i.tick.active=!0,i.require.active=!1,i.payment.active=!1,i.ads.active=!1;var r=m[n][o];this._gameManager.addMoney(-r,function(){e.unlockDeco(n,o)}),this.showConfirm(!1)},t.checkBuyableItem=function(e,t,n){if(!n)return!1;for(var o=0;o<m.length;o++)for(var i=m[o],r=n[h[o]],a=0;a<i.length;a++){var s=i[a],c=y[o][a],l=r[g[a]];if(e>=c&&s>0&&s<=t&&!l)return!0}return!1},a([f(cc.Node)],t.prototype,"background",void 0),a([f([cc.Node])],t.prototype,"itemContents",void 0),a([f(cc.Node)],t.prototype,"overlay",void 0),a([f(cc.Node)],t.prototype,"back",void 0),a([f(cc.Node)],t.prototype,"adsMoney",void 0),a([f(cc.Node)],t.prototype,"confirm",void 0),n=a([p],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../AdsManager":"AdsManager","../Data":"Data","../GameManager":"GameManager"}],StageController:[function(e,t,n){"use strict";cc._RF.push(t,"8b31aD44/JG9Z0G6p57oiui","StageController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./EffectManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=[],t.iconOption=[],t.optionContainer=null,t.stageStart=null,t.topContainer=null,t._=null,t.isClick=!1,t}return i(t,e),t.prototype.onLoad=function(){this._=this,this.optionContainer.scale=0},t.prototype.onEnable=function(){var e=this.optionContainer.getComponent("OptionController");e.setImageOption(this.iconOption);for(var t=0;t<e.node.children.length;++t)e.setOption(t,this.node,"StageController","runClip"),this.isClick=!0;this.setTopContainer()},t.prototype.runStage=function(){var e=this.stageStart.getComponent("ClipController");e.startClip(e)},t.prototype.showOptionContainer=function(){a.default.effectScaleOption(this.optionContainer,.5)},t.prototype.runClip=function(e){if(this.isClick){this.isClick=!1;var t=e.target;switch(t.getChildByName("selected").active=!0,t.name){case"option1":(n=this.target[0].getComponent("ClipController")).startClip(n);break;case"option2":(n=this.target[1].getComponent("ClipController")).startClip(n);break;case"option3":var n;(n=this.target[2].getComponent("ClipController")).startClip(n)}}else cc.error("Khong duoc click option lien tuc")},t.prototype.setTopContainer=function(){for(var e=parseInt(this.node.name.split("Stage")[1])-1,t=0;t<this.topContainer.children.length;++t){var n=this.topContainer.children[t].getChildByName((e-1).toString());n&&(n.getChildByName("TrueAnswer").active=!0)}},t.prototype.onResult=function(){cc.Tween.stopAll()},r([l({type:cc.Node})],t.prototype,"target",void 0),r([l(cc.SpriteFrame)],t.prototype,"iconOption",void 0),r([l(cc.Node)],t.prototype,"optionContainer",void 0),r([l({type:cc.Node})],t.prototype,"stageStart",void 0),r([l(cc.Node)],t.prototype,"topContainer",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./EffectManager":"EffectManager"}],TestSpine:[function(e,t,n){"use strict";cc._RF.push(t,"022c5B9hZ9B277tox481Xtb","TestSpine");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lupin=null,t}return i(t,e),t.prototype.onEnable=function(){this.runAnimation()},t.prototype.runAnimation=function(){var e=this;this.lupin.setAnimation(0,"general/hide1",!0),cc.tween(this.node).delay(3).call(function(){e.lupin.setAnimation(0,"emotion/sinister",!0),e.lupin.setCompleteListener(function(t){"emotion/sinister"==t.animation.name&&e.lupin.setAnimation(1,"level_5/throw_bida",!1)})}).start()},r([c(sp.Skeleton)],t.prototype,"lupin",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],UIController:[function(e,t,n){"use strict";cc._RF.push(t,"13ff8fyyBBLrq0/rwHWYaVT","UIController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./EffectManager"),s=e("./Data"),c=e("./BundleManager"),l=e("./FirebaseManager"),u=e("./Shop/Shop"),d=cc._decorator,p=d.ccclass,f=d.property,v=cc.tween,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.home=null,t.background=null,t.moneyContainer=null,t.moneyTop=null,t.levels=null,t.bed=null,t.ads=null,t.replay=null,t.next=null,t.tapToStart=null,t.setting=null,t.successful=null,t.money=null,t.second=null,t.countDown=null,t.continue=null,t.money2=null,t.ads2=null,t.point=null,t.comingSoon=null,t.alert=null,t.invite=null,t.leaderboard=null,t.partical=null,t.background2=null,t.uiEndGame=[],t.uiIntroduce=[],t.uiContinue=[],t.uiControlling=[],t._watchAds=[],t._gameManager=null,t._leaderboardManager=null,t}return i(t,e),t.prototype.onLoad=function(){this.background.zIndex=cc.macro.MIN_ZINDEX,this.uiEndGame=[this.home,this.ads,this.replay,this.next,this.successful,this.moneyContainer,this.moneyTop,this.invite,this.leaderboard],this.uiIntroduce=[this.levels,this.bed,this.tapToStart,this.setting,this.moneyTop],this.uiContinue=[this.continue,this.countDown,this.second,this.money2,this.ads2,this.home],this.uiControlling=[this.levels,this.bed,this.tapToStart,this.setting],this._watchAds=[this.ads,this.ads2],this.node.zIndex=cc.macro.MAX_ZINDEX-2,this._gameManager=cc.find("Canvas/GameManager").getComponent("GameManager"),this._bundleInstance=c.default.getInstance(),this._leaderboardManager=this.leaderboard.getComponent("LeaderboardManager")},t.prototype.onEnable=function(){this.showHome()},t.prototype.start=function(){this.background.active=!1,this.tapToStart.zIndex=cc.macro.MAX_ZINDEX-1},t.prototype.showHome=function(){this.showUIEndGame(!1),this.showUIIntroduce(!0),this.showUIContinue(!1),this.showButtonAdsContinue(!1),this.showButtonAdsEndGame(!1),this.tapToStart.position=cc.v3(0,213),a.default.effectScaleStart(this.tapToStart)},t.prototype.showUIEndGame=function(e){var t=this;this.background.active=e,e?(this._gameManager._clickX4=!0,this.moneyContainer.getChildByName("txt_money").getComponent(cc.Label).string="50",v(this.node).call(function(){this.setting.active=!1,this.moneyTop.scale=0,this.moneyTop.opacity=0,a.default.showButton(this.moneyTop,.2),a.default.showButton(this.ads,.2),this.effectMoneyFly(),this.showButtonAdsEndGame(!0);var e=cc.instantiate(this.partical);this.node.addChild(e),e.position=cc.v3(0,230),e.zIndex=cc.macro.MIN_ZINDEX+1}.bind(this)).delay(1.25).call(function(){t.moneyContainer.scale=0,t.moneyContainer.opacity=0,a.default.showButton(t.moneyContainer,.7)}).call(function(){var e=t._gameManager._levelCurrent.script._money;t._gameManager.addMoney(e)}).call(function(){a.default.effectScaleOption(t.home,.7)}).call(function(){a.default.effectScaleOption(t.invite,.7)}).call(function(){a.default.effectScaleOption(t.next,.7)}).call(function(){a.default.effectScaleOption(t.replay,.7);var e=t.node.getChildByName("Partical");e&&e.destroy()}).call(function(){t.showLeaderboard(!0)}).start()):(this.uiEndGame.forEach(function(t){t.active=e}),this.node.children.forEach(function(e){"Money"==e.name&&e.destroy()}))},t.prototype.effectMoneyFly=function(){a.default.effectFlyMoney(this.money,this.node)},t.prototype.showUIIntroduce=function(e){var t=this;this.background.active=!1,this.home.active=!1,this.tapToStart.position=cc.v3(0,213),a.default.effectScaleStart(this.tapToStart),e?(this.uiIntroduce.forEach(function(e){e.opacity=0}),v(this.node).call(function(){a.default.effectScaleOption(t.setting,.3)}).delay(.4).call(function(){a.default.effectScaleOption(t.moneyTop,.3)}).delay(.4).call(function(){a.default.effectScaleOption(t.levels,.3)}).delay(.4).call(function(){var e=t.moneyTop.getChildByName("txt_money").getComponent(cc.Label).string,n=t.bed.getChildByName("dot");n.active=!1,s.default.getData(s.default.FACEBOOK_KEY,function(t,o){var i=!1;e&&(i=u.default.checkBuyableItem(o.unlockedLevel,parseInt(e),o.unlockedDeco)),i?(n.active=!0,v(n).repeatForever(v().to(.2,{scale:.9}).to(.2,{scale:1})).start()):n.active=!1}),a.default.effectScaleOption(t.bed,.3)}).delay(.4).call(function(){a.default.effectScaleOption(t.tapToStart,.3)}).start()):this.uiIntroduce.forEach(function(t){t.active=e})},t.prototype.showUIContinue=function(e){var t=this;s.default.getData(s.default.FACEBOOK_KEY,function(e,n){n.money<200?(t.uiContinue[3].getChildByName("txt_money").color=cc.color(255,100,100),t.uiContinue[3].getChildByName("txt_money").getComponent(cc.LabelOutline).color=cc.color(255,0,0)):(t.uiContinue[3].getChildByName("txt_money").color=cc.color(255,255,255),t.uiContinue[3].getChildByName("txt_money").getComponent(cc.LabelOutline).color=cc.color(77,77,77))}),this.background.active=e;for(var n=0,o=this.uiContinue;n<o.length;n++)o[n].active=e;e&&this.showButtonAdsContinue(!0)},t.prototype.showComingSoon=function(){var e=this.node.getChildByName("ComingSoon");e?e.active=!0:(e=cc.instantiate(this.comingSoon),this.node.addChild(e))},t.prototype.showUIControlling=function(e){e?this.showUIIntroduce(!0):this.uiControlling.forEach(function(e){e.active=!1})},t.prototype.showButtonAdsContinue=function(e){this.ads2.active=e},t.prototype.showButtonAdsEndGame=function(e){this.ads.active=e},t.prototype.showAlert=function(e,t){void 0===e&&(e=""),void 0===t&&(t=0);var n=this.node.getChildByName("Alert");n?n.active=!0:(n=cc.instantiate(this.alert),this.node.addChild(n)),e&&n.getComponent("Alert").setText(e),t&&this.scheduleOnce(function(){return n.active=!1},t)},t.prototype.setMoney=function(e){var t=this.moneyContainer.getChildByName("txt_money"),n=t.getComponent(cc.Label).string;n=(Number(n)+e).toString(),t.getComponent(cc.Label).string=n},t.prototype.getLeaderboardPlayers=function(){var e=this;l.default.getInstance().getLeaderboard(function(t){e._leaderboardManager.clearLeaderboard(),e._leaderboardManager.addPlayers(t)})},t.prototype.showLeaderboard=function(e){void 0===e&&(e=!0),this.leaderboard.scale=0,this.leaderboard.active=e,e&&this._leaderboardManager.hasPlayers()&&v(this.leaderboard).to(.5,{scale:1}).start()},t.prototype.showGuide=function(e){var t=this,n=this.node.getChildByName("hand");e?v(this.node).delay(1).call(function(){t.background2.active=!0,t.background2.zIndex=cc.macro.MAX_ZINDEX-100,t.background2.opacity=150,n.zIndex=cc.macro.MAX_ZINDEX,v(n).delay(1).repeatForever(v(n).call(function(){n.position=cc.v3(t.tapToStart.x-50,t.tapToStart.y-500),n.opacity=0,n.active=!0}).parallel(v(n).to(.7,{opacity:255}),v(n).to(.7,{position:cc.v3(t.tapToStart.x-50,t.tapToStart.y-300)}).call(function(){cc.tween(n).to(.5,{scale:.9},{easing:"cubicIn"}).to(.5,{scale:1},{easing:"cubicOut"}).start()})).delay(1)).start()}).start():(cc.Tween.stopAllByTarget(n),n.active=!1,v(this.background2).to(.3,{opacity:0}).call(function(){t.background2.active=!1}).start())},r([f(cc.Node)],t.prototype,"home",void 0),r([f(cc.Node)],t.prototype,"background",void 0),r([f(cc.Node)],t.prototype,"moneyContainer",void 0),r([f(cc.Node)],t.prototype,"moneyTop",void 0),r([f(cc.Node)],t.prototype,"levels",void 0),r([f(cc.Node)],t.prototype,"bed",void 0),r([f(cc.Node)],t.prototype,"ads",void 0),r([f(cc.Node)],t.prototype,"replay",void 0),r([f(cc.Node)],t.prototype,"next",void 0),r([f(cc.Node)],t.prototype,"tapToStart",void 0),r([f(cc.Node)],t.prototype,"setting",void 0),r([f(cc.Node)],t.prototype,"successful",void 0),r([f(cc.Prefab)],t.prototype,"money",void 0),r([f(cc.Node)],t.prototype,"second",void 0),r([f(cc.Node)],t.prototype,"countDown",void 0),r([f(cc.Node)],t.prototype,"continue",void 0),r([f(cc.Node)],t.prototype,"money2",void 0),r([f(cc.Node)],t.prototype,"ads2",void 0),r([f(cc.Node)],t.prototype,"point",void 0),r([f(cc.Prefab)],t.prototype,"comingSoon",void 0),r([f(cc.Prefab)],t.prototype,"alert",void 0),r([f(cc.Node)],t.prototype,"invite",void 0),r([f(cc.Node)],t.prototype,"leaderboard",void 0),r([f(cc.Prefab)],t.prototype,"partical",void 0),r([f(cc.Node)],t.prototype,"background2",void 0),r([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./BundleManager":"BundleManager","./Data":"Data","./EffectManager":"EffectManager","./FirebaseManager":"FirebaseManager","./Shop/Shop":"Shop"}],spine:[function(e,t,n){"use strict";cc._RF.push(t,"fb70f8tOLNDzb/r+qkgLO7U","spine");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([s],t)}(sp.Skeleton));n.default=c,cc._RF.pop()},{}]},{},["ComingSoon2","Guide","Introduce","ActionController","AdsManager","Alert","BundleManager","ButtonNext","ClipController","ComingSoon","Config","CountDown5s","Data","EffectManager","EventManager","FBInstantManager","FirebaseManager","GameManager","HomeController","LeaderboardManager","LevelBase","LevelController","ClickItem","ListLevel","NewClickItem","Loading","Notification","OptimizePageView","OptionController","FishSwim","Setting","Shop","StageController","UIController","spine","TestSpine"]);